/*!
 * Project-specific code is Copyright (c) 2018 Cameron Beccario
 *
 * See https://earth.nullschool.net/bundle.js for a readable version of this source, including licenses.
 * See https://github.com/cambecc/earth for a free version of this project.
 *
 */!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=46)}([function(t,n,e){(function(t,e){var r;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var o="object"==("undefined"==typeof self?"undefined":i(self))&&self.self===self&&self||"object"==(void 0===t?"undefined":i(t))&&t.global===t&&t||this||{},a=o._,u=Array.prototype,c=Object.prototype,l="undefined"!=typeof Symbol?Symbol.prototype:null,s=u.push,f=u.slice,h=c.toString,p=c.hasOwnProperty,d=Array.isArray,v=Object.keys,m=Object.create,g=function(){},y=function t(n){return n instanceof t?n:this instanceof t?void(this._wrapped=n):new t(n)};void 0===n||n.nodeType?o._=y:(void 0!==e&&!e.nodeType&&e.exports&&(n=e.exports=y),n._=y),y.VERSION="1.9.1";var b,w=function(t,n,e){if(void 0===n)return t;switch(null==e?3:e){case 1:return function(e){return t.call(n,e)};case 3:return function(e,r,i){return t.call(n,e,r,i)};case 4:return function(e,r,i,o){return t.call(n,e,r,i,o)}}return function(){return t.apply(n,arguments)}},_=function(t,n,e){return y.iteratee!==b?y.iteratee(t,n):null==t?y.identity:y.isFunction(t)?w(t,n,e):y.isObject(t)&&!y.isArray(t)?y.matcher(t):y.property(t)};y.iteratee=b=function(t,n){return _(t,n,1/0)};var x=function(t,n){return n=null==n?t.length-1:+n,function(){for(var e=Math.max(arguments.length-n,0),r=Array(e),i=0;i<e;i++)r[i]=arguments[i+n];switch(n){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(n+1);for(i=0;i<n;i++)o[i]=arguments[i];return o[n]=r,t.apply(this,o)}},M=function(t){if(!y.isObject(t))return{};if(m)return m(t);g.prototype=t;var n=new g;return g.prototype=null,n},E=function(t){return function(n){return null==n?void 0:n[t]}},T=function(t,n){return null!=t&&p.call(t,n)},S=function(t,n){for(var e=n.length,r=0;r<e;r++){if(null==t)return;t=t[n[r]]}return e?t:void 0},k=Math.pow(2,53)-1,A=E("length"),j=function(t){var n=A(t);return"number"==typeof n&&n>=0&&n<=k};y.each=y.forEach=function(t,n,e){var r,i;if(n=w(n,e),j(t))for(r=0,i=t.length;r<i;r++)n(t[r],r,t);else{var o=y.keys(t);for(r=0,i=o.length;r<i;r++)n(t[o[r]],o[r],t)}return t},y.map=y.collect=function(t,n,e){n=_(n,e);for(var r=!j(t)&&y.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var u=r?r[a]:a;o[a]=n(t[u],u,t)}return o};var N=function(t){return function(n,e,r,i){var o=arguments.length>=3;return function(n,e,r,i){var o=!j(n)&&y.keys(n),a=(o||n).length,u=t>0?0:a-1;for(i||(r=n[o?o[u]:u],u+=t);u>=0&&u<a;u+=t){var c=o?o[u]:u;r=e(r,n[c],c,n)}return r}(n,w(e,i,4),r,o)}};y.reduce=y.foldl=y.inject=N(1),y.reduceRight=y.foldr=N(-1),y.find=y.detect=function(t,n,e){var r=(j(t)?y.findIndex:y.findKey)(t,n,e);if(void 0!==r&&-1!==r)return t[r]},y.filter=y.select=function(t,n,e){var r=[];return n=_(n,e),y.each(t,function(t,e,i){n(t,e,i)&&r.push(t)}),r},y.reject=function(t,n,e){return y.filter(t,y.negate(_(n)),e)},y.every=y.all=function(t,n,e){n=_(n,e);for(var r=!j(t)&&y.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!n(t[a],a,t))return!1}return!0},y.some=y.any=function(t,n,e){n=_(n,e);for(var r=!j(t)&&y.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(n(t[a],a,t))return!0}return!1},y.contains=y.includes=y.include=function(t,n,e,r){return j(t)||(t=y.values(t)),("number"!=typeof e||r)&&(e=0),y.indexOf(t,n,e)>=0},y.invoke=x(function(t,n,e){var r,i;return y.isFunction(n)?i=n:y.isArray(n)&&(r=n.slice(0,-1),n=n[n.length-1]),y.map(t,function(t){var o=i;if(!o){if(r&&r.length&&(t=S(t,r)),null==t)return;o=t[n]}return null==o?o:o.apply(t,e)})}),y.pluck=function(t,n){return y.map(t,y.property(n))},y.where=function(t,n){return y.filter(t,y.matcher(n))},y.findWhere=function(t,n){return y.find(t,y.matcher(n))},y.max=function(t,n,e){var r,o,a=-1/0,u=-1/0;if(null==n||"number"==typeof n&&"object"!=i(t[0])&&null!=t)for(var c=0,l=(t=j(t)?t:y.values(t)).length;c<l;c++)null!=(r=t[c])&&r>a&&(a=r);else n=_(n,e),y.each(t,function(t,e,r){((o=n(t,e,r))>u||o===-1/0&&a===-1/0)&&(a=t,u=o)});return a},y.min=function(t,n,e){var r,o,a=1/0,u=1/0;if(null==n||"number"==typeof n&&"object"!=i(t[0])&&null!=t)for(var c=0,l=(t=j(t)?t:y.values(t)).length;c<l;c++)null!=(r=t[c])&&r<a&&(a=r);else n=_(n,e),y.each(t,function(t,e,r){((o=n(t,e,r))<u||o===1/0&&a===1/0)&&(a=t,u=o)});return a},y.shuffle=function(t){return y.sample(t,1/0)},y.sample=function(t,n,e){if(null==n||e)return j(t)||(t=y.values(t)),t[y.random(t.length-1)];var r=j(t)?y.clone(t):y.values(t),i=A(r);n=Math.max(Math.min(n,i),0);for(var o=i-1,a=0;a<n;a++){var u=y.random(a,o),c=r[a];r[a]=r[u],r[u]=c}return r.slice(0,n)},y.sortBy=function(t,n,e){var r=0;return n=_(n,e),y.pluck(y.map(t,function(t,e,i){return{value:t,index:r++,criteria:n(t,e,i)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(e<r||void 0===r)return-1}return t.index-n.index}),"value")};var O=function(t,n){return function(e,r,i){var o=n?[[],[]]:{};return r=_(r,i),y.each(e,function(n,i){var a=r(n,i,e);t(o,n,a)}),o}};y.groupBy=O(function(t,n,e){T(t,e)?t[e].push(n):t[e]=[n]}),y.indexBy=O(function(t,n,e){t[e]=n}),y.countBy=O(function(t,n,e){T(t,e)?t[e]++:t[e]=1});var P=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;y.toArray=function(t){return t?y.isArray(t)?f.call(t):y.isString(t)?t.match(P):j(t)?y.map(t,y.identity):y.values(t):[]},y.size=function(t){return null==t?0:j(t)?t.length:y.keys(t).length},y.partition=O(function(t,n,e){t[e?0:1].push(n)},!0),y.first=y.head=y.take=function(t,n,e){return null==t||t.length<1?null==n?void 0:[]:null==n||e?t[0]:y.initial(t,t.length-n)},y.initial=function(t,n,e){return f.call(t,0,Math.max(0,t.length-(null==n||e?1:n)))},y.last=function(t,n,e){return null==t||t.length<1?null==n?void 0:[]:null==n||e?t[t.length-1]:y.rest(t,Math.max(0,t.length-n))},y.rest=y.tail=y.drop=function(t,n,e){return f.call(t,null==n||e?1:n)},y.compact=function(t){return y.filter(t,Boolean)};var R=function t(n,e,r,i){for(var o=(i=i||[]).length,a=0,u=A(n);a<u;a++){var c=n[a];if(j(c)&&(y.isArray(c)||y.isArguments(c)))if(e)for(var l=0,s=c.length;l<s;)i[o++]=c[l++];else t(c,e,r,i),o=i.length;else r||(i[o++]=c)}return i};y.flatten=function(t,n){return R(t,n,!1)},y.without=x(function(t,n){return y.difference(t,n)}),y.uniq=y.unique=function(t,n,e,r){y.isBoolean(n)||(r=e,e=n,n=!1),null!=e&&(e=_(e,r));for(var i=[],o=[],a=0,u=A(t);a<u;a++){var c=t[a],l=e?e(c,a,t):c;n&&!e?(a&&o===l||i.push(c),o=l):e?y.contains(o,l)||(o.push(l),i.push(c)):y.contains(i,c)||i.push(c)}return i},y.union=x(function(t){return y.uniq(R(t,!0,!0))}),y.intersection=function(t){for(var n=[],e=arguments.length,r=0,i=A(t);r<i;r++){var o=t[r];if(!y.contains(n,o)){var a;for(a=1;a<e&&y.contains(arguments[a],o);a++);a===e&&n.push(o)}}return n},y.difference=x(function(t,n){return n=R(n,!0,!0),y.filter(t,function(t){return!y.contains(n,t)})}),y.zip=x(y.unzip=function(t){for(var n=t&&y.max(t,A).length||0,e=Array(n),r=0;r<n;r++)e[r]=y.pluck(t,r);return e}),y.object=function(t,n){for(var e={},r=0,i=A(t);r<i;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e};var C=function(t){return function(n,e,r){e=_(e,r);for(var i=A(n),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(e(n[o],o,n))return o;return-1}};y.findIndex=C(1),y.findLastIndex=C(-1);var F=function(t,n,e){return function(r,i,o){var a=0,u=A(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+u,a):u=o>=0?Math.min(o+1,u):o+u+1;else if(e&&o&&u)return r[o=e(r,i)]===i?o:-1;if(i!=i)return(o=n(f.call(r,a,u),y.isNaN))>=0?o+a:-1;for(o=t>0?a:u-1;o>=0&&o<u;o+=t)if(r[o]===i)return o;return-1}};y.indexOf=F(1,y.findIndex,y.sortedIndex=function(t,n,e,r){for(var i=(e=_(e,r,1))(n),o=0,a=A(t);o<a;){var u=Math.floor((o+a)/2);e(t[u])<i?o=u+1:a=u}return o}),y.lastIndexOf=F(-1,y.findLastIndex),y.range=function(t,n,e){null==n&&(n=t||0,t=0),e||(e=n<t?-1:1);for(var r=Math.max(Math.ceil((n-t)/e),0),i=Array(r),o=0;o<r;o++,t+=e)i[o]=t;return i},y.chunk=function(t,n){if(null==n||n<1)return[];for(var e=[],r=0,i=t.length;r<i;)e.push(f.call(t,r,r+=n));return e};var z=function(t,n,e,r,i){if(!(r instanceof n))return t.apply(e,i);var o=M(t.prototype),a=t.apply(o,i);return y.isObject(a)?a:o};y.bind=x(function(t,n,e){if(!y.isFunction(t))throw new TypeError("Bind must be called on a function");var r=x(function(i){return z(t,r,n,this,e.concat(i))});return r}),(y.partial=x(function(t,n){var e=y.partial.placeholder;return function r(){for(var i=0,o=n.length,a=Array(o),u=0;u<o;u++)a[u]=n[u]===e?arguments[i++]:n[u];for(;i<arguments.length;)a.push(arguments[i++]);return z(t,r,this,this,a)}})).placeholder=y,y.bindAll=x(function(t,n){var e=(n=R(n,!1,!1)).length;if(e<1)throw new Error("bindAll must be passed function names");for(;e--;){var r=n[e];t[r]=y.bind(t[r],t)}}),y.memoize=function(t,n){var e=function e(r){var i=e.cache,o=""+(n?n.apply(this,arguments):r);return T(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return e.cache={},e},y.delay=x(function(t,n,e){return setTimeout(function(){return t.apply(null,e)},n)}),y.defer=y.partial(y.delay,y,1),y.throttle=function(t,n,e){var r,i,o,a,u=0;e||(e={});var c=function(){u=!1===e.leading?0:y.now(),r=null,a=t.apply(i,o),r||(i=o=null)},l=function(){var l=y.now();u||!1!==e.leading||(u=l);var s=n-(l-u);return i=this,o=arguments,s<=0||s>n?(r&&(clearTimeout(r),r=null),u=l,a=t.apply(i,o),r||(i=o=null)):r||!1===e.trailing||(r=setTimeout(c,s)),a};return l.cancel=function(){clearTimeout(r),u=0,r=i=o=null},l},y.debounce=function(t,n,e){var r,i,o=function(n,e){r=null,e&&(i=t.apply(n,e))},a=x(function(a){if(r&&clearTimeout(r),e){var u=!r;r=setTimeout(o,n),u&&(i=t.apply(this,a))}else r=y.delay(o,n,this,a);return i});return a.cancel=function(){clearTimeout(r),r=null},a},y.wrap=function(t,n){return y.partial(n,t)},y.negate=function(t){return function(){return!t.apply(this,arguments)}},y.compose=function(){var t=arguments,n=t.length-1;return function(){for(var e=n,r=t[n].apply(this,arguments);e--;)r=t[e].call(this,r);return r}},y.after=function(t,n){return function(){if(--t<1)return n.apply(this,arguments)}},y.once=y.partial(y.before=function(t,n){var e;return function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=null),e}},2),y.restArguments=x;var L=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],D=function(t,n){var e=I.length,r=t.constructor,i=y.isFunction(r)&&r.prototype||c,o="constructor";for(T(t,o)&&!y.contains(n,o)&&n.push(o);e--;)(o=I[e])in t&&t[o]!==i[o]&&!y.contains(n,o)&&n.push(o)};y.keys=function(t){if(!y.isObject(t))return[];if(v)return v(t);var n=[];for(var e in t)T(t,e)&&n.push(e);return L&&D(t,n),n},y.allKeys=function(t){if(!y.isObject(t))return[];var n=[];for(var e in t)n.push(e);return L&&D(t,n),n},y.values=function(t){for(var n=y.keys(t),e=n.length,r=Array(e),i=0;i<e;i++)r[i]=t[n[i]];return r},y.mapObject=function(t,n,e){n=_(n,e);for(var r=y.keys(t),i=r.length,o={},a=0;a<i;a++){var u=r[a];o[u]=n(t[u],u,t)}return o},y.pairs=function(t){for(var n=y.keys(t),e=n.length,r=Array(e),i=0;i<e;i++)r[i]=[n[i],t[n[i]]];return r},y.invert=function(t){for(var n={},e=y.keys(t),r=0,i=e.length;r<i;r++)n[t[e[r]]]=e[r];return n},y.functions=y.methods=function(t){var n=[];for(var e in t)y.isFunction(t[e])&&n.push(e);return n.sort()};var q=function(t,n){return function(e){var r=arguments.length;if(n&&(e=Object(e)),r<2||null==e)return e;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),u=a.length,c=0;c<u;c++){var l=a[c];n&&void 0!==e[l]||(e[l]=o[l])}return e}};y.extend=q(y.allKeys),y.extendOwn=y.assign=q(y.keys),y.findKey=function(t,n,e){n=_(n,e);for(var r,i=y.keys(t),o=0,a=i.length;o<a;o++)if(n(t[r=i[o]],r,t))return r};var U,H,G=function(t,n,e){return n in e};y.pick=x(function(t,n){var e={},r=n[0];if(null==t)return e;y.isFunction(r)?(n.length>1&&(r=w(r,n[1])),n=y.allKeys(t)):(r=G,n=R(n,!1,!1),t=Object(t));for(var i=0,o=n.length;i<o;i++){var a=n[i],u=t[a];r(u,a,t)&&(e[a]=u)}return e}),y.omit=x(function(t,n){var e,r=n[0];return y.isFunction(r)?(r=y.negate(r),n.length>1&&(e=n[1])):(n=y.map(R(n,!1,!1),String),r=function(t,e){return!y.contains(n,e)}),y.pick(t,r,e)}),y.defaults=q(y.allKeys,!0),y.create=function(t,n){var e=M(t);return n&&y.extendOwn(e,n),e},y.clone=function(t){return y.isObject(t)?y.isArray(t)?t.slice():y.extend({},t):t},y.tap=function(t,n){return n(t),t},y.isMatch=function(t,n){var e=y.keys(n),r=e.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=e[o];if(n[a]!==i[a]||!(a in i))return!1}return!0},U=function(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var o=i(t);return("function"===o||"object"===o||"object"==i(n))&&H(t,n,e,r)},H=function(t,n,e,r){t instanceof y&&(t=t._wrapped),n instanceof y&&(n=n._wrapped);var o=h.call(t);if(o!==h.call(n))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return l.valueOf.call(t)===l.valueOf.call(n)}var a="[object Array]"===o;if(!a){if("object"!=i(t)||"object"!=i(n))return!1;var u=t.constructor,c=n.constructor;if(u!==c&&!(y.isFunction(u)&&u instanceof u&&y.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in n)return!1}e=e||[],r=r||[];for(var s=e.length;s--;)if(e[s]===t)return r[s]===n;if(e.push(t),r.push(n),a){if((s=t.length)!==n.length)return!1;for(;s--;)if(!U(t[s],n[s],e,r))return!1}else{var f,p=y.keys(t);if(s=p.length,y.keys(n).length!==s)return!1;for(;s--;)if(f=p[s],!T(n,f)||!U(t[f],n[f],e,r))return!1}return e.pop(),r.pop(),!0},y.isEqual=function(t,n){return U(t,n)},y.isEmpty=function(t){return null==t||(j(t)&&(y.isArray(t)||y.isString(t)||y.isArguments(t))?0===t.length:0===y.keys(t).length)},y.isElement=function(t){return!(!t||1!==t.nodeType)},y.isArray=d||function(t){return"[object Array]"===h.call(t)},y.isObject=function(t){var n=i(t);return"function"===n||"object"===n&&!!t},y.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){y["is"+t]=function(n){return h.call(n)==="[object "+t+"]"}}),y.isArguments(arguments)||(y.isArguments=function(t){return T(t,"callee")});var X=o.document&&o.document.childNodes;"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":i(Int8Array))&&"function"!=typeof X&&(y.isFunction=function(t){return"function"==typeof t||!1}),y.isFinite=function(t){return!y.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},y.isNaN=function(t){return y.isNumber(t)&&isNaN(t)},y.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===h.call(t)},y.isNull=function(t){return null===t},y.isUndefined=function(t){return void 0===t},y.has=function(t,n){if(!y.isArray(n))return T(t,n);for(var e=n.length,r=0;r<e;r++){var i=n[r];if(null==t||!p.call(t,i))return!1;t=t[i]}return!!e},y.noConflict=function(){return o._=a,this},y.identity=function(t){return t},y.constant=function(t){return function(){return t}},y.noop=function(){},y.property=function(t){return y.isArray(t)?function(n){return S(n,t)}:E(t)},y.propertyOf=function(t){return null==t?function(){}:function(n){return y.isArray(n)?S(t,n):t[n]}},y.matcher=y.matches=function(t){return t=y.extendOwn({},t),function(n){return y.isMatch(n,t)}},y.times=function(t,n,e){var r=Array(Math.max(0,t));n=w(n,e,1);for(var i=0;i<t;i++)r[i]=n(i);return r},y.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))},y.now=Date.now||function(){return(new Date).getTime()};var W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=y.invert(W),V=function(t){var n=function(n){return t[n]},e="(?:"+y.keys(t).join("|")+")",r=RegExp(e),i=RegExp(e,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,n):t}};y.escape=V(W),y.unescape=V(B),y.result=function(t,n,e){y.isArray(n)||(n=[n]);var r=n.length;if(!r)return y.isFunction(e)?e.call(t):e;for(var i=0;i<r;i++){var o=null==t?void 0:t[n[i]];void 0===o&&(o=e,i=r),t=y.isFunction(o)?o.call(t):o}return t};var Y=0;y.uniqueId=function(t){var n=++Y+"";return t?t+n:n},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(t){return"\\"+K[t]};y.template=function(t,n,e){!n&&e&&(n=e),n=y.defaults({},n,y.templateSettings);var r,i=RegExp([(n.escape||J).source,(n.interpolate||J).source,(n.evaluate||J).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(n,e,r,i,u){return a+=t.slice(o,u).replace($,Z),o=u+n.length,e?a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),n}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(n.variable||"obj","_",a)}catch(t){throw t.source=a,t}var u=function(t){return r.call(this,t,y)},c=n.variable||"obj";return u.source="function("+c+"){\n"+a+"}",u},y.chain=function(t){var n=y(t);return n._chain=!0,n};var Q=function(t,n){return t._chain?y(n).chain():n};y.mixin=function(t){return y.each(y.functions(t),function(n){var e=y[n]=t[n];y.prototype[n]=function(){var t=[this._wrapped];return s.apply(t,arguments),Q(this,e.apply(y,t))}}),y},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=u[t];y.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],Q(this,e)}}),y.each(["concat","join","slice"],function(t){var n=u[t];y.prototype[t]=function(){return Q(this,n.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return String(this._wrapped)},void 0===(r=function(){return y}.apply(n,[]))||(e.exports=r)}()}).call(this,e(7),e(41)(t))},function(t,n,e){"use strict";var r=e(4),i=e(0),o=e(49),a=e(37),u=e(48),c=function(t,n){var e,r,i,o,c=Object(u.a)("beforesend","progress","load","error"),l=Object(a.a)(),s=new XMLHttpRequest,f=null,h=null,p=0;function d(t){var n,r=s.status;if(!r&&function(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}(s)||r>=200&&r<300||304===r){if(i)try{n=i.call(e,s)}catch(t){return void c.call("error",e,t)}else n=s;c.call("load",e,n)}else c.call("error",e,t)}if("undefined"==typeof XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=s.ontimeout=d:s.onreadystatechange=function(t){s.readyState>3&&d(t)},s.onprogress=function(t){c.call("progress",e,t)},e={header:function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?l.get(t):(null==n?l.remove(t):l.set(t,n+""),e)},mimeType:function(t){return arguments.length?(r=null==t?null:t+"",e):r},responseType:function(t){return arguments.length?(o=t,e):o},timeout:function(t){return arguments.length?(p=+t,e):p},user:function(t){return arguments.length<1?f:(f=null==t?null:t+"",e)},password:function(t){return arguments.length<1?h:(h=null==t?null:t+"",e)},response:function(t){return i=t,e},get:function(t,n){return e.send("GET",t,n)},post:function(t,n){return e.send("POST",t,n)},send:function(n,i,a){return s.open(n,t,!0,f,h),null==r||l.has("accept")||l.set("accept",r+",*/*"),s.setRequestHeader&&l.each(function(t,n){s.setRequestHeader(n,t)}),null!=r&&s.overrideMimeType&&s.overrideMimeType(r),null!=o&&(s.responseType=o),p>0&&(s.timeout=p),null==a&&"function"==typeof i&&(a=i,i=null),null!=a&&1===a.length&&(a=function(t){return function(n,e){t(null==n?e:null)}}(a)),null!=a&&e.on("error",a).on("load",function(t){a(null,t)}),c.call("beforesend",e,s),s.send(null==i?null:i),e},abort:function(){return s.abort(),e},on:function(){var t=c.on.apply(c,arguments);return t===c?e:t}},null!=n){if("function"!=typeof n)throw new Error("invalid callback: "+n);return e.get(n)}return e};var l=function(t,n){return function(e,r){var i=c(e).mimeType(t).response(n);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}}("application/json",function(t){return JSON.parse(t.responseText)}),s=e(20),f=e(2);e(3);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(){return 8081==+window.location.port}function d(){return o.a("html").attr("lang")||"en"}function v(){var t=(window.location.hostname.match(/(.*)\.nullschool\.net$/)||[])[1]||"earth";return"earth"===t?"":t}function m(t){return!!t}function g(t){return null!==t&&void 0!==t}function y(t,n){return g(t)?t:n}function b(t){return i.isString(t)&&t.indexOf("/")>=0&&(t=t.split("/")),J(t)&&2===t.length?t[0]/t[1]:+t}function w(t){return J(t)?t[2]:t}function _(t){return 0===t.length?t:t.charAt(0).toUpperCase()+t.substr(1)}function x(){return/firefox/i.test(navigator.userAgent)}function M(){return/android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i.test(navigator.userAgent)}function E(){return self!=top}function T(t,n){return g(t)&&t[n]?t[n].bind(t):null}function S(){var t=window,n=document&&document.documentElement,e=document&&document.getElementsByTagName("body")[0],r=t.innerWidth||n.clientWidth||e.clientWidth,i=t.innerHeight||n.clientHeight||e.clientHeight;return{width:Math.ceil(r),height:Math.ceil(i)}}function k(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function A(){try{return new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})}catch(n){var t=document.createEvent("MouseEvents");return t.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),t}}function j(t,n){for(var e=[],r=85;r<=255;r+=t)e.push("rgb(".concat(r,",").concat(r,",").concat(r,")"));return e.indexFor=function(t){return Math.floor(Math.min(t,n)/n*(e.length-1))},e}function N(t,n){return Math.abs(n).toFixed(2)+"° "+(n>=0?"N":"S")+", "+Math.abs(t).toFixed(2)+"° "+(t>=0?"E":"W")}function O(t,n){return n.conversion(t).toFixed(n.precision)}function P(t,n){var e=Math.atan2(-t[0],-t[1])/r.d*360;return(5*Math.round((e+360)%360/5)).toFixed(0)+"° @ "+O(t[2],n)}function R(t,n,e,r,i){var o=(r||{}).target;return o?o.status?e({status:o.status,message:o.statusText,resource:t,error:r}):e({status:-1,message:"Cannot load ".concat(t,": ").concat(r),resource:t,error:r}):n(i)}function C(t){return new Promise(function(n,e){l(t,function(r,i){return R(t,n,e,r,i)})})}e.d(n,"p",function(){return p}),e.d(n,"F",function(){return d}),e.d(n,"E",function(){return v}),e.d(n,"v",function(){return m}),e.d(n,"w",function(){return g}),e.d(n,"f",function(){return y}),e.d(n,"h",function(){return b}),e.d(n,"D",function(){return w}),e.d(n,"e",function(){return _}),e.d(n,"r",function(){return x}),e.d(n,"u",function(){return M}),e.d(n,"q",function(){return E}),e.d(n,"d",function(){return T}),e.d(n,"H",function(){return S}),e.d(n,"C",function(){return k}),e.d(n,"B",function(){return A}),e.d(n,"I",function(){return j}),e.d(n,"j",function(){return N}),e.d(n,"k",function(){return O}),e.d(n,"l",function(){return P}),e.d(n,"y",function(){return C}),e.d(n,"z",function(){return F}),e.d(n,"x",function(){return z}),e.d(n,"i",function(){return L}),e.d(n,"g",function(){return q}),e.d(n,"m",function(){return U}),e.d(n,"t",function(){return H}),e.d(n,"s",function(){return G}),e.d(n,"o",function(){return X}),e.d(n,"b",function(){return W}),e.d(n,"A",function(){return B}),e.d(n,"G",function(){return V}),e.d(n,"a",function(){return Y}),e.d(n,"n",function(){return J}),e.d(n,"c",function(){return Z}),e.d(n,"J",function(){return Q});var F=i.memoize(C);function z(t){return new Promise(function(n,e){c(t).responseType("arraybuffer").response(function(t){return s.a(t.response)}).get(function(r,i){return R(t,n,e,r,i)})})}function L(t,n,e,i,o){var a=n<0?I:-I,u=e<0?I:-I,c=t([n+a,e]),l=t([n,e+u]),s=a*Math.cos(e*r.b);return[(c[0]-i)/s,(c[1]-o)/s,(l[0]-i)/u,(l[1]-o)/u]}var I=36e-6;function D(t){return i.object(t.split(/[?&]/).filter(m).map(function(t){return t.split("=").map(decodeURIComponent).concat([null])}))}function q(t){return{date:f.d(t)}}function U(){return i.has(D(window.location.search),"app")}function H(){var t=document.referrer.split("/")[2]||"",n=/dailymail/i.test(t);return i.has(D(window.location.search),"kiosk")&&!n}function G(){return i.has(D(window.location.search),"fixed")}function X(){return i.has(D(window.location.search),"debug")}function W(t,n){for(var e=0;e<t.length;e++){var r=t[e],i=n[e];if(r!==i&&!(r!=r&&i!=i||J(r)&&W(r,i)))return!1}return t.length===n.length}function B(t,n){for(var e=new Float32Array(2*t.length),r=0;r<t.length;r++){var i=2*r;e[i]=t[r],e[i+1]=n[r]}return e}function V(t){return Array.prototype.slice.call(t)}function Y(t){var n,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;switch(t.byteLength%4){case 0:n=new Int32Array(t.buffer);break;case 2:n=new Int16Array(t.buffer);break;default:n=new Int8Array(t.buffer)}return function(t,n){for(var e=new Int32Array([t.byteLength]),r=Math.max(t.length/n,1),i=0;i<t.length;i+=r)e[0]=31*e[0]+t[Math.floor(i)];return e[0]}(n,e)}function J(t){if(Array.isArray(t))return!0;if("object"!==h(t)||!t)return!1;var n=t.length;return"number"==typeof n&&n>=0}var K=Object.prototype.hasOwnProperty;function $(t,n){if(void 0!==n&&null!==n)for(var e in n)K.call(n,e)&&(t[e]=n[e])}function Z(t,n){for(var e=1;e<arguments.length;e++)$(t,arguments[e]);return t}function Q(t){for(var n=Object.create(null),e=0;e<arguments.length;e++)$(n,arguments[e]);return n}},function(t,n,e){"use strict";e.d(n,"f",function(){return c}),e.d(n,"c",function(){return l}),e.d(n,"b",function(){return s}),e.d(n,"d",function(){return f}),e.d(n,"a",function(){return p}),e.d(n,"g",function(){return d}),e.d(n,"e",function(){return v}),e.d(n,"h",function(){return m});var r=e(0),i=["year","month","day","hour","minute","second","milli"];function o(t,n){return void 0!==t&&null!==t?t:n}function a(t,n,e){var r=t.toString(),i=Math.max(n-r.length,0);return new Array(i+1).join(e||"0")+r}function u(t){return t=o(t,""),(r.isString(t)||r.isNumber(t))&&(t=new Date(t)),t}function c(t){return{year:(t=u(t)).getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),milli:t.getUTCMilliseconds()}}function l(t){return{year:(t=u(t)).getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),milli:t.getMilliseconds()}}function s(t){var n=+o(t.year,0),e=new Date(Date.UTC(n,o(t.month,1)-1,o(t.day,1),o(t.hour,0),o(t.minute,0),o(t.second,0),o(t.milli,0)));return+e==+e&&0<=n&&n<=99&&e.setUTCFullYear(n),e}function f(t){return h(s(t))}var h=c;function p(t,n){var e=r.clone(t);return r.intersection(Object.keys(n),i).forEach(function(t){e[t]=+o(e[t],0)+ +n[t]}),e}function d(t,n){for(var e=[],r=0;r<n.length;r++){var i=n[r];if("{"===i){var o="";for(r++;r<n.length;r++){if("}"===(i=n[r])){var u=NaN;switch(o[0]){case"y":u=+t.year;break;case"M":u=+t.month;break;case"d":u=+t.day;break;case"h":u=+t.hour;break;case"m":u=+t.minute;break;case"s":u=+t.second;break;case"S":u=+t.milli}u==u?e.push(a(u,o.length)):e.push("{",o,"}");break}o+=i}}else e.push(i)}return e.join("")}function v(t,n,e){var r={};function i(t,n){n==n&&(r[t]=n)}e=e||{year:1,month:2,day:3,hour:4,minute:5,second:6,milli:7};var o=n.exec(t);return o&&(i("year",+o[e.year]),i("month",+o[e.month]),i("day",+o[e.day]),i("hour",+o[e.hour]),i("minute",+o[e.minute]),i("second",+o[e.second]),i("milli",+o[e.milli])),r}function m(t){return s(t).toISOString()}},function(t,n,e){"use strict";function r(t,n){var e=t-n*Math.floor(t/n);return e===n?0:e}function i(t){var n=Math.abs(t);return n<o&&(n+=o,n-=o),Math.sign(t)*n}e.d(n,"c",function(){return r}),e.d(n,"e",function(){return i}),e.d(n,"b",function(){return a}),e.d(n,"a",function(){return u}),e.d(n,"d",function(){return c}),e.d(n,"f",function(){return l});var o=Math.pow(2,52);function a(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)}function u(t,n,e){return Math.max(n,Math.min(t,e))}function c(t,n,e){return(t-n)/(e-n)}function l(t,n,e){return t*(e-n)+n}},function(t,n,e){"use strict";e.d(n,"c",function(){return r}),e.d(n,"d",function(){return i}),e.d(n,"a",function(){return o}),e.d(n,"b",function(){return a});var r=Math.PI,i=2*r,o=360/i,a=i/360},,,function(t,n){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":e(window))&&(r=window)}t.exports=r},,function(t,n,e){"use strict";e.d(n,"b",function(){return r});var r="http://www.w3.org/1999/xhtml";n.a={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},,,,function(t,n,e){"use strict";var r=e(19),i=e(39),o=e(38),a=function(t){return new Array(t.length)};function u(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}u.prototype={constructor:u,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var c="$";function l(t,n,e,r,i,o){for(var a,c=0,l=n.length,s=o.length;c<s;++c)(a=n[c])?(a.__data__=o[c],r[c]=a):e[c]=new u(t,o[c]);for(;c<l;++c)(a=n[c])&&(i[c]=a)}function s(t,n,e,r,i,o,a){var l,s,f,h={},p=n.length,d=o.length,v=new Array(p);for(l=0;l<p;++l)(s=n[l])&&(v[l]=f=c+a.call(s,s.__data__,l,n),f in h?i[l]=s:h[f]=s);for(l=0;l<d;++l)(s=h[f=c+a.call(t,o[l],l,o)])?(r[l]=s,s.__data__=o[l],h[f]=null):e[l]=new u(t,o[l]);for(l=0;l<p;++l)(s=n[l])&&h[v[l]]===s&&(i[l]=s)}function f(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}var h=e(18);var p=e(17);function d(t){return t.trim().split(/^|\s+/)}function v(t){return t.classList||new m(t)}function m(t){this._node=t,this._names=d(t.getAttribute("class")||"")}function g(t,n){for(var e=v(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function y(t,n){for(var e=v(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}m.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function b(){this.textContent=""}function w(){this.innerHTML=""}function _(){this.nextSibling&&this.parentNode.appendChild(this)}function x(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}var M=e(9);var E=function(t){var n=Object(h.a)(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===M.b&&n.documentElement.namespaceURI===M.b?n.createElement(t):n.createElementNS(e,t)}})(n)};function T(){return null}function S(){var t=this.parentNode;t&&t.removeChild(this)}function k(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function A(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var j=e(16);function N(t,n,e){var r=Object(p.a)(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}e.d(n,"c",function(){return O}),e.d(n,"a",function(){return P});var O=[null];function P(t,n){this._groups=t,this._parents=n}function R(){return new P([[document.documentElement]],O)}P.prototype=R.prototype={constructor:P,select:function(t){"function"!=typeof t&&(t=Object(r.a)(t));for(var n=this._groups,e=n.length,i=new Array(e),o=0;o<e;++o)for(var a,u,c=n[o],l=c.length,s=i[o]=new Array(l),f=0;f<l;++f)(a=c[f])&&(u=t.call(a,a.__data__,f,c))&&("__data__"in a&&(u.__data__=a.__data__),s[f]=u);return new P(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Object(i.a)(t));for(var n=this._groups,e=n.length,r=[],o=[],a=0;a<e;++a)for(var u,c=n[a],l=c.length,s=0;s<l;++s)(u=c[s])&&(r.push(t.call(u,u.__data__,s,c)),o.push(u));return new P(r,o)},filter:function(t){"function"!=typeof t&&(t=Object(o.a)(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,u=n[i],c=u.length,l=r[i]=[],s=0;s<c;++s)(a=u[s])&&t.call(a,a.__data__,s,u)&&l.push(a);return new P(r,this._parents)},data:function(t,n){if(!t)return v=new Array(this.size()),f=-1,this.each(function(t){v[++f]=t}),v;var e=n?s:l,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),u=new Array(o),c=new Array(o),f=0;f<o;++f){var h=r[f],p=i[f],d=p.length,v=t.call(h,h&&h.__data__,f,r),m=v.length,g=u[f]=new Array(m),y=a[f]=new Array(m);e(h,p,g,y,c[f]=new Array(d),v,n);for(var b,w,_=0,x=0;_<m;++_)if(b=g[_]){for(_>=x&&(x=_+1);!(w=y[x])&&++x<m;);b._next=w||null}}return(a=new P(a,r))._enter=u,a._exit=c,a},enter:function(){return new P(this._enter||this._groups.map(a),this._parents)},exit:function(){return new P(this._exit||this._groups.map(a),this._parents)},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,l=n[u],s=e[u],f=l.length,h=a[u]=new Array(f),p=0;p<f;++p)(c=l[p]||s[p])&&(h[p]=c);for(;u<r;++u)a[u]=n[u];return new P(a,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=f);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,u=e[o],c=u.length,l=i[o]=new Array(c),s=0;s<c;++s)(a=u[s])&&(l[s]=a);l.sort(n)}return new P(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=Object(h.a)(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):function(t,n){return t.style.getPropertyValue(n)||Object(p.a)(t).getComputedStyle(t,null).getPropertyValue(n)}(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=d(t+"");if(arguments.length<2){for(var r=v(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?g:y)(this,t)}}:n?function(t){return function(){g(this,t)}}:function(t){return function(){y(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?b:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?w:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(_)},lower:function(){return this.each(x)},append:function(t){var n="function"==typeof t?t:E(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:E(t),i=null==n?T:"function"==typeof n?n:Object(r.a)(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(S)},clone:function(t){return this.select(t?A:k)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:j.b,dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return N(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return N(this,t,n)}})(t,n))}};n.b=R},function(t,n,e){"use strict";(function(t){n.a=function(n){function e(t,n){return"function"==typeof n?n.bind(t):function(){}}return{debug:e(n=n||t.console||{},n.log),info:e(n,n.info),warn:e(n,n.warn),error:e(n,n.error),time:e(n,n.time),timeEnd:e(n,n.timeEnd)}}}).call(this,e(7))},,function(t,n,e){"use strict";e.d(n,"c",function(){return i}),e.d(n,"a",function(){return l});var r={},i=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(r={mouseenter:"mouseover",mouseleave:"mouseout"}));function o(t,n,e){return t=a(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function a(t,n,e){return function(r){var o=i;i=r;try{t.call(this,this.__data__,n,e)}finally{i=o}}}function u(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function c(t,n,e){var i=r.hasOwnProperty(t.type)?o:a;return function(r,o,a){var u,c=this.__on,l=i(n,o,a);if(c)for(var s=0,f=c.length;s<f;++s)if((u=c[s]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=l,u.capture=e),void(u.value=n);this.addEventListener(t.type,l,e),u={type:t.type,name:t.name,value:n,listener:l,capture:e},c?c.push(u):this.__on=[u]}}function l(t,n,e,r){var o=i;t.sourceEvent=i,i=t;try{return n.apply(e,r)}finally{i=o}}n.b=function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}(t+""),a=o.length;if(!(arguments.length<2)){for(l=n?c:u,null==e&&(e=!1),r=0;r<a;++r)this.each(l(o[r],n,e));return this}var l=this.node().__on;if(l)for(var s,f=0,h=l.length;f<h;++f)for(r=0,s=l[f];r<a;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value}},function(t,n,e){"use strict";n.a=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}},function(t,n,e){"use strict";var r=e(9);n.a=function(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),r.a.hasOwnProperty(n)?{space:r.a[n],local:t}:t}},function(t,n,e){"use strict";function r(){}n.a=function(t){return null==t?r:function(){return this.querySelector(t)}}},function(t,n,e){"use strict";e.d(n,"a",function(){return u}),e.d(n,"b",function(){return c});var r=e(3);function i(t){for(var n=[],e=0;e<t.length;){var r=t[e++];switch(r>>4){case 12:case 13:r=(31&r)<<6|63&t[e++];break;case 14:r=(15&r)<<12|(63&t[e++])<<6|63&t[e++]}n.push(r)}return String.fromCharCode.apply(null,n)}function o(t,n,e,r,i){var o=new Float32Array(n*e*r);return function(t,n){for(var e=0,r=0;e<n.length;){var i=n[e++];if(i<128)i=i<<25>>25;else switch(i>>4){case 8:case 9:case 10:case 11:i=i<<26>>18|n[e++];break;case 12:case 13:i=i<<27>>11|n[e++]<<8|n[e++];break;case 14:i=i<<28>>4|n[e++]<<16|n[e++]<<8|n[e++];break;case 15:if(255===i){for(var o=1+n[e++];o>0;o--)t[r++]=NaN;continue}i=n[e++]<<24|n[e++]<<16|n[e++]<<8|n[e++]}t[r++]=i}}(o,t),function(t,n,e,r){var i,o,a,u,c,l,s;for(a=0;a<r;a++){for(l=a*n*e,i=1;i<n;i++)s=t[(u=l+i)-1],t[u]+=s==s?s:0;for(o=1;o<e;o++)for(s=t[(c=l+o*n)-n],t[c]+=s==s?s:0,i=1;i<n;i++){var f=t[(u=c+i)-1],h=t[u-n],p=t[u-n-1];s=f+h-p,t[u]+=s==s?s:f==f?f:h==h?h:p==p?p:0}}}(o,n,e,r),function(t,n){for(var e=Math.pow(10,n),r=0;r<t.length;r++){var i=t[r];t[r]=i==i?i/e:7e37}}(o,i),o}function a(t,n,e){var r=new DataView(t,n,e),i=new Uint8Array(t,n+16,e-16),a=r.getInt32(0),u=r.getInt32(4),c=r.getInt32(8),l=r.getFloat32(12);return{metadata:{type:"ppak",cols:a,rows:u,grids:c,scaleFactor:l},values:o(i,a,u,c,l)}}function u(t,n){var e=!!(n||{}).headerOnly,r=0,o=new DataView(t),u=i(new Uint8Array(t,r,4));if(r+=4,"head"!==u)throw new Error("expected 'head' but found '"+u+"'");var c=o.getInt32(r);r+=4;var l,s=JSON.parse(i(new Uint8Array(t,r,c)));r+=c;for(var f,h=[],p=[];"tail"!==(f=i(new Uint8Array(t,r,4)))&&!e;){switch(r+=4,c=o.getInt32(r),r+=4,f){case"ppak":l=a(t,r,c);break;default:throw new Error("unknown block type: "+f)}h.push(l.values),p.push(l.metadata),r+=c}return{header:s,blocks:h,metadata:p}}function c(t,n,e,i){for(var o=new Float32Array(i),a=0,u=0,c=0;u<t.length&&a<i;u++){var l=t[u],s=Array.isArray(l),f=s?l[0]:l,h=s?Object(r.a)(+l[1]+a,a,i):a+1,p=+f;if(null===f||p!=p){if(!(a<h))continue;for(;a<h;)o[a++]=7e37;c=0}else for(;a<h;){var d=(c+=p)*n+e;o[a++]=d==d?d:7e37}}for(;a<i;)o[a++]=7e37;return o}},function(t,n,e){"use strict";n.a=function(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}},function(t,n,e){"use strict";var r={};e.r(r),e.d(r,"atlantis",function(){return Yu}),e.d(r,"conic_equidistant",function(){return Ju}),e.d(r,"equirectangular",function(){return Ku}),e.d(r,"orthographic",function(){return $u}),e.d(r,"patterson",function(){return Zu}),e.d(r,"stereographic",function(){return Qu}),e.d(r,"waterman",function(){return tc}),e.d(r,"winkel3",function(){return nc});var i=e(4),o=e(3),a=e(0),u=e(48),c=e(1);var l=e(49),s=e(16),f=function(){for(var t,n=s.c;t=n.sourceEvent;)n=t;return n},h=function(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]},p=function(t){var n=f();return n.changedTouches&&(n=n.changedTouches[0]),h(t,n)};function d(){s.c.stopImmediatePropagation()}var v=function(){s.c.preventDefault(),s.c.stopImmediatePropagation()},m=function(t){var n=t.document.documentElement,e=Object(l.a)(t).on("dragstart.drag",v,!0);"onselectstart"in n?e.on("selectstart.drag",v,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")};function g(t,n){var e=t.document.documentElement,r=Object(l.a)(t).on("dragstart.drag",null);n&&(r.on("click.drag",v,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var y=Math.SQRT2;function b(t){return((t=Math.exp(t))+1/t)/2}var w=function(t,n){var e,r,i=t[0],o=t[1],a=t[2],u=n[0],c=n[1],l=n[2],s=u-i,f=c-o,h=s*s+f*f;if(h<1e-12)r=Math.log(l/a)/y,e=function(t){return[i+t*s,o+t*f,a*Math.exp(y*t*r)]};else{var p=Math.sqrt(h),d=(l*l-a*a+4*h)/(2*a*2*p),v=(l*l-a*a-4*h)/(2*l*2*p),m=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(v*v+1)-v);r=(g-m)/y,e=function(t){var n=t*r,e=b(m),u=a/(2*p)*(e*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(y*n+m)-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[i+u*s,o+u*f,a*e/b(y*n+m)]}}return e.duration=1e3*r,e},_=function(t,n,e){arguments.length<3&&(e=n,n=f().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return h(t,r);return null},x=e(13);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var E,T,S=0,k=0,A=0,j=1e3,N=0,O=0,P=0,R="object"===("undefined"==typeof performance?"undefined":M(performance))&&performance.now?performance:Date,C="object"===("undefined"==typeof window?"undefined":M(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function F(){return O||(C(z),O=R.now()+P)}function z(){O=0}function L(){this._call=this._time=this._next=null}function I(t,n,e){var r=new L;return r.restart(t,n,e),r}function D(){O=(N=R.now())+P,S=k=0;try{!function(){F(),++S;for(var t,n=E;n;)(t=O-n._time)>=0&&n._call.call(null,t),n=n._next;--S}()}finally{S=0,function(){var t,n,e=E,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:E=n);T=t,U(r)}(),O=0}}function q(){var t=R.now(),n=t-N;n>j&&(P-=n,N=t)}function U(t){S||(k&&(k=clearTimeout(k)),t-O>24?(t<1/0&&(k=setTimeout(D,t-R.now()-P)),A&&(A=clearInterval(A))):(A||(N=R.now(),A=setInterval(q,j)),S=1,C(D)))}L.prototype=I.prototype={constructor:L,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?F():+e)+(null==n?0:+n),this._next||T===this||(T?T._next=this:E=this,T=this),this._call=t,this._time=e,U()},stop:function(){this._call&&(this._call=null,this._time=1/0,U())}};var H=function(t,n,e){var r=new L;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r},G=Object(u.a)("start","end","interrupt"),X=[],W=0,B=1,V=2,Y=3,J=4,K=5,$=6,Z=function(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(c){var l,s,f,h;if(e.state!==B)return u();for(l in i)if((h=i[l]).name===e.name){if(h.state===Y)return H(o);h.state===J?(h.state=$,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[l]):+l<n&&(h.state=$,h.timer.stop(),delete i[l])}if(H(function(){e.state===Y&&(e.state=J,e.timer.restart(a,e.delay,e.time),a(c))}),e.state=V,e.on.call("start",t,t.__data__,e.index,e.group),e.state===V){for(e.state=Y,r=new Array(f=e.tween.length),l=0,s=-1;l<f;++l)(h=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(r[++s]=h);r.length=s+1}}function a(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=K,1),o=-1,a=r.length;++o<a;)r[o].call(null,i);e.state===K&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){for(var r in e.state=$,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=I(function(t){e.state=B,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)},0,e.time)}(t,e,{name:n,index:r,group:i,on:G,tween:X,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:W})};function Q(t,n){var e=t.__transition;if(!e||!(e=e[n])||e.state>W)throw new Error("too late");return e}function tt(t,n){var e=t.__transition;if(!e||!(e=e[n])||e.state>V)throw new Error("too late");return e}function nt(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("too late");return e}var et,rt,it,ot,at=function(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>V&&e.state<K,e.state=$,e.timer.stop(),r&&e.on.call("interrupt",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}},ut=function(t,n){return n-=t=+t,function(e){return t+n*e}},ct=180/Math.PI,lt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},st=function(t,n,e,r,i,o){var a,u,c;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,c/=u),t*r<n*e&&(t=-t,n=-n,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*ct,skewX:Math.atan(c)*ct,scaleX:a,scaleY:u}};function ft(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],c=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var c=a.push("translate(",null,n,null,e);u.push({i:c-4,x:ut(t,i)},{i:c-2,x:ut(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,u,c),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:ut(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,u,c),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:ut(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,u,c),function(t,n,e,r,o,a){if(t!==e||n!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:ut(t,e)},{i:u-2,x:ut(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,c),o=a=null,function(t){for(var n,e=-1,r=c.length;++e<r;)u[(n=c[e]).i]=n.x(t);return u.join("")}}}var ht=ft(function(t){return"none"===t?lt:(et||(et=document.createElement("DIV"),rt=document.documentElement,it=document.defaultView),et.style.transform=t,t=it.getComputedStyle(rt.appendChild(et),null).getPropertyValue("transform"),rt.removeChild(et),t=t.slice(7,-1).split(","),st(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),pt=ft(function(t){return null==t?lt:(ot||(ot=document.createElementNS("http://www.w3.org/2000/svg","g")),ot.setAttribute("transform",t),(t=ot.transform.baseVal.consolidate())?(t=t.matrix,st(t.a,t.b,t.c,t.d,t.e,t.f)):lt)},", ",")",")"),dt=e(18);function vt(t,n,e){var r=t._id;return t.each(function(){var t=tt(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return nt(t,r).value[n]}}var mt=function(t,n,e){t.prototype=n.prototype=e,e.constructor=t};function gt(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function yt(){}var bt="\\s*([+-]?\\d+)\\s*",wt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",_t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xt=/^#([0-9a-f]{3})$/,Mt=/^#([0-9a-f]{6})$/,Et=new RegExp("^rgb\\("+[bt,bt,bt]+"\\)$"),Tt=new RegExp("^rgb\\("+[_t,_t,_t]+"\\)$"),St=new RegExp("^rgba\\("+[bt,bt,bt,wt]+"\\)$"),kt=new RegExp("^rgba\\("+[_t,_t,_t,wt]+"\\)$"),At=new RegExp("^hsl\\("+[wt,_t,_t]+"\\)$"),jt=new RegExp("^hsla\\("+[wt,_t,_t,wt]+"\\)$"),Nt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ot(t){var n;return t=(t+"").trim().toLowerCase(),(n=xt.exec(t))?new zt((n=parseInt(n[1],16))>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):(n=Mt.exec(t))?Pt(parseInt(n[1],16)):(n=Et.exec(t))?new zt(n[1],n[2],n[3],1):(n=Tt.exec(t))?new zt(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=St.exec(t))?Rt(n[1],n[2],n[3],n[4]):(n=kt.exec(t))?Rt(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=At.exec(t))?It(n[1],n[2]/100,n[3]/100,1):(n=jt.exec(t))?It(n[1],n[2]/100,n[3]/100,n[4]):Nt.hasOwnProperty(t)?Pt(Nt[t]):"transparent"===t?new zt(NaN,NaN,NaN,0):null}function Pt(t){return new zt(t>>16&255,t>>8&255,255&t,1)}function Rt(t,n,e,r){return r<=0&&(t=n=e=NaN),new zt(t,n,e,r)}function Ct(t){return t instanceof yt||(t=Ot(t)),t?new zt((t=t.rgb()).r,t.g,t.b,t.opacity):new zt}function Ft(t,n,e,r){return 1===arguments.length?Ct(t):new zt(t,n,e,null==r?1:r)}function zt(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Lt(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function It(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new qt(t,n,e,r)}function Dt(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof qt)return new qt(t.h,t.s,t.l,t.opacity);if(t instanceof yt||(t=Ot(t)),!t)return new qt;if(t instanceof qt)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,u=o-i,c=(o+i)/2;return u?(a=n===o?(e-r)/u+6*(e<r):e===o?(r-n)/u+2:(n-e)/u+4,u/=c<.5?o+i:2-o-i,a*=60):u=c>0&&c<1?0:a,new qt(a,u,c,t.opacity)}(t):new qt(t,n,e,null==r?1:r)}function qt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Ut(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function Ht(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}mt(yt,Ot,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),mt(zt,Ft,gt(yt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new zt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new zt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Lt(this.r)+Lt(this.g)+Lt(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),mt(qt,Dt,gt(yt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new qt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new qt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new zt(Ut(t>=240?t-240:t+120,i,r),Ut(t,i,r),Ut(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Gt=function(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,u=r<n-1?t[r+2]:2*o-i;return Ht((e-r/n)*n,a,i,o,u)}},Xt=function(t){return function(){return t}};function Wt(t,n){return function(e){return t+e*n}}function Bt(t,n){var e=n-t;return e?Wt(t,e>180||e<-180?e-360*Math.round(e/360):e):Xt(isNaN(t)?n:t)}function Vt(t){return 1==(t=+t)?Yt:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):Xt(isNaN(n)?e:n)}}function Yt(t,n){var e=n-t;return e?Wt(t,e):Xt(isNaN(t)?n:t)}var Jt=function t(n){var e=Vt(n);function r(t,n){var r=e((t=Ft(t)).r,(n=Ft(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=Yt(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function Kt(t){return function(n){var e,r,i=n.length,o=new Array(i),a=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=Ft(n[e]),o[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return o=t(o),a=t(a),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=u(t),r+""}}}Kt(Gt),Kt(function(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],a=t[(r+1)%n],u=t[(r+2)%n];return Ht((e-r/n)*n,i,o,a,u)}});var $t=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zt=new RegExp($t.source,"g");var Qt=function(t,n){var e;return("number"==typeof n?ut:n instanceof Ot?Jt:(e=Ot(n))?(n=e,Jt):function(t,n){var e,r,i,o=$t.lastIndex=Zt.lastIndex=0,a=-1,u=[],c=[];for(t+="",n+="";(e=$t.exec(t))&&(r=Zt.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:ut(e,r)})),o=Zt.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function(t){return function(n){return t(n)+""}}(c[0].x):function(t){return function(){return t}}(n):(n=c.length,function(t){for(var e,r=0;r<n;++r)u[(e=c[r]).i]=e.x(t);return u.join("")})})(t,n)};var tn=e(38);var nn=e(19),en=e(39),rn=x.b.prototype.constructor,on=e(17);var an=0;function un(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function cn(){return++an}var ln=x.b.prototype;un.prototype=function(t){return Object(x.b)().transition(t)}.prototype={constructor:un,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Object(nn.a)(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,c,l=r[a],s=l.length,f=o[a]=new Array(s),h=0;h<s;++h)(u=l[h])&&(c=t.call(u,u.__data__,h,l))&&("__data__"in u&&(c.__data__=u.__data__),f[h]=c,Z(f[h],n,e,h,f,nt(u,e)));return new un(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Object(en.a)(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var c,l=r[u],s=l.length,f=0;f<s;++f)if(c=l[f]){for(var h,p=t.call(c,c.__data__,f,l),d=nt(c,e),v=0,m=p.length;v<m;++v)(h=p[v])&&Z(h,n,e,v,p,d);o.push(p),a.push(c)}return new un(o,a,n,e)},filter:function(t){"function"!=typeof t&&(t=Object(tn.a)(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,c=r[i]=[],l=0;l<u;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&c.push(o);return new un(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,l=n[u],s=e[u],f=l.length,h=a[u]=new Array(f),p=0;p<f;++p)(c=l[p]||s[p])&&(h[p]=c);for(;u<r;++u)a[u]=n[u];return new un(a,this._parents,this._name,this._id)},selection:function(){return new rn(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=cn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,l=0;l<c;++l)if(a=u[l]){var s=nt(a,n);Z(a,t,e,l,u,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new un(r,this._parents,t,e)},call:ln.call,nodes:ln.nodes,node:ln.node,size:ln.size,empty:ln.empty,each:ln.each,on:function(t,n){var e=this._id;return arguments.length<2?nt(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}(n)?Q:tt;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(n,e),a.on=i}}(e,t,n))},attr:function(t,n){var e=Object(dt.a)(t),r="transform"===e?pt:Qt;return this.attrTween(t,"function"==typeof n?(e.local?function(t,n,e){var r,i,o;return function(){var a,u=e(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===u?null:a===r&&u===i?o:o=n(r=a,i=u);this.removeAttributeNS(t.space,t.local)}}:function(t,n,e){var r,i,o;return function(){var a,u=e(this);if(null!=u)return(a=this.getAttribute(t))===u?null:a===r&&u===i?o:o=n(r=a,i=u);this.removeAttribute(t)}})(e,r,vt(this,"attr."+t,n)):null==n?(e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(e):(e.local?function(t,n,e){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===e?null:o===r?i:i=n(r=o,e)}}:function(t,n,e){var r,i;return function(){var o=this.getAttribute(t);return o===e?null:o===r?i:i=n(r=o,e)}})(e,r,n+""))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=Object(dt.a)(t);return this.tween(e,(r.local?function(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttributeNS(t.space,t.local,r(n))}}return e._value=n,e}:function(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttribute(t,r(n))}}return e._value=n,e})(r,n))},style:function(t,n,e){var r="transform"==(t+="")?ht:Qt;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=Object(on.a)(this).getComputedStyle(this,null),a=o.getPropertyValue(t),u=(this.style.removeProperty(t),o.getPropertyValue(t));return a===u?null:a===e&&u===r?i:i=n(e=a,r=u)}}(t,r)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof n?function(t,n,e){var r,i,o;return function(){var a=Object(on.a)(this).getComputedStyle(this,null),u=a.getPropertyValue(t),c=e(this);return null==c&&(this.style.removeProperty(t),c=a.getPropertyValue(t)),u===c?null:u===r&&c===i?o:o=n(r=u,i=c)}}(t,r,vt(this,"style."+t,n)):function(t,n,e){var r,i;return function(){var o=Object(on.a)(this).getComputedStyle(this,null).getPropertyValue(t);return o===e?null:o===r?i:i=n(r=o,e)}}(t,r,n+""),e)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){function r(){var r=this,i=n.apply(r,arguments);return i&&function(n){r.style.setProperty(t,i(n),e)}}return r._value=n,r}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(vt(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=nt(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?function(t,n){var e,r;return function(){var i=tt(this,t),o=i.tween;if(o!==e)for(var a=0,u=(r=e=o).length;a<u;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=tt(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:n,value:e},c=0,l=i.length;c<l;++c)if(i[c].name===n){i[c]=u;break}c===l&&i.push(u)}o.tween=i}})(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){Q(this,t).delay=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){Q(this,t).delay=n}})(n,t)):nt(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){tt(this,t).duration=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){tt(this,t).duration=n}})(n,t)):nt(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){tt(this,t).ease=n}}(n,t)):nt(this.node(),n).ease}};var sn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function fn(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return sn.time=F(),sn;return e}x.b.prototype.interrupt=function(t){return this.each(function(){at(this,t)})},x.b.prototype.transition=function(t){var n,e;t instanceof un?(n=t._id,t=t._name):(n=cn(),(e=sn).time=F(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,l=0;l<c;++l)(a=u[l])&&Z(a,t,n,l,u,e||fn(a,n));return new un(r,this._parents,t,n)};var hn=function(t){return function(){return t}};function pn(t,n,e){this.k=t,this.x=n,this.y=e}pn.prototype={constructor:pn,scale:function(t){return 1===t?this:new pn(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new pn(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dn=new pn(1,0,0);function vn(){s.c.stopImmediatePropagation()}pn.prototype;var mn=function(){s.c.preventDefault(),s.c.stopImmediatePropagation()};function gn(){return!s.c.button}function yn(){var t,n,e=this;return e instanceof SVGElement?(t=(e=e.ownerSVGElement||e).width.baseVal.value,n=e.height.baseVal.value):(t=e.clientWidth,n=e.clientHeight),[[0,0],[t,n]]}function bn(){return this.__zoom||dn}function wn(){return-s.c.deltaY*(s.c.deltaMode?120:1)/500}function _n(){return"ontouchstart"in this}function xn(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}var Mn=function(){var t,n,e=gn,r=yn,i=xn,o=wn,a=_n,c=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],h=250,d=w,v=[],y=Object(u.a)("start","zoom","end"),b=500,x=150,M=0;function E(t){t.property("__zoom",bn).on("wheel.zoom",O).on("mousedown.zoom",P).on("dblclick.zoom",R).filter(a).on("touchstart.zoom",C).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function T(t,n){return(n=Math.max(c[0],Math.min(c[1],n)))===t.k?t:new pn(n,t.x,t.y)}function S(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new pn(t.k,r,i)}function k(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function A(t,n,e){t.on("start.zoom",function(){j(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).end()}).tween("zoom",function(){var t=arguments,i=j(this,t),o=r.apply(this,t),a=e||k(o),u=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),c=this.__zoom,l="function"==typeof n?n.apply(this,t):n,s=d(c.invert(a).concat(u/c.k),l.invert(a).concat(u/l.k));return function(t){if(1===t)t=l;else{var n=s(t),e=u/n[2];t=new pn(e,a[0]-n[0]*e,a[1]-n[1]*e)}i.zoom(null,t)}})}function j(t,n){for(var e,r=0,i=v.length;r<i;++r)if((e=v[r]).that===t)return e;return new N(t,n)}function N(t,n){this.that=t,this.args=n,this.index=-1,this.active=0,this.extent=r.apply(t,n)}function O(){if(e.apply(this,arguments)){var t=j(this,arguments),n=this.__zoom,r=Math.max(c[0],Math.min(c[1],n.k*Math.pow(2,o.apply(this,arguments)))),a=p(this);if(t.wheel)t.mouse[0][0]===a[0]&&t.mouse[0][1]===a[1]||(t.mouse[1]=n.invert(t.mouse[0]=a)),clearTimeout(t.wheel);else{if(n.k===r)return;t.mouse=[a,n.invert(a)],at(this),t.start()}mn(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},x),t.zoom("mouse",i(S(T(n,r),t.mouse[0],t.mouse[1]),t.extent,f))}}function P(){if(!n&&e.apply(this,arguments)){var t=j(this,arguments),r=Object(l.a)(s.c.view).on("mousemove.zoom",function(){if(mn(),!t.moved){var n=s.c.clientX-a,e=s.c.clientY-u;t.moved=n*n+e*e>M}t.zoom("mouse",i(S(t.that.__zoom,t.mouse[0]=p(t.that),t.mouse[1]),t.extent,f))},!0).on("mouseup.zoom",function(){r.on("mousemove.zoom mouseup.zoom",null),g(s.c.view,t.moved),mn(),t.end()},!0),o=p(this),a=s.c.clientX,u=s.c.clientY;m(s.c.view),vn(),t.mouse=[o,this.__zoom.invert(o)],at(this),t.start()}}function R(){if(e.apply(this,arguments)){var t=this.__zoom,n=p(this),o=t.invert(n),a=t.k*(s.c.shiftKey?.5:2),u=i(S(T(t,a),n,o),r.apply(this,arguments),f);mn(),h>0?Object(l.a)(this).transition().duration(h).call(A,u,n):Object(l.a)(this).call(E.transform,u)}}function C(){if(e.apply(this,arguments)){var n,r,i,o,a=j(this,arguments),u=s.c.changedTouches,c=u.length;for(vn(),r=0;r<c;++r)i=u[r],o=[o=_(this,u,i.identifier),this.__zoom.invert(o),i.identifier],a.touch0?a.touch1||(a.touch1=o):(a.touch0=o,n=!0);if(t&&(t=clearTimeout(t),!a.touch1))return a.end(),void((o=Object(l.a)(this).on("dblclick.zoom"))&&o.apply(this,arguments));n&&(t=setTimeout(function(){t=null},b),at(this),a.start())}}function F(){var n,e,r,o,a=j(this,arguments),u=s.c.changedTouches,c=u.length;for(mn(),t&&(t=clearTimeout(t)),n=0;n<c;++n)e=u[n],r=_(this,u,e.identifier),a.touch0&&a.touch0[2]===e.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===e.identifier&&(a.touch1[0]=r);if(e=a.that.__zoom,a.touch1){var l=a.touch0[0],h=a.touch0[1],p=a.touch1[0],d=a.touch1[1],v=(v=p[0]-l[0])*v+(v=p[1]-l[1])*v,m=(m=d[0]-h[0])*m+(m=d[1]-h[1])*m;e=T(e,Math.sqrt(v/m)),r=[(l[0]+p[0])/2,(l[1]+p[1])/2],o=[(h[0]+d[0])/2,(h[1]+d[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],o=a.touch0[1]}a.zoom("touch",i(S(e,r,o),a.extent,f))}function z(){var t,e,r=j(this,arguments),i=s.c.changedTouches,o=i.length;for(vn(),n&&clearTimeout(n),n=setTimeout(function(){n=null},b),t=0;t<o;++t)e=i[t],r.touch0&&r.touch0[2]===e.identifier?delete r.touch0:r.touch1&&r.touch1[2]===e.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0?r.touch0[1]=this.__zoom.invert(r.touch0[0]):r.end()}return E.transform=function(t,n){var e=t.selection?t.selection():t;e.property("__zoom",bn),t!==e?A(t,n):e.interrupt().each(function(){j(this,arguments).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()})},E.scaleBy=function(t,n){E.scaleTo(t,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)})},E.scaleTo=function(t,n){E.transform(t,function(){var t=r.apply(this,arguments),e=this.__zoom,o=k(t),a=e.invert(o),u="function"==typeof n?n.apply(this,arguments):n;return i(S(T(e,u),o,a),t,f)})},E.translateBy=function(t,n,e){E.transform(t,function(){return i(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof e?e.apply(this,arguments):e),r.apply(this,arguments),f)})},E.translateTo=function(t,n,e){E.transform(t,function(){var t=r.apply(this,arguments),o=this.__zoom,a=k(t);return i(dn.translate(a[0],a[1]).scale(o.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof e?-e.apply(this,arguments):-e),t,f)})},N.prototype={start:function(){return 1==++this.active&&(this.index=v.push(this)-1,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(v.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){Object(s.a)(new function(t,n,e){this.target=t,this.type=n,this.transform=e}(E,t,this.that.__zoom),y.apply,y,[t,this.that,this.args])}},E.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:hn(+t),E):o},E.filter=function(t){return arguments.length?(e="function"==typeof t?t:hn(!!t),E):e},E.touchable=function(t){return arguments.length?(a="function"==typeof t?t:hn(!!t),E):a},E.extent=function(t){return arguments.length?(r="function"==typeof t?t:hn([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),E):r},E.scaleExtent=function(t){return arguments.length?(c[0]=+t[0],c[1]=+t[1],E):[c[0],c[1]]},E.translateExtent=function(t){return arguments.length?(f[0][0]=+t[0][0],f[1][0]=+t[1][0],f[0][1]=+t[0][1],f[1][1]=+t[1][1],E):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},E.constrain=function(t){return arguments.length?(i=t,E):i},E.duration=function(t){return arguments.length?(h=+t,E):h},E.interpolate=function(t){return arguments.length?(d=t,E):d},E.on=function(){var t=y.on.apply(y,arguments);return t===y?E:t},E.clickDistance=function(t){return arguments.length?(M=(t=+t)*t,E):Math.sqrt(M)},E},En=function(t){return function(){return t}};function Tn(t,n,e,r,i,o,a,u,c,l){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=c,this._=l}function Sn(){return!s.c.button}function kn(){return this.parentNode}function An(t){return null==t?{x:s.c.x,y:s.c.y}:t}function jn(){return"ontouchstart"in this}Tn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Nn=function(){var t,n,e,r,i=Sn,o=kn,a=An,c=jn,f={},h=Object(u.a)("start","drag","end"),y=0,b=0;function w(t){t.on("mousedown.drag",x).filter(c).on("touchstart.drag",T).on("touchmove.drag",S).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(){if(!r&&i.apply(this,arguments)){var a=A("mouse",o.apply(this,arguments),p,this,arguments);a&&(Object(l.a)(s.c.view).on("mousemove.drag",M,!0).on("mouseup.drag",E,!0),m(s.c.view),d(),e=!1,t=s.c.clientX,n=s.c.clientY,a("start"))}}function M(){if(v(),!e){var r=s.c.clientX-t,i=s.c.clientY-n;e=r*r+i*i>b}f.mouse("drag")}function E(){Object(l.a)(s.c.view).on("mousemove.drag mouseup.drag",null),g(s.c.view,e),v(),f.mouse("end")}function T(){if(i.apply(this,arguments)){var t,n,e=s.c.changedTouches,r=o.apply(this,arguments),a=e.length;for(t=0;t<a;++t)(n=A(e[t].identifier,r,_,this,arguments))&&(d(),n("start"))}}function S(){var t,n,e=s.c.changedTouches,r=e.length;for(t=0;t<r;++t)(n=f[e[t].identifier])&&(v(),n("drag"))}function k(){var t,n,e=s.c.changedTouches,i=e.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<i;++t)(n=f[e[t].identifier])&&(d(),n("end"))}function A(t,n,e,r,i){var o,u,c,l=e(n,t),p=h.copy();if(Object(s.a)(new Tn(w,"beforestart",o,t,y,l[0],l[1],0,0,p),function(){return null!=(s.c.subject=o=a.apply(r,i))&&(u=o.x-l[0]||0,c=o.y-l[1]||0,!0)}))return function a(h){var d,v=l;switch(h){case"start":f[t]=a,d=y++;break;case"end":delete f[t],--y;case"drag":l=e(n,t),d=y}Object(s.a)(new Tn(w,h,o,t,d,l[0]+u,l[1]+c,l[0]-v[0],l[1]-v[1],p),p.apply,p,[h,r,i])}}return w.filter=function(t){return arguments.length?(i="function"==typeof t?t:En(!!t),w):i},w.container=function(t){return arguments.length?(o="function"==typeof t?t:En(t),w):o},w.subject=function(t){return arguments.length?(a="function"==typeof t?t:En(t),w):a},w.touchable=function(t){return arguments.length?(c="function"==typeof t?t:En(!!t),w):c},w.on=function(){var t=h.on.apply(h,arguments);return t===h?w:t},w.clickDistance=function(t){return arguments.length?(b=(t=+t)*t,w):Math.sqrt(b)},w},On=function(t){return t};function Pn(t,n){t&&Cn.hasOwnProperty(t.type)&&Cn[t.type](t,n)}var Rn={Feature:function(t,n){Pn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Pn(e[r].geometry,n)}},Cn={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Fn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Fn(e[r],n,0)},Polygon:function(t,n){zn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)zn(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Pn(e[r],n)}};function Fn(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function zn(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Fn(t[e],n,1);n.polygonEnd()}var Ln=function(t,n){t&&Rn.hasOwnProperty(t.type)?Rn[t.type](t,n):Pn(t,n)},In=function(){return new Dn};function Dn(){this.reset()}Dn.prototype={constructor:Dn,reset:function(){this.s=this.t=0},add:function(t){Un(qn,t,this.t),Un(this,qn.s,this.s),this.s?this.t+=qn.t:this.s=qn.t},valueOf:function(){return this.s}};var qn=new Dn;function Un(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}var Hn=1e-6,Gn=Math.PI,Xn=Gn/2,Wn=Gn/4,Bn=2*Gn,Vn=180/Gn,Yn=Gn/180,Jn=Math.abs,Kn=Math.atan,$n=Math.atan2,Zn=Math.cos,Qn=Math.ceil,te=(Math.exp,Math.floor,Math.log,Math.pow,Math.sin),ne=Math.sign||function(t){return t>0?1:t<0?-1:0},ee=Math.sqrt;Math.tan;function re(t){return t>1?Xn:t<-1?-Xn:Math.asin(t)}function ie(){}var oe,ae,ue,ce,le=In(),se=In(),fe={point:ie,lineStart:ie,lineEnd:ie,polygonStart:function(){fe.lineStart=he,fe.lineEnd=ve},polygonEnd:function(){fe.lineStart=fe.lineEnd=fe.point=ie,le.add(Jn(se)),se.reset()},result:function(){var t=le/2;return le.reset(),t}};function he(){fe.point=pe}function pe(t,n){fe.point=de,oe=ue=t,ae=ce=n}function de(t,n){se.add(ce*t-ue*n),ue=t,ce=n}function ve(){de(oe,ae)}var me=fe,ge=1/0,ye=ge,be=-ge,we=be;var _e,xe,Me,Ee,Te={point:function(t,n){t<ge&&(ge=t);t>be&&(be=t);n<ye&&(ye=n);n>we&&(we=n)},lineStart:ie,lineEnd:ie,polygonStart:ie,polygonEnd:ie,result:function(){var t=[[ge,ye],[be,we]];return be=we=-(ye=ge=1/0),t}},Se=0,ke=0,Ae=0,je=0,Ne=0,Oe=0,Pe=0,Re=0,Ce=0,Fe={point:ze,lineStart:Le,lineEnd:qe,polygonStart:function(){Fe.lineStart=Ue,Fe.lineEnd=He},polygonEnd:function(){Fe.point=ze,Fe.lineStart=Le,Fe.lineEnd=qe},result:function(){var t=Ce?[Pe/Ce,Re/Ce]:Oe?[je/Oe,Ne/Oe]:Ae?[Se/Ae,ke/Ae]:[NaN,NaN];return Se=ke=Ae=je=Ne=Oe=Pe=Re=Ce=0,t}};function ze(t,n){Se+=t,ke+=n,++Ae}function Le(){Fe.point=Ie}function Ie(t,n){Fe.point=De,ze(Me=t,Ee=n)}function De(t,n){var e=t-Me,r=n-Ee,i=ee(e*e+r*r);je+=i*(Me+t)/2,Ne+=i*(Ee+n)/2,Oe+=i,ze(Me=t,Ee=n)}function qe(){Fe.point=ze}function Ue(){Fe.point=Ge}function He(){Xe(_e,xe)}function Ge(t,n){Fe.point=Xe,ze(_e=Me=t,xe=Ee=n)}function Xe(t,n){var e=t-Me,r=n-Ee,i=ee(e*e+r*r);je+=i*(Me+t)/2,Ne+=i*(Ee+n)/2,Oe+=i,Pe+=(i=Ee*t-Me*n)*(Me+t),Re+=i*(Ee+n),Ce+=3*i,ze(Me=t,Ee=n)}var We=Fe;function Be(t){this._context=t}Be.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Bn)}},result:ie};var Ve,Ye,Je,Ke,$e,Ze=In(),Qe={point:ie,lineStart:function(){Qe.point=tr},lineEnd:function(){Ve&&nr(Ye,Je),Qe.point=ie},polygonStart:function(){Ve=!0},polygonEnd:function(){Ve=null},result:function(){var t=+Ze;return Ze.reset(),t}};function tr(t,n){Qe.point=nr,Ye=Ke=t,Je=$e=n}function nr(t,n){Ke-=t,$e-=n,Ze.add(ee(Ke*Ke+$e*$e)),Ke=t,$e=n}var er=Qe;function rr(){this._string=[]}function ir(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}rr.prototype={_radius:4.5,_circle:ir(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=ir(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var or=function(t,n){var e,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),Ln(t,e(r))),r.result()}return o.area=function(t){return Ln(t,e(me)),me.result()},o.measure=function(t){return Ln(t,e(er)),er.result()},o.bounds=function(t){return Ln(t,e(Te)),Te.result()},o.centroid=function(t){return Ln(t,e(We)),We.result()},o.projection=function(n){return arguments.length?(e=null==n?(t=null,On):(t=n).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(n=null,new rr):new Be(n=t),"function"!=typeof i&&r.pointRadius(i),o):n},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(n)},ar=function(t){return"string"==typeof t?new x.a([document.querySelectorAll(t)],[document.documentElement]):new x.a([null==t?[]:t],x.c)},ur=function(t){return t},cr=function(t){if(null==t)return ur;var n,e,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,u){u||(n=e=0);var c=2,l=t.length,s=new Array(l);for(s[0]=(n+=t[0])*r+o,s[1]=(e+=t[1])*i+a;c<l;)s[c]=t[c],++c;return s}},lr=function(t,n){for(var e,r=t.length,i=r-n;i<--r;)e=t[i],t[i++]=t[r],t[r]=e},sr=function(t,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return fr(t,n)})}:fr(t,n)};function fr(t,n){var e=n.id,r=n.bbox,i=null==n.properties?{}:n.properties,o=hr(t,n);return null==e&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:e,properties:i,geometry:o}:{type:"Feature",id:e,bbox:r,properties:i,geometry:o}}function hr(t,n){var e=cr(t.transform),r=t.arcs;function i(t,n){n.length&&n.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)n.push(e(i[o],o));t<0&&lr(n,a)}function o(t){return e(t)}function a(t){for(var n=[],e=0,r=t.length;e<r;++e)i(t[e],n);return n.length<2&&n.push(n[0]),n}function u(t){for(var n=a(t);n.length<4;)n.push(n[0]);return n}function c(t){return t.map(u)}return function t(n){var e,r=n.type;switch(r){case"GeometryCollection":return{type:r,geometries:n.geometries.map(t)};case"Point":e=o(n.coordinates);break;case"MultiPoint":e=n.coordinates.map(o);break;case"LineString":e=a(n.arcs);break;case"MultiLineString":e=n.arcs.map(a);break;case"Polygon":e=c(n.arcs);break;case"MultiPolygon":e=n.arcs.map(c);break;default:return null}return{type:r,coordinates:e}}(n)}var pr=e(2),dr=function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o};function vr(t,n,e){var r=dr(t,n-Hn,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function mr(t,n,e){var r=dr(t,n-Hn,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function gr(){var t,n,e,r,i,o,a,u,c,l,s,f,h=10,p=h,d=90,v=360,m=2.5;function g(){return{type:"MultiLineString",coordinates:y()}}function y(){return dr(Qn(r/d)*d,e,d).map(s).concat(dr(Qn(u/v)*v,a,v).map(f)).concat(dr(Qn(n/h)*h,t,h).filter(function(t){return Jn(t%d)>Hn}).map(c)).concat(dr(Qn(o/p)*p,i,p).filter(function(t){return Jn(t%v)>Hn}).map(l))}return g.lines=function(){return y().map(function(t){return{type:"LineString",coordinates:t}})},g.outline=function(){return{type:"Polygon",coordinates:[s(r).concat(f(a).slice(1),s(e).reverse().slice(1),f(u).reverse().slice(1))]}},g.extent=function(t){return arguments.length?g.extentMajor(t).extentMinor(t):g.extentMinor()},g.extentMajor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],u=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),u>a&&(t=u,u=a,a=t),g.precision(m)):[[r,u],[e,a]]},g.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],n>t&&(e=n,n=t,t=e),o>i&&(e=o,o=i,i=e),g.precision(m)):[[n,o],[t,i]]},g.step=function(t){return arguments.length?g.stepMajor(t).stepMinor(t):g.stepMinor()},g.stepMajor=function(t){return arguments.length?(d=+t[0],v=+t[1],g):[d,v]},g.stepMinor=function(t){return arguments.length?(h=+t[0],p=+t[1],g):[h,p]},g.precision=function(h){return arguments.length?(m=+h,c=vr(o,i,90),l=mr(n,t,m),s=vr(u,a,90),f=mr(r,e,m),g):m},g.extentMajor([[-180,-90+Hn],[180,90-Hn]]).extentMinor([[-180,-80-Hn],[180,80+Hn]])}function yr(){}var br=function(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:yr,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}},wr=1e-6,_r=Math.PI,xr=_r/2,Mr=_r/4,Er=2*_r,Tr=180/_r,Sr=_r/180,kr=Math.abs,Ar=Math.atan,jr=Math.atan2,Nr=Math.cos,Or=(Math.ceil,Math.exp,Math.floor,Math.log,Math.pow,Math.sin),Pr=(Math.sign,Math.sqrt);Math.tan;function Rr(t){return t>1?xr:t<-1?-xr:Math.asin(t)}function Cr(t){return(t=Or(t/2))*t}var Fr=function(t,n){return kr(t[0]-n[0])<wr&&kr(t[1]-n[1])<wr};function zr(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}var Lr=function(t,n,e,r,i){var o,a,u=[],c=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(Fr(r,a)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else u.push(e=new zr(r,t,null,!0)),c.push(e.o=new zr(r,null,e,!1)),u.push(e=new zr(a,t,null,!1)),c.push(e.o=new zr(a,null,e,!0))}}),u.length){for(c.sort(n),Ir(u),Ir(c),o=0,a=c.length;o<a;++o)c[o].e=e=!e;for(var l,s,f=u[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((s=l[o])[0],s[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(l=h.p.z,o=l.length-1;o>=0;--o)i.point((s=l[o])[0],s[1]);else r(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}};function Ir(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}var Dr=function(){return new qr};function qr(){this.reset()}qr.prototype={constructor:qr,reset:function(){this.s=this.t=0},add:function(t){Hr(Ur,t,this.t),Hr(this,Ur.s,this.s),this.s?this.t+=Ur.t:this.s=Ur.t},valueOf:function(){return this.s}};var Ur=new qr;function Hr(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}function Gr(t){return[jr(t[1],t[0]),Rr(t[2])]}function Xr(t){var n=t[0],e=t[1],r=Nr(e);return[r*Nr(n),r*Or(n),Or(e)]}function Wr(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Br(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Vr(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Yr(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Jr(t){var n=Pr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var Kr=Dr(),$r=function(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);--i>=0;)for(n=(r=t[i]).length;--n>=0;)e[--a]=r[n];return e},Zr=function(t,n,e,r){return function(i){var o,a,u,c=n(i),l=br(),s=n(l),f=!1,h={point:p,lineStart:v,lineEnd:m,polygonStart:function(){h.point=g,h.lineStart=y,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=v,h.lineEnd=m,a=$r(a);var t=function(t,n){var e=n[0],r=n[1],i=Or(r),o=[Or(e),-Nr(e),0],a=0,u=0;Kr.reset(),1===i?r=xr+wr:-1===i&&(r=-xr-wr);for(var c=0,l=t.length;c<l;++c)if(f=(s=t[c]).length)for(var s,f,h=s[f-1],p=h[0],d=h[1]/2+Mr,v=Or(d),m=Nr(d),g=0;g<f;++g,p=b,v=_,m=x,h=y){var y=s[g],b=y[0],w=y[1]/2+Mr,_=Or(w),x=Nr(w),M=b-p,E=M>=0?1:-1,T=E*M,S=T>_r,k=v*_;if(Kr.add(jr(k*E*Or(T),m*x+k*Nr(T))),a+=S?M+E*Er:M,S^p>=e^b>=e){var A=Br(Xr(h),Xr(y));Jr(A);var j=Br(o,A);Jr(j);var N=(S^M>=0?-1:1)*Rr(j[2]);(r>N||r===N&&(A[0]||A[1]))&&(u+=S^M>=0?1:-1)}}return(a<-wr||a<wr&&Kr<-wr)^1&u}(o,r);a.length?(f||(i.polygonStart(),f=!0),Lr(a,ti,t,e,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(n,e){t(n,e)&&i.point(n,e)}function d(t,n){c.point(t,n)}function v(){h.point=d,c.lineStart()}function m(){h.point=p,c.lineEnd()}function g(t,n){u.push([t,n]),s.point(t,n)}function y(){s.lineStart(),u=[]}function b(){g(u[0][0],u[0][1]),s.lineEnd();var t,n,e,r,c=s.clean(),h=l.result(),p=h.length;if(u.pop(),o.push(u),u=null,p)if(1&c){if((n=(e=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else p>1&&2&c&&h.push(h.pop().concat(h.shift())),a.push(h.filter(Qr))}return h}};function Qr(t){return t.length>1}function ti(t,n){return((t=t.x)[0]<0?t[1]-xr-wr:xr-t[1])-((n=n.x)[0]<0?n[1]-xr-wr:xr-n[1])}var ni=Zr(function(){return!0},function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?_r:-_r,c=kr(o-e);kr(c-_r)<wr?(t.point(e,r=(r+a)/2>0?xr:-xr),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&c>=_r&&(kr(e-i)<wr&&(e-=i*wr),kr(o-u)<wr&&(o-=u*wr),r=function(t,n,e,r){var i,o,a=Or(t-e);return kr(a)>wr?Ar((Or(n)*(o=Nr(r))*Or(e)-Or(r)*(i=Nr(n))*Or(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}},function(t,n,e,r){var i;if(null==t)i=e*xr,r.point(-_r,i),r.point(0,i),r.point(_r,i),r.point(_r,0),r.point(_r,-i),r.point(0,-i),r.point(-_r,-i),r.point(-_r,0),r.point(-_r,i);else if(kr(t[0]-n[0])>wr){var o=t[0]<n[0]?_r:-_r;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])},[-_r,-xr]);var ei=function(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e};function ri(t,n){return[t>_r?t-Er:t<-_r?t+Er:t,n]}function ii(t,n,e){return(t%=Er)?n||e?ei(ai(t),ui(n,e)):ai(t):n||e?ui(n,e):ri}function oi(t){return function(n,e){return[(n+=t)>_r?n-Er:n<-_r?n+Er:n,e]}}function ai(t){var n=oi(t);return n.invert=oi(-t),n}function ui(t,n){var e=Nr(t),r=Or(t),i=Nr(n),o=Or(n);function a(t,n){var a=Nr(n),u=Nr(t)*a,c=Or(t)*a,l=Or(n),s=l*e+u*r;return[jr(c*i-s*o,u*e-l*r),Rr(s*i+c*o)]}return a.invert=function(t,n){var a=Nr(n),u=Nr(t)*a,c=Or(t)*a,l=Or(n),s=l*i-c*o;return[jr(c*i+l*o,u*e+s*r),Rr(s*e-u*r)]},a}ri.invert=ri;function ci(t,n,e,r,i,o){if(e){var a=Nr(n),u=Or(n),c=r*e;null==i?(i=n+r*Er,o=n-c/2):(i=li(a,i),o=li(a,o),(r>0?i<o:i>o)&&(i+=r*Er));for(var l,s=i;r>0?s>o:s<o;s-=c)l=Gr([a,-u*Nr(s),-u*Or(s)]),t.point(l[0],l[1])}}function li(t,n){(n=Xr(n))[0]-=t,Jr(n);var e=function(t){return t>1?0:t<-1?_r:Math.acos(t)}(-n[1]);return((-n[2]<0?-e:e)+Er-wr)%Er}var si=function(t){var n=Nr(t),e=6*Sr,r=n>0,i=kr(n)>wr;function o(t,e){return Nr(t)*Nr(e)>n}function a(t,e,r){var i=[1,0,0],o=Br(Xr(t),Xr(e)),a=Wr(o,o),u=o[0],c=a-u*u;if(!c)return!r&&t;var l=n*a/c,s=-n*u/c,f=Br(i,o),h=Yr(i,l);Vr(h,Yr(o,s));var p=f,d=Wr(h,p),v=Wr(p,p),m=d*d-v*(Wr(h,h)-1);if(!(m<0)){var g=Pr(m),y=Yr(p,(-d-g)/v);if(Vr(y,h),y=Gr(y),!r)return y;var b,w=t[0],_=e[0],x=t[1],M=e[1];_<w&&(b=w,w=_,_=b);var E=_-w,T=kr(E-_r)<wr;if(!T&&M<x&&(b=x,x=M,M=b),T||E<wr?T?x+M>0^y[1]<(kr(y[0]-w)<wr?x:M):x<=y[1]&&y[1]<=M:E>_r^(w<=y[0]&&y[0]<=_)){var S=Yr(p,(-d+g)/v);return Vr(S,h),[y,Gr(S)]}}}function u(n,e){var i=r?t:_r-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return Zr(o,function(t){var n,e,c,l,s;return{lineStart:function(){l=c=!1,s=1},point:function(f,h){var p,d=[f,h],v=o(f,h),m=r?v?0:u(f,h):v?u(f+(f<0?_r:-_r),h):0;if(!n&&(l=c=v)&&t.lineStart(),v!==c&&(!(p=a(n,d))||Fr(n,p)||Fr(d,p))&&(d[0]+=wr,d[1]+=wr,v=o(d[0],d[1])),v!==c)s=0,v?(t.lineStart(),p=a(d,n),t.point(p[0],p[1])):(p=a(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(i&&n&&r^v){var g;m&e||!(g=a(d,n,!0))||(s=0,r?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!v||n&&Fr(n,d)||t.point(d[0],d[1]),n=d,c=v,e=m},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return s|(l&&c)<<1}}},function(n,r,i,o){ci(o,t,e,i,n,r)},r?[0,-t]:[-_r,t-_r])},fi=function(t,n,e,r,i,o){var a,u=t[0],c=t[1],l=0,s=1,f=n[0]-u,h=n[1]-c;if(a=e-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<s&&(s=a)}else if(f>0){if(a>s)return;a>l&&(l=a)}if(a=i-u,f||!(a<0)){if(a/=f,f<0){if(a>s)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<s&&(s=a)}if(a=r-c,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<s&&(s=a)}else if(h>0){if(a>s)return;a>l&&(l=a)}if(a=o-c,h||!(a<0)){if(a/=h,h<0){if(a>s)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<s&&(s=a)}return l>0&&(t[0]=u+l*f,t[1]=c+l*h),s<1&&(n[0]=u+s*f,n[1]=c+s*h),!0}}}}},hi=1e9,pi=-hi;function di(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,u,l){var s=0,f=0;if(null==i||(s=a(i,u))!==(f=a(o,u))||c(i,o)<0^u>0)do{l.point(0===s||3===s?t:e,s>1?r:n)}while((s=(s+u+4)%4)!==f);else l.point(o[0],o[1])}function a(r,i){return kr(r[0]-t)<wr?i>0?0:3:kr(r[0]-e)<wr?i>0?2:1:kr(r[1]-n)<wr?i>0?1:0:i>0?3:2}function u(t,n){return c(t.x,n.x)}function c(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var c,l,s,f,h,p,d,v,m,g,y,b=a,w=br(),_={point:x,lineStart:function(){_.point=M,l&&l.push(s=[]);g=!0,m=!1,d=v=NaN},lineEnd:function(){c&&(M(f,h),p&&m&&w.rejoin(),c.push(w.result()));_.point=x,m&&b.lineEnd()},polygonStart:function(){b=w,c=[],l=[],y=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=l.length;e<i;++e)for(var o,a,u=l[e],c=1,s=u.length,f=u[0],h=f[0],p=f[1];c<s;++c)o=h,a=p,f=u[c],h=f[0],p=f[1],a<=r?p>r&&(h-o)*(r-a)>(p-a)*(t-o)&&++n:p<=r&&(h-o)*(r-a)<(p-a)*(t-o)&&--n;return n}(),e=y&&n,i=(c=$r(c)).length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Lr(c,u,n,o,a),a.polygonEnd());b=a,c=l=s=null}};function x(t,n){i(t,n)&&b.point(t,n)}function M(o,a){var u=i(o,a);if(l&&s.push([o,a]),g)f=o,h=a,p=u,g=!1,u&&(b.lineStart(),b.point(o,a));else if(u&&m)b.point(o,a);else{var c=[d=Math.max(pi,Math.min(hi,d)),v=Math.max(pi,Math.min(hi,v))],w=[o=Math.max(pi,Math.min(hi,o)),a=Math.max(pi,Math.min(hi,a))];fi(c,w,t,n,e,r)?(m||(b.lineStart(),b.point(c[0],c[1])),b.point(w[0],w[1]),u||b.lineEnd(),y=!1):u&&(b.lineStart(),b.point(o,a),y=!1)}d=o,v=a,m=u}return _}}var vi=function(t){return t};function mi(t){return function(n){var e=new gi;for(var r in t)e[r]=t[r];return e.stream=n,e}}function gi(){}function yi(t,n){t&&wi.hasOwnProperty(t.type)&&wi[t.type](t,n)}gi.prototype={constructor:gi,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var bi={Feature:function(t,n){yi(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)yi(e[r].geometry,n)}},wi={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){_i(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)_i(e[r],n,0)},Polygon:function(t,n){xi(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)xi(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)yi(e[r],n)}};function _i(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function xi(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)_i(t[e],n,1);n.polygonEnd()}var Mi=function(t,n){t&&bi.hasOwnProperty(t.type)?bi[t.type](t,n):yi(t,n)},Ei=1/0,Ti=Ei,Si=-Ei,ki=Si;var Ai={point:function(t,n){t<Ei&&(Ei=t);t>Si&&(Si=t);n<Ti&&(Ti=n);n>ki&&(ki=n)},lineStart:yr,lineEnd:yr,polygonStart:yr,polygonEnd:yr,result:function(){var t=[[Ei,Ti],[Si,ki]];return Si=ki=-(Ti=Ei=1/0),t}};function ji(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Mi(e,t.stream(Ai)),n(Ai.result()),null!=r&&t.clipExtent(r),t}function Ni(t,n,e){return ji(t,function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,u])},e)}var Oi=16,Pi=Nr(30*Sr),Ri=function(t,n){return+n?function(t,n){function e(r,i,o,a,u,c,l,s,f,h,p,d,v,m){var g=l-r,y=s-i,b=g*g+y*y;if(b>4*n&&v--){var w=a+h,_=u+p,x=c+d,M=Pr(w*w+_*_+x*x),E=Rr(x/=M),T=kr(kr(x)-1)<wr||kr(o-f)<wr?(o+f)/2:jr(_,w),S=t(T,E),k=S[0],A=S[1],j=k-r,N=A-i,O=y*j-g*N;(O*O/b>n||kr((g*j+y*N)/b-.5)>.3||a*h+u*p+c*d<Pi)&&(e(r,i,o,a,u,c,k,A,T,w/=M,_/=M,x,v,m),m.point(k,A),e(k,A,T,w,_,x,l,s,f,h,p,d,v,m))}}return function(n){var r,i,o,a,u,c,l,s,f,h,p,d,v={point:m,lineStart:g,lineEnd:b,polygonStart:function(){n.polygonStart(),v.lineStart=w},polygonEnd:function(){n.polygonEnd(),v.lineStart=g}};function m(e,r){e=t(e,r),n.point(e[0],e[1])}function g(){s=NaN,v.point=y,n.lineStart()}function y(r,i){var o=Xr([r,i]),a=t(r,i);e(s,f,l,h,p,d,s=a[0],f=a[1],l=r,h=o[0],p=o[1],d=o[2],Oi,n),n.point(s,f)}function b(){v.point=m,n.lineEnd()}function w(){g(),v.point=_,v.lineEnd=x}function _(t,n){y(r=t,n),i=s,o=f,a=h,u=p,c=d,v.point=y}function x(){e(s,f,l,h,p,d,i,o,r,a,u,c,Oi,n),v.lineEnd=b,b()}return v}}(t,n):function(t){return mi({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)};var Ci=mi({point:function(t,n){this.stream.point(t*Sr,n*Sr)}});function Fi(t,n,e,r){var i=Nr(r),o=Or(r),a=i*t,u=o*t,c=i/t,l=o/t,s=(o*e-i*n)/t,f=(o*n+i*e)/t;function h(t,r){return[a*t-u*r+n,e-u*t-a*r]}return h.invert=function(t,n){return[c*t-l*n+s,f-l*t-c*n]},h}function zi(t){return function(t){var n,e,r,i,o,a,u,c,l,s,f=150,h=480,p=250,d=0,v=0,m=0,g=0,y=0,b=0,w=null,_=ni,x=null,M=vi,E=.5;function T(t){return c(t[0]*Sr,t[1]*Sr)}function S(t){return(t=c.invert(t[0],t[1]))&&[t[0]*Tr,t[1]*Tr]}function k(){var t=Fi(f,0,0,b).apply(null,n(d,v)),r=(b?Fi:function(t,n,e){function r(r,i){return[n+t*r,e-t*i]}return r.invert=function(r,i){return[(r-n)/t,(e-i)/t]},r})(f,h-t[0],p-t[1],b);return e=ii(m,g,y),u=ei(n,r),c=ei(e,u),a=Ri(u,E),A()}function A(){return l=s=null,T}return T.stream=function(t){return l&&s===t?l:l=Ci(function(t){return mi({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(_(a(M(s=t)))))},T.preclip=function(t){return arguments.length?(_=t,w=void 0,A()):_},T.postclip=function(t){return arguments.length?(M=t,x=r=i=o=null,A()):M},T.clipAngle=function(t){return arguments.length?(_=+t?si(w=t*Sr):(w=null,ni),A()):w*Tr},T.clipExtent=function(t){return arguments.length?(M=null==t?(x=r=i=o=null,vi):di(x=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),A()):null==x?null:[[x,r],[i,o]]},T.scale=function(t){return arguments.length?(f=+t,k()):f},T.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],k()):[h,p]},T.center=function(t){return arguments.length?(d=t[0]%360*Sr,v=t[1]%360*Sr,k()):[d*Tr,v*Tr]},T.rotate=function(t){return arguments.length?(m=t[0]%360*Sr,g=t[1]%360*Sr,y=t.length>2?t[2]%360*Sr:0,k()):[m*Tr,g*Tr,y*Tr]},T.angle=function(t){return arguments.length?(b=t%360*Sr,k()):b*Tr},T.precision=function(t){return arguments.length?(a=Ri(u,E=t*t),A()):Pr(E)},T.fitExtent=function(t,n){return Ni(T,t,n)},T.fitSize=function(t,n){return function(t,n,e){return Ni(t,[[0,0],n],e)}(T,t,n)},T.fitWidth=function(t,n){return function(t,n,e){return ji(t,function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])},e)}(T,t,n)},T.fitHeight=function(t,n){return function(t,n,e){return ji(t,function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])},e)}(T,t,n)},function(){return n=t.apply(this,arguments),T.invert=n.invert&&S,k()}}(function(){return t})()}var Li=Math.abs,Ii=(Math.atan,Math.atan2),Di=(Math.ceil,Math.cos),qi=(Math.exp,Math.floor,Math.log,Math.max),Ui=Math.min,Hi=(Math.pow,Math.round,Math.sign,Math.sin),Gi=(Math.tan,1e-6),Xi=Math.PI,Wi=Xi/2,Bi=(Math.SQRT1_2,$i(2)),Vi=($i(Xi),180/Xi),Yi=Xi/180;function Ji(t){return t>1?Wi:t<-1?-Wi:Math.asin(t)}function Ki(t){return t>1?0:t<-1?Xi:Math.acos(t)}function $i(t){return t>0?Math.sqrt(t):0}var Zi=function(t,n,e){function r(r,i){return[t*r*Di(i=function(t,n){var e,r=t*Hi(n),i=30;do{n-=e=(n+Hi(n)-r)/(1+Di(n))}while(Li(e)>Gi&&--i>0);return n/2}(e,i)),n*Hi(i)]}return r.invert=function(r,i){return i=Ji(i/n),[r/(t*Di(i)),Ji((2*i+Hi(2*i))/e)]},r}(Bi/Wi,Bi,Xi),Qi=function(){return zi(Zi).scale(169.529)},to=function(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:ie,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}},no=function(t,n){return Jn(t[0]-n[0])<Hn&&Jn(t[1]-n[1])<Hn};function eo(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}var ro=function(t,n,e,r,i){var o,a,u=[],c=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(no(r,a)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else u.push(e=new eo(r,t,null,!0)),c.push(e.o=new eo(r,null,e,!1)),u.push(e=new eo(a,t,null,!1)),c.push(e.o=new eo(a,null,e,!0))}}),u.length){for(c.sort(n),io(u),io(c),o=0,a=c.length;o<a;++o)c[o].e=e=!e;for(var l,s,f=u[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((s=l[o])[0],s[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(l=h.p.z,o=l.length-1;o>=0;--o)i.point((s=l[o])[0],s[1]);else r(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}};function io(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function oo(t){return[$n(t[1],t[0]),re(t[2])]}function ao(t){var n=t[0],e=t[1],r=Zn(e);return[r*Zn(n),r*te(n),te(e)]}function uo(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function co(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function lo(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function so(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function fo(t){var n=ee(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var ho=In(),po=function(t,n,e,r){return function(i){var o,a,u,c=n(i),l=to(),s=n(l),f=!1,h={point:p,lineStart:v,lineEnd:m,polygonStart:function(){h.point=g,h.lineStart=y,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=v,h.lineEnd=m,a=$r(a);var t=function(t,n){var e=n[0],r=n[1],i=te(r),o=[te(e),-Zn(e),0],a=0,u=0;ho.reset(),1===i?r=Xn+Hn:-1===i&&(r=-Xn-Hn);for(var c=0,l=t.length;c<l;++c)if(f=(s=t[c]).length)for(var s,f,h=s[f-1],p=h[0],d=h[1]/2+Wn,v=te(d),m=Zn(d),g=0;g<f;++g,p=b,v=_,m=x,h=y){var y=s[g],b=y[0],w=y[1]/2+Wn,_=te(w),x=Zn(w),M=b-p,E=M>=0?1:-1,T=E*M,S=T>Gn,k=v*_;if(ho.add($n(k*E*te(T),m*x+k*Zn(T))),a+=S?M+E*Bn:M,S^p>=e^b>=e){var A=co(ao(h),ao(y));fo(A);var j=co(o,A);fo(j);var N=(S^M>=0?-1:1)*re(j[2]);(r>N||r===N&&(A[0]||A[1]))&&(u+=S^M>=0?1:-1)}}return(a<-Hn||a<Hn&&ho<-Hn)^1&u}(o,r);a.length?(f||(i.polygonStart(),f=!0),ro(a,mo,t,e,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(n,e){t(n,e)&&i.point(n,e)}function d(t,n){c.point(t,n)}function v(){h.point=d,c.lineStart()}function m(){h.point=p,c.lineEnd()}function g(t,n){u.push([t,n]),s.point(t,n)}function y(){s.lineStart(),u=[]}function b(){g(u[0][0],u[0][1]),s.lineEnd();var t,n,e,r,c=s.clean(),h=l.result(),p=h.length;if(u.pop(),o.push(u),u=null,p)if(1&c){if((n=(e=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else p>1&&2&c&&h.push(h.pop().concat(h.shift())),a.push(h.filter(vo))}return h}};function vo(t){return t.length>1}function mo(t,n){return((t=t.x)[0]<0?t[1]-Xn-Hn:Xn-t[1])-((n=n.x)[0]<0?n[1]-Xn-Hn:Xn-n[1])}var go=po(function(){return!0},function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?Gn:-Gn,c=Jn(o-e);Jn(c-Gn)<Hn?(t.point(e,r=(r+a)/2>0?Xn:-Xn),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&c>=Gn&&(Jn(e-i)<Hn&&(e-=i*Hn),Jn(o-u)<Hn&&(o-=u*Hn),r=function(t,n,e,r){var i,o,a=te(t-e);return Jn(a)>Hn?Kn((te(n)*(o=Zn(r))*te(e)-te(r)*(i=Zn(n))*te(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}},function(t,n,e,r){var i;if(null==t)i=e*Xn,r.point(-Gn,i),r.point(0,i),r.point(Gn,i),r.point(Gn,0),r.point(Gn,-i),r.point(0,-i),r.point(-Gn,-i),r.point(-Gn,0),r.point(-Gn,i);else if(Jn(t[0]-n[0])>Hn){var o=t[0]<n[0]?Gn:-Gn;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])},[-Gn,-Xn]);var yo=function(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e};function bo(t,n){return[t>Gn?t-Bn:t<-Gn?t+Bn:t,n]}function wo(t,n,e){return(t%=Bn)?n||e?yo(xo(t),Mo(n,e)):xo(t):n||e?Mo(n,e):bo}function _o(t){return function(n,e){return[(n+=t)>Gn?n-Bn:n<-Gn?n+Bn:n,e]}}function xo(t){var n=_o(t);return n.invert=_o(-t),n}function Mo(t,n){var e=Zn(t),r=te(t),i=Zn(n),o=te(n);function a(t,n){var a=Zn(n),u=Zn(t)*a,c=te(t)*a,l=te(n),s=l*e+u*r;return[$n(c*i-s*o,u*e-l*r),re(s*i+c*o)]}return a.invert=function(t,n){var a=Zn(n),u=Zn(t)*a,c=te(t)*a,l=te(n),s=l*i-c*o;return[$n(c*i+l*o,u*e+s*r),re(s*e-u*r)]},a}bo.invert=bo;function Eo(t,n,e,r,i,o){if(e){var a=Zn(n),u=te(n),c=r*e;null==i?(i=n+r*Bn,o=n-c/2):(i=To(a,i),o=To(a,o),(r>0?i<o:i>o)&&(i+=r*Bn));for(var l,s=i;r>0?s>o:s<o;s-=c)l=oo([a,-u*Zn(s),-u*te(s)]),t.point(l[0],l[1])}}function To(t,n){(n=ao(n))[0]-=t,fo(n);var e=function(t){return t>1?0:t<-1?Gn:Math.acos(t)}(-n[1]);return((-n[2]<0?-e:e)+Bn-Hn)%Bn}var So=function(t){var n=Zn(t),e=6*Yn,r=n>0,i=Jn(n)>Hn;function o(t,e){return Zn(t)*Zn(e)>n}function a(t,e,r){var i=[1,0,0],o=co(ao(t),ao(e)),a=uo(o,o),u=o[0],c=a-u*u;if(!c)return!r&&t;var l=n*a/c,s=-n*u/c,f=co(i,o),h=so(i,l);lo(h,so(o,s));var p=f,d=uo(h,p),v=uo(p,p),m=d*d-v*(uo(h,h)-1);if(!(m<0)){var g=ee(m),y=so(p,(-d-g)/v);if(lo(y,h),y=oo(y),!r)return y;var b,w=t[0],_=e[0],x=t[1],M=e[1];_<w&&(b=w,w=_,_=b);var E=_-w,T=Jn(E-Gn)<Hn;if(!T&&M<x&&(b=x,x=M,M=b),T||E<Hn?T?x+M>0^y[1]<(Jn(y[0]-w)<Hn?x:M):x<=y[1]&&y[1]<=M:E>Gn^(w<=y[0]&&y[0]<=_)){var S=so(p,(-d+g)/v);return lo(S,h),[y,oo(S)]}}}function u(n,e){var i=r?t:Gn-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return po(o,function(t){var n,e,c,l,s;return{lineStart:function(){l=c=!1,s=1},point:function(f,h){var p,d=[f,h],v=o(f,h),m=r?v?0:u(f,h):v?u(f+(f<0?Gn:-Gn),h):0;if(!n&&(l=c=v)&&t.lineStart(),v!==c&&(!(p=a(n,d))||no(n,p)||no(d,p))&&(d[0]+=Hn,d[1]+=Hn,v=o(d[0],d[1])),v!==c)s=0,v?(t.lineStart(),p=a(d,n),t.point(p[0],p[1])):(p=a(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(i&&n&&r^v){var g;m&e||!(g=a(d,n,!0))||(s=0,r?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!v||n&&no(n,d)||t.point(d[0],d[1]),n=d,c=v,e=m},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return s|(l&&c)<<1}}},function(n,r,i,o){Eo(o,t,e,i,n,r)},r?[0,-t]:[-Gn,t-Gn])},ko=function(t,n,e,r,i,o){var a,u=t[0],c=t[1],l=0,s=1,f=n[0]-u,h=n[1]-c;if(a=e-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<s&&(s=a)}else if(f>0){if(a>s)return;a>l&&(l=a)}if(a=i-u,f||!(a<0)){if(a/=f,f<0){if(a>s)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<s&&(s=a)}if(a=r-c,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<s&&(s=a)}else if(h>0){if(a>s)return;a>l&&(l=a)}if(a=o-c,h||!(a<0)){if(a/=h,h<0){if(a>s)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<s&&(s=a)}return l>0&&(t[0]=u+l*f,t[1]=c+l*h),s<1&&(n[0]=u+s*f,n[1]=c+s*h),!0}}}}},Ao=1e9,jo=-Ao;function No(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,u,l){var s=0,f=0;if(null==i||(s=a(i,u))!==(f=a(o,u))||c(i,o)<0^u>0)do{l.point(0===s||3===s?t:e,s>1?r:n)}while((s=(s+u+4)%4)!==f);else l.point(o[0],o[1])}function a(r,i){return Jn(r[0]-t)<Hn?i>0?0:3:Jn(r[0]-e)<Hn?i>0?2:1:Jn(r[1]-n)<Hn?i>0?1:0:i>0?3:2}function u(t,n){return c(t.x,n.x)}function c(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var c,l,s,f,h,p,d,v,m,g,y,b=a,w=to(),_={point:x,lineStart:function(){_.point=M,l&&l.push(s=[]);g=!0,m=!1,d=v=NaN},lineEnd:function(){c&&(M(f,h),p&&m&&w.rejoin(),c.push(w.result()));_.point=x,m&&b.lineEnd()},polygonStart:function(){b=w,c=[],l=[],y=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=l.length;e<i;++e)for(var o,a,u=l[e],c=1,s=u.length,f=u[0],h=f[0],p=f[1];c<s;++c)o=h,a=p,f=u[c],h=f[0],p=f[1],a<=r?p>r&&(h-o)*(r-a)>(p-a)*(t-o)&&++n:p<=r&&(h-o)*(r-a)<(p-a)*(t-o)&&--n;return n}(),e=y&&n,i=(c=$r(c)).length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&ro(c,u,n,o,a),a.polygonEnd());b=a,c=l=s=null}};function x(t,n){i(t,n)&&b.point(t,n)}function M(o,a){var u=i(o,a);if(l&&s.push([o,a]),g)f=o,h=a,p=u,g=!1,u&&(b.lineStart(),b.point(o,a));else if(u&&m)b.point(o,a);else{var c=[d=Math.max(jo,Math.min(Ao,d)),v=Math.max(jo,Math.min(Ao,v))],w=[o=Math.max(jo,Math.min(Ao,o)),a=Math.max(jo,Math.min(Ao,a))];ko(c,w,t,n,e,r)?(m||(b.lineStart(),b.point(c[0],c[1])),b.point(w[0],w[1]),u||b.lineEnd(),y=!1):u&&(b.lineStart(),b.point(o,a),y=!1)}d=o,v=a,m=u}return _}}function Oo(t){return function(n){var e=new Po;for(var r in t)e[r]=t[r];return e.stream=n,e}}function Po(){}function Ro(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Ln(e,t.stream(Te)),n(Te.result()),null!=r&&t.clipExtent(r),t}function Co(t,n,e){return Ro(t,function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,u])},e)}Po.prototype={constructor:Po,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Fo=16,zo=Zn(30*Yn),Lo=function(t,n){return+n?function(t,n){function e(r,i,o,a,u,c,l,s,f,h,p,d,v,m){var g=l-r,y=s-i,b=g*g+y*y;if(b>4*n&&v--){var w=a+h,_=u+p,x=c+d,M=ee(w*w+_*_+x*x),E=re(x/=M),T=Jn(Jn(x)-1)<Hn||Jn(o-f)<Hn?(o+f)/2:$n(_,w),S=t(T,E),k=S[0],A=S[1],j=k-r,N=A-i,O=y*j-g*N;(O*O/b>n||Jn((g*j+y*N)/b-.5)>.3||a*h+u*p+c*d<zo)&&(e(r,i,o,a,u,c,k,A,T,w/=M,_/=M,x,v,m),m.point(k,A),e(k,A,T,w,_,x,l,s,f,h,p,d,v,m))}}return function(n){var r,i,o,a,u,c,l,s,f,h,p,d,v={point:m,lineStart:g,lineEnd:b,polygonStart:function(){n.polygonStart(),v.lineStart=w},polygonEnd:function(){n.polygonEnd(),v.lineStart=g}};function m(e,r){e=t(e,r),n.point(e[0],e[1])}function g(){s=NaN,v.point=y,n.lineStart()}function y(r,i){var o=ao([r,i]),a=t(r,i);e(s,f,l,h,p,d,s=a[0],f=a[1],l=r,h=o[0],p=o[1],d=o[2],Fo,n),n.point(s,f)}function b(){v.point=m,n.lineEnd()}function w(){g(),v.point=_,v.lineEnd=x}function _(t,n){y(r=t,n),i=s,o=f,a=h,u=p,c=d,v.point=y}function x(){e(s,f,l,h,p,d,i,o,r,a,u,c,Fo,n),v.lineEnd=b,b()}return v}}(t,n):function(t){return Oo({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)};var Io=Oo({point:function(t,n){this.stream.point(t*Yn,n*Yn)}});function Do(t,n,e,r){var i=Zn(r),o=te(r),a=i*t,u=o*t,c=i/t,l=o/t,s=(o*e-i*n)/t,f=(o*n+i*e)/t;function h(t,r){return[a*t-u*r+n,e-u*t-a*r]}return h.invert=function(t,n){return[c*t-l*n+s,f-l*t-c*n]},h}function qo(t){return Uo(function(){return t})()}function Uo(t){var n,e,r,i,o,a,u,c,l,s,f=150,h=480,p=250,d=0,v=0,m=0,g=0,y=0,b=0,w=null,_=go,x=null,M=On,E=.5;function T(t){return c(t[0]*Yn,t[1]*Yn)}function S(t){return(t=c.invert(t[0],t[1]))&&[t[0]*Vn,t[1]*Vn]}function k(){var t=Do(f,0,0,b).apply(null,n(d,v)),r=(b?Do:function(t,n,e){function r(r,i){return[n+t*r,e-t*i]}return r.invert=function(r,i){return[(r-n)/t,(e-i)/t]},r})(f,h-t[0],p-t[1],b);return e=wo(m,g,y),u=yo(n,r),c=yo(e,u),a=Lo(u,E),A()}function A(){return l=s=null,T}return T.stream=function(t){return l&&s===t?l:l=Io(function(t){return Oo({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(_(a(M(s=t)))))},T.preclip=function(t){return arguments.length?(_=t,w=void 0,A()):_},T.postclip=function(t){return arguments.length?(M=t,x=r=i=o=null,A()):M},T.clipAngle=function(t){return arguments.length?(_=+t?So(w=t*Yn):(w=null,go),A()):w*Vn},T.clipExtent=function(t){return arguments.length?(M=null==t?(x=r=i=o=null,On):No(x=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),A()):null==x?null:[[x,r],[i,o]]},T.scale=function(t){return arguments.length?(f=+t,k()):f},T.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],k()):[h,p]},T.center=function(t){return arguments.length?(d=t[0]%360*Yn,v=t[1]%360*Yn,k()):[d*Vn,v*Vn]},T.rotate=function(t){return arguments.length?(m=t[0]%360*Yn,g=t[1]%360*Yn,y=t.length>2?t[2]%360*Yn:0,k()):[m*Vn,g*Vn,y*Vn]},T.angle=function(t){return arguments.length?(b=t%360*Yn,k()):b*Vn},T.precision=function(t){return arguments.length?(a=Lo(u,E=t*t),A()):ee(E)},T.fitExtent=function(t,n){return Co(T,t,n)},T.fitSize=function(t,n){return function(t,n,e){return Co(t,[[0,0],n],e)}(T,t,n)},T.fitWidth=function(t,n){return function(t,n,e){return Ro(t,function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])},e)}(T,t,n)},T.fitHeight=function(t,n){return function(t,n,e){return Ro(t,function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])},e)}(T,t,n)},function(){return n=t.apply(this,arguments),T.invert=n.invert&&S,k()}}function Ho(t,n){return[t,n]}Ho.invert=Ho;var Go=function(){return qo(Ho).scale(152.63)};function Xo(t,n){var e=Zn(t),r=t===n?te(t):(e-Zn(n))/(n-t),i=e/r+t;if(Jn(r)<Hn)return Ho;function o(t,n){var e=i-n,o=r*t;return[e*te(o),i-e*Zn(o)]}return o.invert=function(t,n){var e=i-n;return[$n(t,Jn(e))/r*ne(e),i-ne(r)*ee(t*t+e*e)]},o}var Wo=function(){return function(t){var n=0,e=Gn/3,r=Uo(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*Yn,e=t[1]*Yn):[n*Vn,e*Vn]},i}(Xo).scale(131.154).center([0,13.9389])};function Bo(t){return function(n,e){var r=ee(n*n+e*e),i=t(r),o=te(i),a=Zn(i);return[$n(n*o,r*a),re(r&&e*o/r)]}}function Vo(t,n){return[Zn(n)*te(t),te(n)]}Vo.invert=Bo(re);var Yo=function(){return qo(Vo).scale(249.5).clipAngle(90+Hn)},Jo=1.0148,Ko=.23185,$o=-.14499,Zo=.02406,Qo=Jo,ta=5*Ko,na=7*$o,ea=9*Zo;function ra(t,n){var e=n*n;return[t,n*(Jo+e*e*(Ko+e*($o+Zo*e)))]}ra.invert=function(t,n){n>1.790857183?n=1.790857183:n<-1.790857183&&(n=-1.790857183);var e,r=n;do{var i=r*r;r-=e=(r*(Jo+i*i*(Ko+i*($o+Zo*i)))-n)/(Qo+i*i*(ta+i*(na+ea*i)))}while(Li(e)>Gi);return[t,r]};var ia=function(){return zi(ra).scale(139.319)};function oa(t,n){var e=Zn(n),r=1+Zn(t)*e;return[e*te(t)/r,te(n)/r]}oa.invert=Bo(function(t){return 2*Kn(t)});var aa,ua,ca,la,sa,fa,ha,pa,da,va,ma,ga,ya,ba,wa,_a,xa=function(){return qo(oa).scale(250).clipAngle(142)},Ma={sphere:yr,point:Ea,lineStart:Sa,lineEnd:ja,polygonStart:function(){Ma.lineStart=Na,Ma.lineEnd=Oa},polygonEnd:function(){Ma.lineStart=Sa,Ma.lineEnd=ja}};function Ea(t,n){t*=Sr;var e=Nr(n*=Sr);Ta(e*Nr(t),e*Or(t),Or(n))}function Ta(t,n,e){ca+=(t-ca)/++aa,la+=(n-la)/aa,sa+=(e-sa)/aa}function Sa(){Ma.point=ka}function ka(t,n){t*=Sr;var e=Nr(n*=Sr);ba=e*Nr(t),wa=e*Or(t),_a=Or(n),Ma.point=Aa,Ta(ba,wa,_a)}function Aa(t,n){t*=Sr;var e=Nr(n*=Sr),r=e*Nr(t),i=e*Or(t),o=Or(n),a=jr(Pr((a=wa*o-_a*i)*a+(a=_a*r-ba*o)*a+(a=ba*i-wa*r)*a),ba*r+wa*i+_a*o);ua+=a,fa+=a*(ba+(ba=r)),ha+=a*(wa+(wa=i)),pa+=a*(_a+(_a=o)),Ta(ba,wa,_a)}function ja(){Ma.point=Ea}function Na(){Ma.point=Pa}function Oa(){Ra(ga,ya),Ma.point=Ea}function Pa(t,n){ga=t,ya=n,t*=Sr,n*=Sr,Ma.point=Ra;var e=Nr(n);ba=e*Nr(t),wa=e*Or(t),_a=Or(n),Ta(ba,wa,_a)}function Ra(t,n){t*=Sr;var e=Nr(n*=Sr),r=e*Nr(t),i=e*Or(t),o=Or(n),a=wa*o-_a*i,u=_a*r-ba*o,c=ba*i-wa*r,l=Pr(a*a+u*u+c*c),s=Rr(l),f=l&&-s/l;da+=f*a,va+=f*u,ma+=f*c,ua+=s,fa+=s*(ba+(ba=r)),ha+=s*(wa+(wa=i)),pa+=s*(_a+(_a=o)),Ta(ba,wa,_a)}var Ca=function(t){aa=ua=ca=la=sa=fa=ha=pa=da=va=ma=0,Mi(t,Ma);var n=da,e=va,r=ma,i=n*n+e*e+r*r;return i<1e-12&&(n=fa,e=ha,r=pa,ua<wr&&(n=ca,e=la,r=sa),(i=n*n+e*e+r*r)<1e-12)?[NaN,NaN]:[jr(e,n)*Tr,Rr(r/Pr(i))*Tr]};function Fa(t,n){var e=Nr(n),r=Nr(t)*e;return[e*Or(t)/r,Or(n)/r]}Fa.invert=function(t){return function(n,e){var r=Pr(n*n+e*e),i=t(r),o=Or(i),a=Nr(i);return[jr(n*o,r*a),Rr(r&&e*o/r)]}}(Ar);var za,La,Ia,Da,qa,Ua=Dr(),Ha=Dr(),Ga={point:yr,lineStart:yr,lineEnd:yr,polygonStart:function(){Ua.reset(),Ga.lineStart=Xa,Ga.lineEnd=Wa},polygonEnd:function(){var t=+Ua;Ha.add(t<0?Er+t:t),this.lineStart=this.lineEnd=this.point=yr},sphere:function(){Ha.add(Er)}};function Xa(){Ga.point=Ba}function Wa(){Va(za,La)}function Ba(t,n){Ga.point=Va,za=t,La=n,Ia=t*=Sr,Da=Nr(n=(n*=Sr)/2+Mr),qa=Or(n)}function Va(t,n){n=(n*=Sr)/2+Mr;var e=(t*=Sr)-Ia,r=e>=0?1:-1,i=r*e,o=Nr(n),a=Or(n),u=qa*a,c=Da*o+u*Nr(i),l=u*r*Or(i);Ua.add(jr(l,c)),Ia=t,Da=o,qa=a}var Ya,Ja,Ka,$a,Za,Qa,tu,nu,eu,ru,iu=Dr(),ou={point:au,lineStart:cu,lineEnd:lu,polygonStart:function(){ou.point=su,ou.lineStart=fu,ou.lineEnd=hu,iu.reset(),Ga.polygonStart()},polygonEnd:function(){Ga.polygonEnd(),ou.point=au,ou.lineStart=cu,ou.lineEnd=lu,Ua<0?(Ya=-(Ka=180),Ja=-($a=90)):iu>wr?$a=90:iu<-wr&&(Ja=-90),ru[0]=Ya,ru[1]=Ka}};function au(t,n){eu.push(ru=[Ya=t,Ka=t]),n<Ja&&(Ja=n),n>$a&&($a=n)}function uu(t,n){var e=Xr([t*Sr,n*Sr]);if(nu){var r=Br(nu,e),i=Br([r[1],-r[0],0],r);Jr(i),i=Gr(i);var o,a=t-Za,u=a>0?1:-1,c=i[0]*Tr*u,l=kr(a)>180;l^(u*Za<c&&c<u*t)?(o=i[1]*Tr)>$a&&($a=o):l^(u*Za<(c=(c+360)%360-180)&&c<u*t)?(o=-i[1]*Tr)<Ja&&(Ja=o):(n<Ja&&(Ja=n),n>$a&&($a=n)),l?t<Za?pu(Ya,t)>pu(Ya,Ka)&&(Ka=t):pu(t,Ka)>pu(Ya,Ka)&&(Ya=t):Ka>=Ya?(t<Ya&&(Ya=t),t>Ka&&(Ka=t)):t>Za?pu(Ya,t)>pu(Ya,Ka)&&(Ka=t):pu(t,Ka)>pu(Ya,Ka)&&(Ya=t)}else eu.push(ru=[Ya=t,Ka=t]);n<Ja&&(Ja=n),n>$a&&($a=n),nu=e,Za=t}function cu(){ou.point=uu}function lu(){ru[0]=Ya,ru[1]=Ka,ou.point=au,nu=null}function su(t,n){if(nu){var e=t-Za;iu.add(kr(e)>180?e+(e>0?360:-360):e)}else Qa=t,tu=n;Ga.point(t,n),uu(t,n)}function fu(){Ga.lineStart()}function hu(){su(Qa,tu),Ga.lineEnd(),kr(iu)>wr&&(Ya=-(Ka=180)),ru[0]=Ya,ru[1]=Ka,nu=null}function pu(t,n){return(n-=t)<0?n+360:n}function du(t,n){return t[0]-n[0]}function vu(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var mu=function(t){var n,e,r,i,o,a,u;if($a=Ka=-(Ya=Ja=1/0),eu=[],Mi(t,ou),e=eu.length){for(eu.sort(du),n=1,o=[r=eu[0]];n<e;++n)vu(r,(i=eu[n])[0])||vu(r,i[1])?(pu(r[0],i[1])>pu(r[0],r[1])&&(r[1]=i[1]),pu(i[0],r[1])>pu(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=0,r=o[e=o.length-1];n<=e;r=i,++n)i=o[n],(u=pu(r[1],i[0]))>a&&(a=u,Ya=i[0],Ka=r[1])}return eu=ru=null,Ya===1/0||Ja===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ya,Ja],[Ka,$a]]},gu=function(t,n){var e=t[0]*Sr,r=t[1]*Sr,i=n[0]*Sr,o=n[1]*Sr,a=Nr(r),u=Or(r),c=Nr(o),l=Or(o),s=a*Nr(e),f=a*Or(e),h=c*Nr(i),p=c*Or(i),d=2*Rr(Pr(Cr(o-r)+a*c*Cr(i-e))),v=Or(d),m=d?function(t){var n=Or(t*=d)/v,e=Or(d-t)/v,r=e*s+n*h,i=e*f+n*p,o=e*u+n*l;return[jr(i,r)*Tr,jr(o,Pr(r*r+i*i))*Tr]}:function(){return[e*Tr,r*Tr]};return m.distance=d,m},yu=function(t,n){var e=wu(t[1],t[0]),r=wu(n[1],n[0]),i=function(t,n){return Ii(t[0]*n[1]-t[1]*n[0],t[0]*n[0]+t[1]*n[1])}(e,r),o=_u(e)/_u(r);return bu([1,0,t[0][0],0,1,t[0][1]],bu([o,0,0,0,o,0],bu([Di(i),Hi(i),0,-Hi(i),Di(i),0],[1,0,-n[0][0],0,1,-n[0][1]])))};function bu(t,n){return[t[0]*n[0]+t[1]*n[3],t[0]*n[1]+t[1]*n[4],t[0]*n[2]+t[1]*n[5]+t[2],t[3]*n[0]+t[4]*n[3],t[3]*n[1]+t[4]*n[4],t[3]*n[2]+t[4]*n[5]+t[5]]}function wu(t,n){return[t[0]-n[0],t[1]-n[1]]}function _u(t){return $i(t[0]*t[0]+t[1]*t[1])}var xu=function(t,n,e){function r(t,e){var r,i=n(t,e),o=i.project([t*Vi,e*Vi]);return(r=i.transform)?[r[0]*o[0]+r[1]*o[1]+r[2],-(r[3]*o[0]+r[4]*o[1]+r[5])]:(o[1]=-o[1],o)}!function t(n,e){n.edges=function(t){for(var n=t.length,e=[],r=t[n-1],i=0;i<n;++i)e.push([r,r=t[i]]);return e}(n.face);if(e.face){var r=n.shared=function(t,n){for(var e,r,i=t.length,o=null,a=0;a<i;++a){e=t[a];for(var u=n.length;--u>=0;)if(r=n[u],e[0]===r[0]&&e[1]===r[1]){if(o)return[o,e];o=e}}}(n.face,e.face),i=yu(r.map(e.project),r.map(n.project));n.transform=e.transform?bu(e.transform,i):i;for(var o=e.edges,a=0,u=o.length;a<u;++a)Mu(r[0],o[a][1])&&Mu(r[1],o[a][0])&&(o[a]=n),Mu(r[0],o[a][0])&&Mu(r[1],o[a][1])&&(o[a]=n);for(o=n.edges,a=0,u=o.length;a<u;++a)Mu(r[0],o[a][0])&&Mu(r[1],o[a][1])&&(o[a]=e),Mu(r[0],o[a][1])&&Mu(r[1],o[a][0])&&(o[a]=e)}else n.transform=e.transform;n.children&&n.children.forEach(function(e){t(e,n)});return n}(t,{transform:null}),Eu(t)&&(r.invert=function(e,r){var i=function t(e,r){var i=e.project.invert,o=e.transform,a=r;o&&(o=function(t){var n=1/(t[0]*t[4]-t[1]*t[3]);return[n*t[4],-n*t[1],n*(t[1]*t[5]-t[2]*t[4]),-n*t[3],n*t[0],n*(t[2]*t[3]-t[0]*t[5])]}(o),a=[o[0]*a[0]+o[1]*a[1]+o[2],o[3]*a[0]+o[4]*a[1]+o[5]]);if(i&&e===function(t){return n(t[0]*Yi,t[1]*Yi)}(u=i(a)))return u;var u,c=e.children;for(var l=0,s=c&&c.length;l<s;++l)if(u=t(c[l],r))return u}(t,[e,-r]);return i&&(i[0]*=Yi,i[1]*=Yi,i)});var i=zi(r),o=i.stream;return i.stream=function(n){var e=i.rotate(),r=o(n),a=(i.rotate([0,0]),o(n));return i.rotate(e),r.sphere=function(){a.polygonStart(),a.lineStart(),function t(n,e,r){var i,o,a=e.edges,u=a.length,c={type:"MultiPoint",coordinates:e.face},l=e.face.filter(function(t){return 90!==Li(t[1])}),s=mu({type:"MultiPoint",coordinates:l}),f=!1,h=-1,p=s[1][0]-s[0][0];var d=180===p||360===p?[(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]:Ca(c);if(r)for(;++h<u&&a[h]!==r;);++h;for(var v=0;v<u;++v)o=a[(v+h)%u],Array.isArray(o)?(f||(n.point((i=gu(o[0],d)(Gi))[0],i[1]),f=!0),n.point((i=gu(o[1],d)(Gi))[0],i[1])):(f=!1,o!==r&&t(n,o,e))}(a,t),a.lineEnd(),a.polygonEnd()},r},i.angle(null==e?-30:e*Vi)};function Mu(t,n){return t&&n&&t[0]===n[0]&&t[1]===n[1]}function Eu(t){return t.project.invert||t.children&&t.children.some(Eu)}var Tu=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Su=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(t){return t.map(function(t){return Tu[t]})}),ku=function(t){t=t||function(t){var n=6===t.length?Ca({type:"MultiPoint",coordinates:t}):t[0];return zi(Fa).scale(144.049).clipAngle(60).scale(1).translate([0,0]).rotate([-n[0],-n[1]])};var n=Su.map(function(t){for(var n,e=t.map(Ou),r=e.length,i=e[r-1],o=[],a=0;a<r;++a)n=e[a],o.push(Nu([.9486832980505138*i[0]+.31622776601683794*n[0],.9486832980505138*i[1]+.31622776601683794*n[1],.9486832980505138*i[2]+.31622776601683794*n[2]]),Nu([.9486832980505138*n[0]+.31622776601683794*i[0],.9486832980505138*n[1]+.31622776601683794*i[1],.9486832980505138*n[2]+.31622776601683794*i[2]])),i=n;return o}),e=[],r=[-1,0,0,1,0,1,4,5];n.forEach(function(t,i){for(var o=Su[i],a=o.length,u=e[i]=[],c=0;c<a;++c)n.push([o[c],t[(2*c+2)%(2*a)],t[(2*c+1)%(2*a)]]),r.push(i),u.push(ju(Ou(t[(2*c+2)%(2*a)]),Ou(t[(2*c+1)%(2*a)])))});var i=n.map(function(n){return{project:t(n),face:n}});return r.forEach(function(t,n){var e=i[t];e&&(e.children||(e.children=[])).push(i[n])}),xu(i[0],function(t,n){var r=Di(n),o=[r*Di(t),r*Hi(t),Hi(n)],a=t<-Xi/2?n<0?6:4:t<0?n<0?2:0:t<Xi/2?n<0?3:1:n<0?7:5,u=e[a];return i[Au(u[0],o)<0?8+3*a:Au(u[1],o)<0?8+3*a+1:Au(u[2],o)<0?8+3*a+2:a]}).angle(-30).scale(110.625).center([0,45])};function Au(t,n){for(var e=0,r=t.length,i=0;e<r;++e)i+=t[e]*n[e];return i}function ju(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Nu(t){return[Ii(t[1],t[0])*Vi,Ji(qi(-1,Ui(1,t[2])))*Vi]}function Ou(t){var n=t[0]*Yi,e=t[1]*Yi,r=Di(e);return[r*Di(n),r*Hi(n),Hi(e)]}function Pu(t,n){var e=Di(n),r=function(t){return t?t/Math.sin(t):1}(Ki(e*Di(t/=2)));return[2*e*Hi(t)*r,Hi(n)*r]}Pu.invert=function(t,n){if(!(t*t+4*n*n>Xi*Xi+Gi)){var e=t,r=n,i=25;do{var o,a=Hi(e),u=Hi(e/2),c=Di(e/2),l=Hi(r),s=Di(r),f=Hi(2*r),h=l*l,p=s*s,d=u*u,v=1-p*c*c,m=v?Ki(s*c)*$i(o=1/v):o=0,g=2*m*s*u-t,y=m*l-n,b=o*(p*d+m*s*c*h),w=o*(.5*a*f-2*m*l*u),_=.25*o*(f*u-m*l*p*a),x=o*(h*c+m*d*s),M=w*_-x*b;if(!M)break;var E=(y*w-g*x)/M,T=(g*_-y*b)/M;e-=E,r-=T}while((Li(E)>Gi||Li(T)>Gi)&&--i>0);return[e,r]}};function Ru(t,n){var e=Pu(t,n);return[(e[0]+t/Wi)/2,(e[1]+n)/2]}Ru.invert=function(t,n){var e=t,r=n,i=25;do{var o,a=Di(r),u=Hi(r),c=Hi(2*r),l=u*u,s=a*a,f=Hi(e),h=Di(e/2),p=Hi(e/2),d=p*p,v=1-s*h*h,m=v?Ki(a*h)*$i(o=1/v):o=0,g=.5*(2*m*a*p+e/Wi)-t,y=.5*(m*u+r)-n,b=.5*o*(s*d+m*a*h*l)+.5/Wi,w=o*(f*c/4-m*u*p),_=.125*o*(c*p-m*u*s*f),x=.5*o*(l*h+m*d*a)+.5,M=w*_-x*b,E=(y*w-g*x)/M,T=(g*_-y*b)/M;e-=E,r-=T}while((Li(E)>Gi||Li(T)>Gi)&&--i>0);return[e,r]};var Cu=function(){return zi(Ru).scale(158.837)},Fu=e(36);function zu(t,n,e,r,a){var u=Object(o.c)(e+90,360),c=180<u?-1:1;c<0?(e=270-u,n+=180):e=u-90,e*=i.b,n=(Object(o.c)(n+180,360)-180)*i.b;var l=t*t,s=Math.sin(e),f=Math.cos(e),h=t*f,p=f/t,d=[r,a];function v(e){var o=e[0],u=e[1];if(o!=o||u!=u)return[NaN,NaN];var l=o*i.b,f=u*i.b,p=l-n,d=Math.sin(p),v=Math.cos(p),m=Math.sin(f),g=Math.cos(f),y=t*g;return[y*d*c+r,(y*v*s-h*m)*c+a]}return v.invert=function(t){var e=t[0],o=t[1],u=(e-r)*c,f=(a-o)*c,d=1-(u*u+f*f)/l;if(d>=0){var v=Math.sqrt(d),m=n+Math.atan2(u,v*h-f*s),g=Math.asin(v*s+f*p);return[m*i.a,g*i.a]}return[NaN,NaN]},v.webgl=function(t){return{shaderSource:function(){return Fu},textures:function(){return{}},uniforms:function(){return{u_translate:d,u_R2:l,u_lon0:n,u_sinlat0:s,u_Rcoslat0:h,u_coslat0dR:p,u_flip:c}}}},v}function Lu(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=document.createElement("canvas");return e.width=t,e.height=n,e}function Iu(t){var n=t.canvas,e=n.width,r=n.height;t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e,r),t.restore()}function Du(t){Iu(t.getContext("2d"))}function qu(t,n){return{renderTo:function(e,r){c.c(e,n),e.beginPath(),r(t),e.stroke()}}}function Uu(t){return{renderTo:function(n,e){Iu(n),e.context(n),n.lineJoin="bevel",t.forEach(function(t){return t.renderTo(n,e)})}}}function Hu(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Gu(){return[Object(o.c)((new Date).getTimezoneOffset()/4,360),0]}function Xu(t,n){return a.isFinite(t)||t===1/0||t===-1/0?t:n}function Wu(t,n){var e=or().projection(t).bounds({type:"Sphere"}),r=(e[1][0]-e[0][0])/t.scale(),i=(e[1][1]-e[0][1])/t.scale(),o=.9*Math.min(n.width/r,n.height/i),a=[n.width/2,n.height/2];return t.scale(o).translate(a)}function Bu(){return{projection:null,newProjection:function(t){throw new Error("method must be overridden")},optimizedProjection:function(){return this.projection},bounds:function(t){return function(t,n){var e=t[0],r=t[1],i=Math.max(Math.floor(Xu(e[0],0)),0),o=Math.max(Math.floor(Xu(e[1],0)),0),a=Math.min(Math.ceil(Xu(r[0],n.width)),n.width-1),u=Math.min(Math.ceil(Xu(r[1],n.height)),n.height-1);return{x:i,y:o,xMax:a,yMax:u,width:a-i+1,height:u-o+1}}(or().projection(this.projection).bounds({type:"Sphere"}),t)},fit:function(t){return c.q()&&"tara"===c.E()?700:this.newProjection(t).scale()},center:function(t){return[t.width/2,t.height/2]},scaleExtent:function(){return[25,3e3]},orientation:function(t,n){var e=this.projection,r=e.rotate();if(n){var i=a.isString(t)?t.split(","):[],u=+i[0],c=+i[1],l=+i[2],s=this.scaleExtent();return e.rotate(a.isFinite(u)&&a.isFinite(c)?[-u,-c,r[2]]:this.newProjection(n).rotate()),e.scale(a.isFinite(l)?Object(o.a)(l,s[0],s[1]):this.fit(n)),e.translate(this.center(n)),this}return[(-r[0]).toFixed(2),(-r[1]).toFixed(2),Math.round(e.scale())].join(",")},manipulator:function(t,n){var e=this.projection,r=60/n,i=[e.rotate()[0]/r,-e.rotate()[1]/r],o=e.precision();return e.precision(10*o),{move:function(n,o){if(n){var a=n[0]-t[0]+i[0],u=n[1]-t[1]+i[1];e.rotate([a*r,-u*r,e.rotate()[2]])}e.scale(o)},end:function(){e.precision(o)}}},locate:function(t){return null},defineMask:function(t){return or().projection(this.projection).context(t)({type:"Sphere"}),t},backgroundRenderer:function(){return{renderTo:function(t,n){t.fillStyle="#303030",t.beginPath(),n({type:"Sphere"}),t.fill()}}},graticuleRenderer:function(){var t=gr()(),n=gr().extentMinor([[0,0],[0,0]]).stepMajor([0,90])(),e=qu(t,{strokeStyle:"#505050",lineWidth:1}),r=qu(n,{strokeStyle:"#808080",lineWidth:1});return{renderTo:function(t,n){e.renderTo(t,n),r.renderTo(t,n)}}},foregroundRenderer:function(){return{renderTo:function(t,n){t.strokeStyle="#000005",t.lineWidth=4,t.beginPath(),n({type:"Sphere"}),t.stroke()}}}}}function Vu(t,n){var e=c.c(Bu(),t);return e.projection=e.newProjection(n),e}function Yu(t){return Vu({newProjection:function(t){return Wu(Qi().rotate([30,-45,90]).precision(.1),t)}},t)}function Ju(t){return Vu({newProjection:function(t){return Wu(Wo().rotate(Gu()).precision(.1),t)}},t)}function Ku(t){return Vu({newProjection:function(t){return Wu(Go().rotate(Gu()).precision(.1),t)}},t)}function $u(t){return Vu({newProjection:function(t){return Wu(Yo().rotate(Gu()).precision(.1).clipAngle(90),t)},optimizedProjection:function(){return zu.fromD3(this.projection)},backgroundRenderer:function(){return{renderTo:function(t,n){var e=n.projection(),r=Hu(e.translate(),2),i=r[0],o=r[1],a=e.scale(),u=t.createRadialGradient(i,o,0,i,o,a);u.addColorStop(.69,"#303030"),u.addColorStop(.91,"#202020"),u.addColorStop(.96,"#000005"),t.fillStyle=u,t.fillRect(i-a,o-a,2*a,2*a)}}},foregroundRenderer:function(){return{renderTo:function(t,n){var e=n.projection(),r=Hu(e.translate(),2),o=r[0],a=r[1],u=e.scale();t.fillStyle="#000005",t.beginPath(),t.arc(o,a,u-2,0,i.d,!0),t.arc(o,a,u+4,0,i.d,!0),t.fill("evenodd")}}},locate:function(t){return[-t[0],-t[1],this.projection.rotate()[2]]}},t)}function Zu(t){return Vu({newProjection:function(t){return Wu(ia().precision(.1),t)}},t)}function Qu(t){return Vu({newProjection:function(t){return Wu(xa().rotate([-43,-20]).precision(1).clipAngle(179.9999).clipExtent([[0,0],[t.width,t.height]]),t)},foregroundRenderer:function(){return{renderTo:function(t,n){}}}},t)}function tc(t){return Vu({newProjection:function(t){return Wu(ku().rotate([20,0]).precision(.1),t)},foregroundRenderer:function(){return{renderTo:function(t,n){var e=t.canvas,r=e.width,i=e.height;t.fillStyle=t.strokeStyle="#000005",t.lineWidth=4,t.beginPath(),n({type:"Sphere"}),t.stroke(),t.moveTo(0,0),t.lineTo(r,0),t.lineTo(r,i),t.lineTo(0,i),t.lineTo(0,0),t.fill("evenodd")}}}},t)}function nc(t){return Vu({newProjection:function(t){return Wu(Cu().precision(.1),t)}},t)}zu.fromD3=function(t){var n=t.translate(),e=t.rotate();if(0!==e[2])throw new Error("γ rotation not supported");return zu(t.scale(),-e[0],-e[1],n[0],n[1])};var ec=e(37);function rc(){}var ic=ec.a.prototype;function oc(t,n){var e=new rc;if(t instanceof rc)t.each(function(t){e.add(t)});else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}rc.prototype=oc.prototype={constructor:rc,has:ic.has,add:function(t){return t+="",this[ec.b+t]=t,this},remove:ic.remove,clear:ic.clear,values:ic.keys,size:ic.size,empty:ic.empty,each:ic.each};var ac=oc,uc=lc,cc={skew:0};Promise.resolve(cc);function lc(){return Date.now()+cc.skew}function sc(){return uc()}function fc(t,n,e){var r=t[0].header,i=pr.a(pr.f(r.refTime),{hour:r.forecastTime}),o={time:{data:[pr.h(i)]},lat:{sequence:{start:r.la1,delta:-r.dy,size:r.ny}},lon:{sequence:{start:r.lo1,delta:r.dx,size:r.nx}}},a=[];return n.forEach(function(n,r){o[n]={dimensions:e||["time","lat","lon"],data:{block:r}},a[r]=new Float32Array(t[r].data)}),{header:{variables:o},blocks:a}}var hc=e(35);function pc(t,n){var e=Math.floor(t.size),r=Math.floor(n.size),a=e*r,u=c.h(t.delta),l=c.h(n.delta),s=c.h(t.start),f=c.h(n.start),h=s+u*(e-1),p=f+l*(r-1),d=(s-u/2)*i.b,v=(h+u/2)*i.b-d,m=(f-l/2)*i.b,g=[d,m],y=[v,(p+l/2)*i.b-m],b=Math.floor(e*u)>=360;return{dimensions:function(){return{width:e,height:r}},isCylindrical:function(){return b},forEach:function(t,n){for(var r=n||0;r<a;r++){var i=r%e,o=Math.floor(r/e);if(t(s+i*u,f+o*l,r))return r+1}return NaN},closest:function(t){var n=t[0],i=t[1];if(n==n&&i==i){var a=Object(o.c)(n-s,360)/u,c=(i-f)/l,h=Math.round(a),p=Math.round(c);if(0<=p&&p<r&&0<=h&&(h<e||h===e&&b)){var d=p*e+h;return h===e?d-e:d}}return NaN},closest4:function(t){var n=t[0],i=t[1];if(n==n&&i==i){var a=Object(o.c)(n-s,360)/u,c=(i-f)/l,h=Math.floor(a),p=Math.floor(c),d=h+1;if(0<=p&&p+1<r&&0<=h&&(d<e||d===e&&b)){var v=p*e+h,m=v+1,g=v+e,y=g+1;return d===e&&(m-=e,y-=e),[v,m,g,y,a-h,c-p]}}return[NaN,NaN,NaN,NaN,NaN,NaN]},webgl:function(){return{shaderSource:function(){return hc},textures:function(){return{}},uniforms:function(){return{u_Low:g,u_Size:y}}}}}}var dc=e(34),vc=e(33),mc=e(32),gc=e(31);function yc(t,n){var e=t.context,r=n.width,i=n.height;return{shaderSourceTexture2D:function(){return dc},shaderSourceBilinearWrap:function(){return vc},scalarSource:function(){return mc},vectorSource:function(){return gc},scalarTexture:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.c({format:e.LUMINANCE,type:e.FLOAT,width:r,height:i,data:t},n)},vectorTexture:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.c({format:e.LUMINANCE_ALPHA,type:e.FLOAT,width:r,height:i,data:t},n)}}}function bc(t,n){var e=c.a(n,1e3);function r(e){var r=t.closest(e);return r==r?n[r]:7e37}return r.webgl=function(r){var i=r.context,o=yc(r,t.dimensions());return{shaderSource:function(){return[o.scalarSource(),o.shaderSourceTexture2D()]},textures:function(){return{weather_data:o.scalarTexture(n,{hash:e,TEXTURE_MIN_FILTER:i.NEAREST,TEXTURE_MAG_FILTER:i.NEAREST})}},uniforms:function(){return{u_Data:"weather_data"}}}},r}function wc(t,n){var e=c.a(n,1e3);function r(e){var r=2*t.closest(e);if(r==r){var i=n[r],o=n[r+1];if(i<7e37&&o<7e37)return[i,o,Math.sqrt(i*i+o*o)]}return[7e37,7e37,7e37]}return r.webgl=function(r){var i=r.context,o=yc(r,t.dimensions());return{shaderSource:function(){return[o.vectorSource(),o.shaderSourceTexture2D()]},textures:function(){return{weather_data:o.vectorTexture(n,{hash:e,TEXTURE_MIN_FILTER:i.NEAREST,TEXTURE_MAG_FILTER:i.NEAREST})}},uniforms:function(){return{u_Data:"weather_data"}}}},r}function _c(t,n){var e=c.a(n,1e3);function r(e){var r=t.closest4(e),i=r[0];if(i==i){var o=r[1],a=r[2],u=r[3],c=r[4],l=r[5],s=1-c,f=1-l,h=n[i],p=n[o],d=n[a],v=n[u];if(h<7e37){if(p<7e37&&d<7e37&&v<7e37)return h*(s*f)+p*(c*f)+d*(s*l)+v*(c*l);if(v<7e37&&p<7e37&&c>=l)return p+s*(h-p)+l*(v-p);if(d<7e37&&v<7e37&&c<l)return d+c*(v-d)+f*(h-d);if(d<7e37&&p<7e37&&c<=f)return h+c*(p-h)+l*(d-h)}else if(v<7e37&&d<7e37&&p<7e37&&c>f)return v+s*(d-v)+f*(p-v)}return 7e37}return r.webgl=function(r){var i=r.context,o=yc(r,t.dimensions()),a=t.dimensions(),u=[a.width,a.height];return{shaderSource:function(){return[o.scalarSource(),o.shaderSourceBilinearWrap()]},textures:function(){return{weather_data:o.scalarTexture(n,{hash:e,TEXTURE_MIN_FILTER:i.NEAREST,TEXTURE_MAG_FILTER:i.NEAREST})}},uniforms:function(){var t={u_Data:"weather_data"};return t.u_TextureSize=u,t}}},r}function xc(t,n){var e=c.a(n,1e3);function r(t,n,e,r,i,o,a,u){var c=e+t*(a-e)+n*(i-e),l=r+t*(u-r)+n*(o-r);return[c,l,Math.sqrt(c*c+l*l)]}function i(e){var i=t.closest4(e),o=2*i[0];if(o==o){var a=2*i[1],u=2*i[2],c=2*i[3],l=i[4],s=i[5],f=1-l,h=1-s,p=n[o],d=n[o+1],v=n[a],m=n[a+1],g=n[u],y=n[u+1],b=n[c],w=n[c+1];if(d<7e37){if(m<7e37&&y<7e37&&w<7e37){var _=f*h,x=l*h,M=f*s,E=l*s,T=p*_+v*x+g*M+b*E,S=d*_+m*x+y*M+w*E;return[T,S,Math.sqrt(T*T+S*S)]}if(w<7e37&&m<7e37&&l>=s)return r(f,s,v,m,b,w,p,d);if(y<7e37&&w<7e37&&l<s)return r(l,h,g,y,p,d,b,w);if(y<7e37&&m<7e37&&l<=h)return r(l,s,p,d,g,y,v,m)}else if(w<7e37&&y<7e37&&m<7e37&&l>h)return r(f,h,b,w,v,m,g,y)}return[7e37,7e37,7e37]}return i.webgl=function(r){var i=r.context,o=yc(r,t.dimensions()),a=t.dimensions(),u=[a.width,a.height];return{shaderSource:function(){return[o.vectorSource(),o.shaderSourceBilinearWrap()]},textures:function(){return{weather_data:o.vectorTexture(n,{hash:e,TEXTURE_MIN_FILTER:i.NEAREST,TEXTURE_MAG_FILTER:i.NEAREST})}},uniforms:function(){var t={u_Data:"weather_data"};return t.u_TextureSize=u,t}}},i}var Mc=function(t,n,e,r,i){Array.isArray(t)&&(t=fc(t,r)),t.blocks||(t=function(t,n){var e=t.variables,r=[];return Object.keys(e).forEach(function(t){if(n.test(t)){var i=e[t];r.push(new Float32Array(i.data)),i.data={block:r.length-1}}}),{header:t,blocks:r}}(t,n));var o=t,u=o.header.variables,c=u[a.find(Object.keys(u),function(t){return n.test(t)})],l=c.dimensions,s=u[l[0]],f=u[a.last(l,2)[0]],h=u[a.last(l,2)[1]],p=o.blocks[c.data.block];a.isFunction(i)&&i(p);var d=pc(h.sequence,f.sequence),v={type:"scalar",valueAt:function(t){return p[t]},nearest:bc(d,p),bilinear:_c(d,p)};return{sourceHTML:e,date:function(){return pr.f(s.data[0])},grid:function(){return d},field:function(){return v},interpolate:function(t){return v.bilinear(t)}}},Ec=e(20),Tc="CAMS / Copernicus / EC + ECMWF",Sc="GEOS-5 / GMAO / NASA",kc="GEOS-5 / GMAO / NASA"+(c.t()?"":" [<a href='about.html#co2' class='internal-link'>important note</a>]"),Ac="GFS / NCEP / US National Weather Service",jc="RTG-SST / NCEP / US National Weather Service",Nc="WAVEWATCH III / NCEP / NWS",Oc=function(t){Array.isArray(t)&&(t=fc(t,["u","v"],["time","level","lat","lon"]));var n=t,e=n.header.variables,r=e.U||e.u||e["u-component_of_wind_isobaric"]||e["u-component_of_wind_height_above_ground"],i=e.V||e.v||e["v-component_of_wind_isobaric"]||e["v-component_of_wind_height_above_ground"],o=e[r.dimensions[0]],a=e[r.dimensions[2]],u=e[r.dimensions[3]],l=c.A(n.blocks[r.data.block],n.blocks[i.data.block]),s=pc(u.sequence,a.sequence),f=xc(s,l);return{sourceHTML:Ac,date:function(){return pr.f(o.data[0])},grid:function(){return s},field:function(){return{type:"vector",valueAt:function(t){var n=2*t,e=l[n],r=l[n+1];return[e,r,Math.sqrt(e*e+r*r)]},nearest:wc(s,l),bilinear:xc(s,l)}},interpolate:function(t){return f(t)}}},Pc=Math.PI/180,Rc=180/Math.PI,Cc=.96422,Fc=1,zc=.82521,Lc=4/29,Ic=6/29,Dc=3*Ic*Ic,qc=Ic*Ic*Ic;function Uc(t){if(t instanceof Gc)return new Gc(t.l,t.a,t.b,t.opacity);if(t instanceof Kc){if(isNaN(t.h))return new Gc(t.l,0,0,t.opacity);var n=t.h*Pc;return new Gc(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof zt||(t=Ct(t));var e,r,i=Vc(t.r),o=Vc(t.g),a=Vc(t.b),u=Xc((.2225045*i+.7168786*o+.0606169*a)/Fc);return i===o&&o===a?e=r=u:(e=Xc((.4360747*i+.3850649*o+.1430804*a)/Cc),r=Xc((.0139322*i+.0971045*o+.7141733*a)/zc)),new Gc(116*u-16,500*(e-u),200*(u-r),t.opacity)}function Hc(t,n,e,r){return 1===arguments.length?Uc(t):new Gc(t,n,e,null==r?1:r)}function Gc(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function Xc(t){return t>qc?Math.pow(t,1/3):t/Dc+Lc}function Wc(t){return t>Ic?t*t*t:Dc*(t-Lc)}function Bc(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Vc(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Yc(t){if(t instanceof Kc)return new Kc(t.h,t.c,t.l,t.opacity);if(t instanceof Gc||(t=Uc(t)),0===t.a&&0===t.b)return new Kc(NaN,0,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Rc;return new Kc(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Jc(t,n,e,r){return 1===arguments.length?Yc(t):new Kc(t,n,e,null==r?1:r)}function Kc(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function $c(t){return function(n,e){var r=t((n=Jc(n)).h,(e=Jc(e)).h),i=Yt(n.c,e.c),o=Yt(n.l,e.l),a=Yt(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=o(t),n.opacity=a(t),n+""}}}mt(Gc,Hc,gt(yt,{brighter:function(t){return new Gc(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Gc(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new zt(Bc(3.1338561*(n=Cc*Wc(n))-1.6168667*(t=Fc*Wc(t))-.4906146*(e=zc*Wc(e))),Bc(-.9787684*n+1.9161415*t+.033454*e),Bc(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),mt(Kc,Jc,gt(yt,{brighter:function(t){return new Kc(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Kc(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Uc(this).rgb()}}));var Zc=$c(Bt);$c(Yt);function Qc(t){return function(n,e){var r=t((n=Dt(n)).h,(e=Dt(e)).h),i=Yt(n.s,e.s),o=Yt(n.l,e.l),a=Yt(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=o(t),n.opacity=a(t),n+""}}}var tl=Qc(Bt),nl=(Qc(Yt),-.29227),el=-.90649,rl=1.97294,il=rl*el,ol=1.78277*rl,al=1.78277*nl- -.14861*el;function ul(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof cl)return new cl(t.h,t.s,t.l,t.opacity);t instanceof zt||(t=Ct(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(al*r+il*n-ol*e)/(al+il-ol),o=r-i,a=(rl*(e-i)-nl*o)/el,u=Math.sqrt(a*a+o*o)/(rl*i*(1-i)),c=u?Math.atan2(a,o)*Rc-120:NaN;return new cl(c<0?c+360:c,u,i,t.opacity)}(t):new cl(t,n,e,null==r?1:r)}function cl(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function ll(t){return function n(e){function r(n,r){var i=t((n=ul(n)).h,(r=ul(r)).h),o=Yt(n.s,r.s),a=Yt(n.l,r.l),u=Yt(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(Math.pow(t,e)),n.opacity=u(t),n+""}}return e=+e,r.gamma=n,r}(1)}mt(cl,ul,gt(yt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new cl(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new cl(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Pc,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new zt(255*(n+e*(-.14861*r+1.78277*i)),255*(n+e*(nl*r+el*i)),255*(n+e*(rl*r)),this.opacity)}}));ll(Bt);var sl=ll(Yt)(ul(300,.5,0),ul(-240,.5,1)),fl=e(30),hl=e(29),pl=e(28);function dl(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vl(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ml(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function gl(t){if(Array.isArray(t)){var n=ml(t,4);return Ft(n[0],n[1],n[2],n[3])}return Ot(t)}function yl(t,n){var e=ml(t,3),r=e[0],i=e[1],a=e[2],u=n[0]-r,c=n[1]-i,l=n[2]-a;return function(t){return[Math.floor(r+t*u),Math.floor(i+t*c),Math.floor(a+t*l)].map(function(t){return Object(o.a)(t,0,255)})}}function bl(t,n,e){switch(t){case"rgb":return Jt(n,e);case"lab":return function(t,n){var e=Yt((t=Hc(t)).l,(n=Hc(n)).l),r=Yt(t.a,n.a),i=Yt(t.b,n.b),o=Yt(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=o(n),t+""}}(n,e);case"hcl":return Zc(n,e);case"hsl":return tl(n,e);default:throw new Error("unsupported color space: ".concat(t))}}function wl(t,n){var e=bl(t.mode,gl(t.color),gl(n.color));return e.domain=function(){return[t.p,n.p]},e.mode=function(){return t.mode},e}function _l(t){var n=t*i.d*5/6;n*=.75;var e=Math.sin(n),r=Math.cos(n);return[Math.floor(255*Math.max(0,-r)),Math.floor(255*Math.max(e,0)),Math.floor(255*Math.max(r,0,-e))]}var xl=.45,Ml=yl(_l(1),[255,255,255]);function El(t){return t<=xl?_l(t/xl):Ml((t-xl)/(1-xl))}function Tl(t){for(var n=[],e=0;e<t.length-1;e++)n.push(wl(t[e],t[e+1]));return n}function Sl(t,n,e){var r=t[n],i=t[n+1],a=o.d.apply(void 0,[e[0]].concat(vl(r.domain()))),u=o.d.apply(void 0,[e[1]].concat(vl(i.domain()))),c=wl({color:Ot(r(0)),mode:r.mode(),p:r.domain()[0]},{color:Ot(r(a)),mode:r.mode(),p:e[0]}),l=function(t,n){for(var e=[],r=[],i=[],o=0;o<t.length;o++){var a=Hc(t[o]);e[o]=a.l,r[o]=a.a,i[o]=a.b}var u=Gt(e),c=Gt(r),l=Gt(i),s=function(t){return Hc(u(t),c(t),l(t))+""};return s.domain=function(){return n},s.mode=function(){return"lab"},s}([r(a),r(1),i(u)],e),s=wl({color:Ot(i(u)),mode:i.mode(),p:e[1]},{color:Ot(i(1)),mode:i.mode(),p:i.domain()[1]});return[].concat(t.slice(0,n),[c,l,s],t.slice(n+2))}function kl(t,n,e,r){for(var i=ml(n,2),a=i[0],u=i[1],c=ml(e,2),l=c[0],s=c[1],f=Math.floor(t.length/4),h=(u-a)/(f-1),p=Object(o.e)((l-a)/h),d=Math.max(p,0);d<f;d++){var v=l+(d-p)*h;if(v>s)break;var m=r(v),g=4*d;t[g]=m[0],t[g+1]=m[1],t[g+2]=m[2],t[g+3]=m.length>3?Object(o.a)(Object(o.f)(m[3],0,255),0,255):255}}function Al(t,n,e){var r=new Uint8Array(4*e);return n.forEach(function(n){var e=n.domain();kl(r,t,e,function(t){var r=Ot(n(o.d.apply(void 0,[t].concat(vl(e)))));return[r.r,r.g,r.b,r.opacity]})}),r}function jl(t,n,e){return Ol(t,Al(t,n,e))}function Nl(t,n,e){var r=function(t){for(var n=[],e=[],r=[],i=0;i<t.length-1;i++)n.push(t[i+1][0]),e.push(yl(t[i][1],t[i+1][1])),r.push([t[i][0],t[i+1][0]]);return function(t){var i;for(i=0;i<n.length-1&&!(t<=n[i]);i++);var a=o.d.apply(void 0,[t].concat(vl(r[i])));return e[i](a)}}(n),i=new Uint8Array(4*e);return kl(i,t,t,r),Ol(t,i)}function Ol(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t},i=e(t[0]),a=e(t[1]),u=n.length/4-1,l=u/(a-i),s=c.a(n,1e3),f=(a-i)/(2*u),h=i-f,p=[h,a+f-h];return new(function(){function a(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,a)}return function(t,n,e){n&&dl(t.prototype,n),e&&dl(t,e)}(a,[{key:"indexOf",value:function(t){var n=Math.round((e(t)-i)*l);return Object(o.a)(n,0,u)}},{key:"valueFor",value:function(t){return r(t/l+i)}},{key:"rgba",value:function(t){var e=4*this.indexOf(t);return[n[e],n[e+1],n[e+2],n[e+3]]}},{key:"webgl",value:function(t){var r=t.context;return{shaderSource:function(){return[e===Math.log?fl:hl,pl]},textures:function(){return{color_scale:{format:r.RGBA,type:r.UNSIGNED_BYTE,width:n.length/4,height:1,data:n,hash:s}}},uniforms:function(){return{u_Range:p,u_Palette:"color_scale",u_Alpha:1}}}}},{key:"colors",get:function(){return n}},{key:"bounds",get:function(){return t}}]),a}())}var Pl=function(t){for(var n=new Uint8Array(t.length/3*4),e=0,r=0;e<t.length;e+=3,r+=4)n[r]=t[e],n[r+1]=t[e+1],n[r+2]=t[e+2],n[r+3]=255;return n}([4,4,4,10,3,8,13,4,11,16,5,14,18,5,16,21,6,18,22,7,19,24,8,21,26,8,22,27,9,24,28,10,25,30,11,26,31,12,27,32,12,28,33,13,29,35,14,31,36,14,32,37,15,32,38,15,33,39,16,34,40,17,35,41,17,36,42,18,38,43,19,38,44,19,39,46,20,41,46,20,45,46,21,50,45,21,55,45,21,60,45,22,64,45,23,67,45,23,71,45,24,75,45,24,77,45,25,81,45,25,84,44,26,87,44,27,90,45,27,92,45,28,95,44,29,98,44,29,100,44,30,103,44,31,106,44,31,109,44,32,110,44,33,113,44,34,116,43,34,118,42,35,121,40,38,120,38,40,119,36,42,120,34,44,120,33,46,120,32,47,120,31,49,121,30,50,122,30,51,123,29,52,123,29,53,125,28,55,125,28,56,126,27,57,127,28,58,128,28,59,129,27,60,129,27,61,131,27,62,132,27,63,133,28,64,134,27,65,135,27,66,136,27,68,137,27,69,138,25,71,136,22,73,134,21,74,133,20,76,131,17,78,129,16,79,128,15,81,126,14,82,125,10,84,123,10,85,122,9,87,120,8,88,119,7,89,118,6,91,117,4,92,115,4,94,114,4,95,114,3,96,112,1,98,111,1,99,110,0,100,109,0,101,108,0,103,107,0,104,106,0,105,105,0,107,104,0,108,101,0,110,100,0,111,99,0,112,98,0,114,96,0,115,95,0,116,93,0,118,92,0,119,90,0,120,89,0,121,88,0,123,86,0,124,85,0,125,83,0,127,82,0,128,80,0,129,79,0,131,77,0,132,75,0,133,73,0,134,72,0,136,70,0,137,68,0,138,66,0,139,65,0,141,64,0,142,63,0,143,61,0,145,60,0,146,60,0,147,58,0,149,57,0,150,56,0,151,55,0,153,53,0,154,52,0,155,51,0,157,50,0,158,48,0,159,47,0,160,45,0,162,44,0,163,42,0,164,41,0,165,39,0,167,36,0,168,34,0,169,31,0,170,23,0,169,8,9,170,0,20,171,0,29,172,0,35,173,0,40,174,0,45,175,0,48,176,0,52,177,0,55,178,0,59,179,0,61,180,0,64,181,0,66,182,0,68,183,0,71,184,0,73,185,0,76,186,0,78,187,0,79,188,0,81,189,0,83,190,0,85,191,0,87,192,0,92,193,0,99,193,0,106,193,0,114,193,0,119,194,0,125,194,0,130,194,0,135,195,0,140,195,0,145,195,0,149,196,0,153,196,0,157,197,0,161,197,0,165,197,0,169,198,0,172,198,0,176,199,0,180,199,0,184,199,0,186,200,0,190,201,0,193,201,0,197,201,0,200,202,0,201,201,24,203,202,51,206,202,65,207,203,77,209,203,87,212,203,95,213,204,103,215,205,109,218,205,116,219,206,121,221,207,127,223,207,132,226,207,138,227,208,143,229,209,147,231,209,151,232,210,155,235,211,159,237,211,164,238,212,168,240,212,172,243,213,175,243,214,179,245,214,183,248,215,186,248,216,189,248,218,193,247,219,195,247,220,198,247,222,201,248,223,204,247,224,206,247,226,209,247,227,211,247,229,214,247,230,216,247,231,218,247,232,220,248,234,224,247,235,225,247,236,229,247,238,231,247,239,232,248,240,235,248,242,237,247,243,239,248,244,241,248,246,244,248,247,246,248,248,248,249,249,249,251,251,251,252,252,252,253,253,253,254,254,254,255,255,255]),Rl=a.memoize(function(){return Nl([0,1.5],[[0,[0,0,0]],[1.5,[255,255,255]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:10)}),Cl=a.memoize(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=[0,100],e=Tl([{color:[0,0,0],mode:"lab",p:n[0]},{color:[4,8,34],mode:"lab",p:5},{color:[78,255,103],mode:"lab",p:40},{color:[252,255,57],mode:"lab",p:60},{color:[219,75,255],mode:"lab",p:n[1]}]);return jl(n,e=Sl(e=Sl(e,1,[35,45]),3,[55,65]),t)}),Fl=a.memoize(function(){return Nl([0,5e3],[[0,[5,48,97]],[500,[33,102,172]],[1e3,[67,147,195]],[1500,[146,197,222]],[2e3,[209,229,240]],[2500,[247,247,247]],[3e3,[253,219,199]],[3500,[244,165,130]],[4e3,[214,96,77]],[4500,[178,24,43]],[5e3,[103,0,31]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}),zl=a.memoize(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=[3578e-7,377e-6],e=Tl([{color:[0,0,0],mode:"hcl",p:n[0]},{color:[100,0,0],mode:"hcl",p:365e-6},{color:[164,36,0],mode:"hcl",p:3675e-7},{color:[255,220,140],mode:"hcl",p:371e-6},{color:[255,255,255],mode:"hcl",p:n[1]}]);return jl(n,e=Sl(e,2,[37e-5,372e-6]),t)}),Ll=a.memoize(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,e=[360+t,470+t],r=[{color:[0,0,0],mode:"hcl",p:e[0]},{color:[100,0,0],mode:"hcl",p:400+t},{color:[164,36,0],mode:"hcl",p:405+t},{color:[255,220,140],mode:"hcl",p:420+t},{color:[255,255,255],mode:"hcl",p:450+t},{color:[0,210,255],mode:"hcl",p:e[1]}],i=r[3].p,o=r[4].p,a=r[1].p,u=Tl(r);return jl(e,u=Sl(u=Sl(u=Sl(u,0,[a-2,a+2]),3,[i-2,i+2]),5,[o-2,o+2]),n)}),Il=a.memoize(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,n=[40,2500],e=Tl([{color:[0,38,40],mode:"lab",p:n[0]},{color:[255,255,224],mode:"hcl",p:400},{color:[0,0,154],mode:"lab",p:1800},{color:[0,0,0],mode:"lab",p:n[1]}]);return jl(n,e=Sl(e=Sl(e,0,[340,460]),2,[1500,2100]),t)}),Dl=a.memoize(function(){return Nl([0,1.5],[[0,[10,25,68]],[.15,[10,25,250]],[.4,[24,255,93]],[.65,[255,233,102]],[1,[255,233,15]],[1.5,[255,15,15]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}),ql=a.memoize(function(){return Ol([1e-4,3],Pl,Math.log,Math.exp)}),Ul=a.memoize(function(){return Nl([0,15],[[0,[8,29,88]],[1,[37,52,148]],[2,[34,94,168]],[3,[29,145,192]],[4,[65,182,196]],[5,[127,205,187]],[6,[199,233,180]],[7,[237,248,177]],[8,[254,204,92]],[10,[253,141,60]],[12,[240,59,32]],[14,[189,0,38]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}),Hl=a.memoize(function(){return Nl([236,332],[[241,[255,255,255]],[245.5,[6,82,255]],[250,[6,82,255]],[258,[46,131,255]],[266,[46,131,255]],[280,[0,0,0]],[300,[0,0,0]],[305,[247,20,35]],[309.5,[247,20,35]],[314,[245,210,5]],[320.5,[245,210,5]],[327,[255,255,255]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}),Gl=a.memoize(function(){return Nl([92e3,105e3],[[92e3,[40,0,0]],[95e3,[187,60,31]],[96500,[137,32,30]],[98e3,[16,1,43]],[100500,[36,1,93]],[101300,[241,254,18]],[103e3,[228,246,223]],[105e3,[255,255,255]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}),Xl=a.memoize(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=[1e-9,1e-6],e=n.map(Math.log),r=Tl([{color:[8,29,88],mode:"hcl",p:e[0]},{color:[37,52,148],mode:"hcl",p:Math.log(4e-9)},{color:[34,94,168],mode:"hcl",p:Math.log(6e-9)},{color:[29,145,192],mode:"hcl",p:Math.log(8e-9)},{color:[65,182,196],mode:"hcl",p:Math.log(1e-8)},{color:[127,205,187],mode:"hcl",p:Math.log(1.6e-8)},{color:[199,233,180],mode:"hcl",p:Math.log(2.4e-8)},{color:[237,248,177],mode:"hcl",p:Math.log(2.8e-8)},{color:[255,255,210],mode:"hcl",p:Math.log(3.2e-8)},{color:[255,237,160],mode:"hcl",p:Math.log(4.2e-8)},{color:[254,217,118],mode:"hcl",p:Math.log(4.7e-8)},{color:[254,178,76],mode:"hcl",p:Math.log(5.7e-8)},{color:[253,141,60],mode:"hcl",p:Math.log(6.7e-8)},{color:[252,78,42],mode:"hcl",p:Math.log(1.1e-7)},{color:[227,26,28],mode:"hcl",p:Math.log(2.5e-7)},{color:[189,0,38],mode:"hcl",p:Math.log(5e-7)},{color:[128,0,38],mode:"hcl",p:e[1]}]);return Ol(n,Al(e,r=Sl(r,7,[Math.log(3e-8),Math.log(3.5e-8)]),t),Math.log,Math.exp)}),Wl=a.memoize(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,n=[0,150],e=Tl([{color:[37,79,92],mode:"hcl",p:n[0]},{color:"aliceblue",mode:"hcl",p:2},{color:[51,26,155],mode:"hcl",p:15},{color:"gold",mode:"hcl",p:100},{color:"white",mode:"hcl",p:n[1]}]);return jl(n,e=Sl(e=Sl(e,0,[.6,3.4]),2,[12,18]),t)}),Bl=a.memoize(function(){return Nl([0,25],[[0,[0,0,0]],[25,[21,255,255]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}),Vl=a.memoize(function(){return Nl([0,100],[[0,[230,165,30]],[25,[120,100,95]],[60,[40,44,92]],[75,[21,13,193]],[90,[75,63,235]],[100,[25,255,255]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}),Yl=a.memoize(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,n=[1e-13,8.88e-7],e=n.map(Math.log),r=Tl([{color:[134,134,107],mode:"hcl",p:e[0]},{color:[144,144,117],mode:"hcl",p:Math.log(1e-12)},{color:[255,255,224],mode:"hcl",p:Math.log(7e-11)},{color:[0,0,128],mode:"lab",p:Math.log(1.9e-7)},{color:[23,20,18],mode:"lab",p:e[1]}]);return Ol(n,Al(e,r=Sl(r=Sl(r,1,[Math.log(5e-11),Math.log(9e-11)]),3,[Math.log(8e-8),Math.log(4e-7)]),t),Math.log,Math.exp)}),Jl=a.memoize(function(){return Nl([270,304.65],[[270,[255,255,255]],[271.25,[255,255,255]],[271.3,[15,4,168]],[273.15,[15,54,208]],[273.25,[15,54,188]],[275.65,[15,4,168]],[281.65,[24,132,14]],[291.15,[247,251,59]],[295,[235,167,0]],[299.65,[245,0,39]],[303,[87,17,0]],[304.65,[238,0,242]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}),Kl=a.memoize(function(){return Nl([-6,6],[[-6,[255,255,255]],[-3,[7,252,254]],[-1.5,[66,42,253]],[-.75,[34,55,134]],[0,[0,0,6]],[.75,[134,55,34]],[1.5,[253,14,16]],[3,[254,252,0]],[6,[255,255,255]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}),$l=a.memoize(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=[.002,2.5],e=n.map(Math.log);return Ol(n,Al(e,[function(t){var n=function(t){return sl(t)};return n.domain=function(){return t},n.mode=function(){return"cubehelix"},n}(e)],t),Math.log,Math.exp)}),Zl=a.memoize(function(){return Nl([0,1],[[0,[5,5,89]],[.2,[170,170,230]],[1,[255,255,255]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}),Ql=a.memoize(function(){return Nl([193,328],[[193,[37,4,42]],[206,[41,10,130]],[219,[81,40,40]],[233.15,[192,37,149]],[255.372,[70,215,215]],[273.15,[21,84,187]],[275.15,[24,132,14]],[291,[247,251,59]],[298,[235,167,21]],[311,[230,71,39]],[328,[88,27,67]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3)}),ts=a.memoize(function(){return Nl([0,70],[[0,[230,165,30]],[10,[120,100,95]],[20,[40,44,92]],[30,[21,13,193]],[40,[75,63,235]],[60,[25,255,255]],[70,[150,255,255]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}),ns=a.memoize(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=new Uint8Array(4*t);return kl(n,[0,1],[0,1],El),Ol([0,100],n)}),es=a.memoize(function(){return Nl([0,8e4],[[0,[15,4,96]],[250,[30,8,180]],[1e3,[121,102,2]],[2e3,[118,161,66]],[4e3,[50,102,219]],[8e3,[19,131,193]],[16e3,[59,204,227]],[64e3,[241,1,45]],[8e4,[243,0,241]]],arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4)}),rs={};function is(t){var n=t.type,e=t.key,r=+t.which;return function(t,n,e,r){if(n){switch(n){case"Esc":return"Escape"}return n}switch(e){case 27:return"Escape"}return"keypress"===t&&r?r:"NYI"}(n,e,r,String.fromCharCode(r))}function os(t){for(var n={language:"",script:"",region:""},e=(t||"").toLowerCase().split("-"),r=0;r<e.length;r++){var i=e[r];if(1===i.length)break;0===r?n.language=i:/^[a-z]{4}$/.test(i)?n.script=i.substring(0,1).toUpperCase()+i.substring(1):/^([a-z]{2}|\d{3})$/.test(i)&&(n.region=i.toUpperCase())}return n}function as(t){switch(t.language){case"en":return"en";case"cs":return"cs";case"fr":return"fr";case"ja":return"ja";case"pt":return"pt";case"ru":return"ru";case"zh":switch(t.script){case"Hant":return"zh-TW";case"Hans":return"zh-CN"}switch(t.region){case"HK":case"MO":case"TW":return"zh-TW";case"SG":case"CN":return"zh-CN"}}return""}!function(){var t=new Date("2016-02-20");function n(t){var n=(c.p()?"":"https://gaia.nullschool.net")+t,e=c.E();return e?n+"?"+e:n}function e(t){return"https://earth.nullschool.net"+t}function r(t){return n("/data/oscar/"+t)}rs.gaia=n;var u=c.t()?"":"(<a href='about.html#aot' class='internal-link'>AOT</a>)";function l(t){return c.c({descriptionHTML:"",paths:[],date:function(){return null},navigate:function(t){return f(this.date(),t)},navigateTo:function(t){return s(t)},loader:function(t){return/\.epak([/?#]|$)/.test(t)?c.x(t):c.y(t)},load:function(t){var n=this;return Promise.all(this.paths.map(this.loader)).then(function(e){return t.requested?null:c.c(n,n.builder.apply(n,e))})},alpha:{single:160,animated:112}},t)}function s(t,n){var e="current"===t?a.pick(pr.f(sc()),"year","month","day","hour"):a.clone(t);return e.hour=3*Math.floor(e.hour/3),e.minute=0,n&&(e=pr.d(pr.a(e,n))),e}function f(t,n){var e=3*(n>1?8:n<-1?-8:n);return pr.a(t,{hour:e})}function h(t,n){if("current"===t.date)return{dir:"current",stamp:"current",date:s(t.date,n)};var e=s(t.date,n);return{dir:pr.g(e,"{yyyy}/{MM}/{dd}"),stamp:pr.g(e,"{hh}{mm}"),date:e}}function p(r,i,o,a){var u=h(r),l=pr.b(u.date),s=l>=new Date("2014/11/24")?".epak":".json",f="0.5";l<new Date("2015/03/11")||c.q()&&!c.t()?f="1.0":l>new Date("2016/06/22")&&r.hd&&(f="0.25");var p=[u.stamp,i,o,a,"gfs",f].filter(c.w).join("-")+s;return function(r,i){return i<t?e("/data/weather/"+r):n("/data/gfs/"+r)}(u.dir+"/"+p,l)}function d(r,i,o){var a=h(r,o),u=pr.b(a.date),c=[a.stamp,i,"geos.epak"].join("-");return function(r,i){return i<t?e("/data/geos/"+r):n("/data/geos/"+r)}(a.dir+"/"+c,u)}function v(t,n){var e="current"===t?pr.f(sc()):t,r=e.year,i=e.month,o=e.day,a=e.hour;return{year:r,month:i,day:o,hour:Math.floor(a/n)*n,minute:0}}function m(t,n,e){var r=(e>1?8:e<-1?-8:e)*n;return pr.a(t,{hour:r})}function g(t,e,r){var i=v(t.date,r),o="current"===t.date,a=o?"current":pr.g(i,"{yyyy}/{MM}/{dd}"),u=o?"current":pr.g(i,"{hh}{mm}");return n("/data/cams/".concat(a,"/").concat(u,"-").concat(e,"-cams.epak"))}function y(r,i,o,a){var u=h(r),l=pr.b(u.date),s=[u.stamp,i,o,a,"wave","30m"].filter(c.w).join("-")+".epak";return function(r,i){return i<t?e("/data/ocean/"+r):n("/data/ww3/"+r)}(u.dir+"/"+s,l)}function b(t,n,e){if(e=+e||0,"current"===n)return t[t.length-1+e];var r=pr.g(n,"{yyyy}{MM}{dd}"),i=a.sortedIndex(t,r);return t[(i=0===(t[i]||"").indexOf(r)?i:i-1)+e]}function w(t,n,e){var r=b(t,n,e>1?6:e<-1?-6:e);return r?pr.e(r,/(\d{4})(\d\d)(\d\d)/):null}function _(t){var n;if("current"===t){var e=a.pick(pr.f(sc()),"year","month","day");n=pr.a(e,{day:-1})}else n=a.clone(t);return n}function x(t,n){var e=n>1?5:n<-1?-5:n;return pr.a(t,{day:e})}function M(r,i,o,a){var u=pr.b(_(r.date)),l="current"===r.date?"current":pr.g(r.date,"{yyyy}/{MM}");return function(r,i){return i<t?e("/data/ocean/"+r):n("/data/rtgsst/"+r)}(l+"/"+(["current"===l?"current":pr.g(r.date,"{yyyy}{MM}{dd}"),i,o,a,"rtg","0.5"].filter(c.w).join("-")+".epak"),u)}function E(t){var n="current"===t?pr.f(sc()):t,e=n.year,r=n.month,i=n.day,o=n.hour,a=n.minute;return{year:e,month:r,day:i,hour:o,minute:5*Math.floor(a/5)}}function T(t){return"surface"===t.surface?"Surface":c.e(t.level)}function S(t){return"surface"===t.surface?"地上":c.e(t.level)}function k(t){return function(n){var e={};return a.forEach(t,function(t,r){e[r]=t[n]||t.en||t}),e}}var A={wind:{matchesPrimary:function(){return!0},matchesOverlay:a.matches({overlayType:"wind"}),create:function(t){return l({type:"wind",descriptionHTML:k({name:{en:"Wind",ja:"風速"},qualifier:{en:" @ "+T(t),ja:"＠"+S(t)}}),paths:[p(t,"wind",t.surface,t.level)],date:function(){return s(t.date)},builder:function(t){return Oc(t)},units:[{label:"km/h",conversion:function(t){return 3.6*t},precision:0},{label:"m/s",conversion:function(t){return t},precision:1},{label:"kn",conversion:function(t){return 1.943844*t},precision:0},{label:"mph",conversion:function(t){return 2.236936*t},precision:0}],scale:ns(),particles:{velocityScale:.01,maxIntensity:15}})}},temp:{matchesOverlay:a.matches({overlayType:"temp"}),create:function(t){return l({type:"temp",descriptionHTML:k({name:{en:"Temp",ja:"気温"},qualifier:{en:" @ "+T(t),ja:" @ "+S(t)}}),paths:[p(t,"temp",t.surface,t.level)],date:function(){return s(t.date)},builder:function(t){return Mc(t,/Temperature/,Ac,["Temperature"])},units:[{label:"°C",conversion:function(t){return t-273.15},precision:1},{label:"°F",conversion:function(t){return 9*t/5-459.67},precision:1},{label:"K",conversion:function(t){return t},precision:1}],scale:Ql()})}},relative_humidity:{matchesOverlay:a.matches({overlayType:"relative_humidity"}),create:function(t){return l({type:"relative_humidity",descriptionHTML:k({name:{en:"Relative Humidity",ja:"相対湿度"},qualifier:{en:" @ "+T(t),ja:" @ "+S(t)}}),paths:[p(t,"relative_humidity",t.surface,t.level)],date:function(){return s(t.date)},builder:function(t){return Mc(t,/Relative_humidity/,Ac)},units:[{label:"%",conversion:function(t){return t},precision:0}],scale:Vl()})}},air_density:{matchesOverlay:a.matches({overlayType:"air_density"}),create:function(t){return l({type:"air_density",descriptionHTML:k({name:{en:"Air Density",ja:"空気密度"},qualifier:{en:" @ "+T(t),ja:" @ "+S(t)}}),paths:[p(t,"air_density",t.surface,t.level)],date:function(){return s(t.date)},builder:function(t){return Mc(t,/air_density/,Ac)},units:[{label:"kg/m³",conversion:function(t){return t},precision:2}],scale:Rl()})}},wind_power_density:{matchesOverlay:a.matches({overlayType:"wind_power_density"}),create:function(t){var n=A.wind.create(t),e=A.air_density.create(t);return l({type:"wind_power_density",descriptionHTML:k({name:{en:"Instant Wind Power Density",ja:"風力エネルギー密度"},qualifier:{en:" @ "+T(t),ja:" @ "+S(t)}}),paths:[n.paths[0],e.paths[0]],date:function(){return s(t.date)},builder:function(t,n){return function(t,n){var e=Oc(t),r=Mc(n,/air_density/,Ac,["air_density"]),i=e.field().valueAt,o=e.field().nearest,a=e.field().bilinear,u=r.field().valueAt,l=r.field().nearest,s=r.field().bilinear;function f(t,n){var e=t[2];return.5*n*e*e*e}function h(t){return f(i(t),u(t))}function p(t){return f(o(t),l(t))}function d(t){return f(a(t),s(t))}return c.c(r,{field:function(){return{type:"scalar",valueAt:h,nearest:p,bilinear:d}},interpolate:function(t){return d(t)}})}(t,n)},units:[{label:"kW/m<sup>2</sup>",tooltip:"kW/m²",conversion:function(t){return t/1e3},precision:1},{label:"W/m<sup>2</sup>",tooltip:"W/m²",conversion:function(t){return t},precision:0}],scale:es()})}},misery_index:{matchesOverlay:a.matches({overlayType:"misery_index"}),create:function(t){return l({type:"misery_index",descriptionHTML:k({name:{en:"Misery (Wind Chill & Heat Index)",ja:"体感温度"},qualifier:{en:" @ "+T(t),ja:" @ "+S(t)}}),paths:[p(t,"misery_index")],date:function(){return s(t.date)},builder:function(t){return Mc(t,/misery_index/,Ac)},units:function(){var t=function(t){return t[c.F()]||t.en}({en:" (feels like)",ja:"（体感温度）"});return[{label:"°C"+t,conversion:function(t){return t-273.15},precision:1},{label:"°F"+t,conversion:function(t){return 9*t/5-459.67},precision:1},{label:"K"+t,conversion:function(t){return t},precision:1}]}(),scale:Hl()})}},total_cloud_water:{matchesOverlay:a.matches({overlayType:"total_cloud_water"}),create:function(t){return l({type:"total_cloud_water",descriptionHTML:k({name:{en:"Total Cloud Water",ja:"雲水量"},qualifier:""}),paths:[p(t,"total_cloud_water")],date:function(){return s(t.date)},builder:function(t){return Mc(t,/Cloud_water/,Ac,["Cloud_water"])},units:[{label:"kg/m<sup>2</sup>",tooltip:"kg/m²",conversion:function(t){return t},precision:3}],scale:Zl()})}},total_precipitable_water:{matchesOverlay:a.matches({overlayType:"total_precipitable_water"}),create:function(t){return l({type:"total_precipitable_water",descriptionHTML:k({name:{en:"Total Precipitable Water",ja:"可降水量"},qualifier:""}),paths:[p(t,"total_precipitable_water")],date:function(){return s(t.date)},builder:function(t){return Mc(t,/Precipitable_water/,Ac,["Precipitable_water"])},units:[{label:"kg/m<sup>2</sup>",tooltip:"kg/m²",conversion:function(t){return t},precision:3}],scale:ts()})}},mean_sea_level_pressure:{matchesOverlay:a.matches({overlayType:"mean_sea_level_pressure"}),create:function(t){return l({type:"mean_sea_level_pressure",descriptionHTML:k({name:{en:"Mean Sea Level Pressure",ja:"海面更正気圧"},qualifier:""}),paths:[p(t,"mean_sea_level_pressure")],date:function(){return s(t.date)},builder:function(t){return Mc(t,/Pressure_reduced_to_MSL/,Ac,["Pressure_reduced_to_MSL"])},units:[{label:"hPa",conversion:function(t){return t/100},precision:0},{label:"mmHg",conversion:function(t){return t/133.322387415},precision:0},{label:"inHg",conversion:function(t){return t/3386.389},precision:1}],scale:Gl()})}},precip_3hr:{matchesOverlay:a.matches({overlayType:"precip_3hr"}),create:function(t){return l({type:"precip_3hr",descriptionHTML:k({name:{en:"Next 3-hr Precip Accumulation",ja:"3時間の降水量"},qualifier:""}),paths:[p(t,"precip_3hr")],date:function(){return s(t.date)},builder:function(t){return Mc(t,/precip_accumulation_3hr/,Ac)},units:[{label:"mm",tooltip:"mm",conversion:function(t){return t},precision:1},{label:"in",tooltip:"in",conversion:function(t){return t/25.4},precision:2},{label:"kg/m<sup>2</sup>",tooltip:"kg/m²",conversion:function(t){return t},precision:1}],alpha:{single:160,animated:160},scale:Wl()})}},cape:{matchesOverlay:a.matches({overlayType:"cape"}),create:function(t){return l({type:"cape",descriptionHTML:k({name:{en:"CAPE (Surface)",ja:"対流有効位置エネルギー（地上）"},qualifier:""}),paths:[p(t,"cape")],date:function(){return s(t.date)},builder:function(t){return Mc(t,/Convective_available_potential_energy_surface/,Ac)},units:[{label:"J/kg",tooltip:"J/kg",conversion:function(t){return t},precision:0}],alpha:{single:160,animated:140},scale:Fl()})}},co2:{matchesOverlay:a.matches({overlayType:"co2"}),create:function(t){return l({type:"co2",descriptionHTML:k({name:{en:"Carbon Dioxide Mixing Ratio",ja:"二酸化炭素混合比"},qualifier:""}),paths:[d(t,"co2")],date:function(){return s(t.date)},builder:function(t){return Mc(t,/CO2CL/,Sc)},units:[{label:"µmol/mol",conversion:function(t){return 1e6*t},precision:1}],alpha:{single:160,animated:160},scale:zl()})}},cosc:{matchesOverlay:a.matches({overlayType:"cosc"}),create:function(t){return l({type:"cosc",descriptionHTML:k({name:{en:"Carbon Monoxide Conc.",ja:"一酸化炭素濃度"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[d(t,"cosc")],date:function(){return s(t.date)},builder:function(t){return Mc(t,/COSC/,Sc)},units:[{label:"ppbv",conversion:function(t){return t},precision:0},{label:"ppmv",conversion:function(t){return t/1e3},precision:2}],alpha:{single:160,animated:140},scale:Il()})}},so2smass:{matchesOverlay:a.matches({overlayType:"so2smass"}),create:function(t){return l({type:"so2smass",descriptionHTML:k({name:{en:"Sulfur Dioxide Mass",ja:"二酸化硫黄質量"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[d(t,"so2smass")],date:function(){return s(t.date)},builder:function(t){return Mc(t,/SO2SMASS/,Sc)},units:[{label:"µg/m<sup>3</sup>",tooltip:"µg/m³",conversion:function(t){return 1e9*t},precision:2}],alpha:{single:160,animated:140},scale:Yl()})}},duexttau:{matchesOverlay:a.matches({overlayType:"duexttau"}),create:function(t){return l({type:"duexttau",descriptionHTML:k({name:{en:"Dust Extinction "+u,ja:"粒子消散係数 "+u},qualifier:""}),paths:[d(t,"duexttau")],date:function(){return s(t.date)},builder:function(t){return Mc(t,/DUEXTTAU/,Sc)},units:[{label:"τ",conversion:function(t){return t},precision:4}],alpha:{single:160,animated:140},scale:ql()})}},suexttau:{matchesOverlay:a.matches({overlayType:"suexttau"}),create:function(t){return l({type:"suexttau",descriptionHTML:k({name:{en:"Sulfate Extinction "+u,ja:"硫酸塩消散係数 "+u},qualifier:""}),paths:[d(t,"suexttau")],date:function(){return s(t.date)},builder:function(t){return Mc(t,/SUEXTTAU/,Sc)},units:[{label:"τ",conversion:function(t){return t},precision:3}],alpha:{single:160,animated:140},scale:$l()})}},co2sc:{matchesOverlay:a.matches({overlayType:"co2sc"}),create:function(t){var n=s(t.date,{minute:90}),e=pr.b({year:2017,month:1,day:24,hour:4,minute:30}),r=pr.b(n)<e,i=r?32:0;return l({type:"co2sc",descriptionHTML:k({name:{en:"Carbon Dioxide Concentration",ja:"二酸化炭素濃度"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[d(t,"co2sc",{minute:90})],date:function(){return n},navigate:function(t){return f(this.date(),t)},navigateTo:function(t){return s(t,{minute:90})},builder:function(t){return Mc(t,/CO2SC/,r?kc:Sc,null,function(t){for(var n=0;n<t.length;n++)t[n]+=i})},units:[{label:"ppmv",conversion:function(t){return t},precision:0}],alpha:{single:200,animated:150},scale:Ll(r?-8:0)})}},currents:{matchesPrimary:function(){var t=a.matches({surface:"surface",level:"currents"}),n=a.matches({param:"argo",surface:"pressure"});return function(e){return t(e)||n(e)}}(),matchesOverlay:a.matches({overlayType:"currents"}),create:function(t){return c.z(r("oscar-catalog.json")).then(function(n){return l({type:"currents",descriptionHTML:k({name:{en:"Ocean Currents",ja:"海流"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[function(t,n){var e=b(t,n.date);return e?r(e):null}(n,t)],date:function(){return function(t,n){var e=b(t,n);return e?pr.e(e,/(\d{4})(\d\d)(\d\d)/):null}(n,t.date)},navigate:function(t){return w(n,this.date(),t)},navigateTo:function(t){return w(n,t,0)},builder:function(t){return function(t){var n=t,e=n.header.variables,r=e.u,i=e.v,o=e[r.dimensions[0]],a=e[r.dimensions[2]],u=e[r.dimensions[3]],l=c.A(n.blocks[r.data.block],n.blocks[i.data.block]),s=pc(u.sequence,a.sequence),f=xc(s,l);return{sourceHTML:"OSCAR / Earth & Space Research",date:function(){return pr.f(o.data[0])},grid:function(){return s},field:function(){return{type:"vector",valueAt:function(t){var n=2*t,e=l[n],r=l[n+1];return[e,r,Math.sqrt(e*e+r*r)]},nearest:wc(s,l),bilinear:xc(s,l)}},interpolate:function(t){return f(t)}}}(t)},units:[{label:"m/s",conversion:function(t){return t},precision:2},{label:"km/h",conversion:function(t){return 3.6*t},precision:1},{label:"kn",conversion:function(t){return 1.943844*t},precision:1},{label:"mph",conversion:function(t){return 2.236936*t},precision:1}],scale:Dl(),particles:{velocityScale:1/7,maxIntensity:.7}})})}},primary_waves:{matchesPrimary:a.matches({param:"ocean",surface:"primary",level:"waves"}),matchesOverlay:a.matches({overlayType:"primary_waves"}),create:function(t){return l({type:"primary_waves",descriptionHTML:k({name:{en:"Peak Wave Period",ja:"ピーク波周期"},qualifier:""}),paths:[y(t,"primary")],date:function(){return s(t.date)},builder:function(t){return function(t){for(var n=t,e=n.header.variables,r=e.Primary_wave_direction_surface,o=e.Primary_wave_mean_period_surface,a=e[r.dimensions[0]],u=e[r.dimensions[1]],c=e[r.dimensions[2]],l=n.blocks[r.data.block],s=n.blocks[o.data.block],f=new Float32Array(2*l.length),h=0;h<l.length;h++){var p=2*h,d=l[h]*i.b,v=s[h];d<7e37&&v<7e37?(f[p]=-v*Math.sin(d),f[p+1]=-v*Math.cos(d)):f[p]=f[p+1]=7e37}var m=pc(c.sequence,u.sequence),g=xc(m,f);return{sourceHTML:Nc,date:function(){return pr.f(a.data[0])},grid:function(){return m},field:function(){return{type:"vector",valueAt:function(t){var n=2*t,e=f[n],r=f[n+1];return[e,r,Math.sqrt(e*e+r*r)]},nearest:wc(m,f),bilinear:xc(m,f)}},interpolate:function(t){return g(t)}}}(t)},units:[{label:"sec",conversion:function(t){return t},precision:1}],scale:Bl(),particles:{velocityScale:1/612,maxIntensity:12,waves:!0}})}},sea_surface_temp:{matchesOverlay:a.matches({overlayType:"sea_surface_temp"}),create:function(t){return l({type:"sea_surface_temp",descriptionHTML:k({name:{en:"Sea Surface Temp",ja:"海面水温"},qualifier:""}),paths:[M(t,"sea_surface_temp")],date:function(){return _(t.date)},navigate:function(t){return x(this.date(),t)},navigateTo:function(t){return x(t,0)},builder:function(t){return Mc(t,/Temperature_surface_sparse/,jc)},units:[{label:"°C",conversion:function(t){return t-273.15},precision:1},{label:"°F",conversion:function(t){return 9*t/5-459.67},precision:1},{label:"K",conversion:function(t){return t},precision:1}],scale:Jl()})}},sea_surface_temp_anomaly:{matchesOverlay:a.matches({overlayType:"sea_surface_temp_anomaly"}),create:function(t){return l({type:"sea_surface_temp_anomaly",descriptionHTML:k({name:{en:"SST Anomaly",ja:"海面水温異常"},qualifier:""}),paths:[M(t,"sea_surface_temp_anomaly")],date:function(){return _(t.date)},navigate:function(t){return x(this.date(),t)},navigateTo:function(t){return x(t,0)},builder:function(t){return Mc(t,/Temperature_surface_anomaly_sparse/,jc)},units:[{label:"°C",conversion:function(t){return t},precision:1},{label:"°F",conversion:function(t){return 9*t/5},precision:1},{label:"K",conversion:function(t){return t},precision:1}],scale:Kl()})}},significant_wave_height:{matchesOverlay:a.matches({overlayType:"significant_wave_height"}),create:function(t){return l({type:"significant_wave_height",descriptionHTML:k({name:{en:"Significant Wave Height",ja:"有義波高"},qualifier:""}),paths:[y(t,"sig_height")],date:function(){return s(t.date)},builder:function(t){return Mc(t,/Significant_height/,Nc)},units:[{label:"m",conversion:function(t){return t},precision:2},{label:"ft",conversion:function(t){return 100*t/2.54/12},precision:1}],scale:Ul()})}},aurora:{matchesOverlay:a.matches({overlayType:"aurora"}),create:function(t){function e(){return E(t.date)}return l({type:"aurora",descriptionHTML:k({name:{en:"Probability of Visible Aurora",ja:"オーロラが見える確率"},qualifier:""}),paths:[function(t){var e=E(t.date),r="current"===t.date,i=r?"current":pr.g(e,"{yyyy}/{MM}/{dd}"),o=r?"current":pr.g(e,"{yyyy}{MM}{dd}{hh}{mm}");return n("/data/ovation/".concat(i,"/").concat(o,"-ovation.json"))}(t)],date:e,navigate:function(t){return function(t,n){var e=n>1?12:n<-1?-12:n;return pr.d(pr.a(t,{minute:5*e}))}(e(),t)},navigateTo:function(t){return E(t)},builder:function(t){return c.c(function(t){var n=t.Conventions,e=(t.title,t.institution,t.source),r=(t.references,t.units,t.date),i=(t.init,t.encoding);if("earth.nullschool.net/flat-1.0"!==n)throw new Error("Unsupported data conventions: ".concat(a.escape(n)));var u={start:+t.lon.start,delta:+t.lon.delta,size:Object(o.a)(+t.lon.size,0,8192)},c={start:+t.lat.start,delta:+t.lat.delta,size:Object(o.a)(+t.lat.size,0,8192)},l=Array.isArray(t.data)?t.data:[],s=function(t){return t};if(i)switch(i.type){case"packed_delta_rle":var f=i.scale_factor,h=void 0===f?1:f,p=i.add_offset,d=void 0===p?0:p;s=function(t){return Ec.b(t,+h,+d,u.size)};break;default:throw new Error("Unsupported encoding: ".concat(a.escape(i.type)))}var v=new Float32Array(u.size*c.size),m=0;l.filter(Array.isArray).forEach(function(t){var n=s(t);v.set(n,m),m+=n.length});var g=pc(u,c),y={type:"scalar",valueAt:function(t){return v[t]},nearest:bc(g,v),bilinear:_c(g,v)};return{sourceHTML:a.escape(e),date:function(){return pr.f(r)},grid:function(){return g},field:function(){return y},interpolate:function(t){return y.bilinear(t)}}}(t),{sourceHTML:"OVATION / SWPC / NCEP / NWS / NOAA"})},units:[{label:"% Visibility Chance",tooltip:"% Visibility Chance",conversion:function(t){return t},precision:0}],alpha:{single:160,animated:140},scale:Cl()})}},pm1:{matchesOverlay:a.matches({overlayType:"pm1"}),create:function(t){return l({type:"pm1",descriptionHTML:k({name:{en:"Particulate Matter < 1 µm",ja:"粒子径1µm以下（PM<sub>1</sub>）"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[g(t,"pm1",1)],date:function(){return v(t.date,1)},navigate:function(t){return m(this.date(),1,t)},navigateTo:function(t){return v(t,1)},builder:function(t){return Mc(t,/pm1/,Tc)},units:[{label:"µg/m<sup>3</sup>",tooltip:"µg/m³",conversion:function(t){return 1e9*t},precision:0}],alpha:{single:160,animated:140},scale:Xl()})}},"pm2.5":{matchesOverlay:a.matches({overlayType:"pm2.5"}),create:function(t){return l({type:"pm2.5",descriptionHTML:k({name:{en:"Particulate Matter < 2.5 µm",ja:"微小粒子状物質（PM<sub>2.5</sub>）"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[g(t,"pm2p5",1)],date:function(){return v(t.date,1)},navigate:function(t){return m(this.date(),1,t)},navigateTo:function(t){return v(t,1)},builder:function(t){return Mc(t,/pm2p5/,Tc)},units:[{label:"µg/m<sup>3</sup>",tooltip:"µg/m³",conversion:function(t){return 1e9*t},precision:0}],alpha:{single:160,animated:140},scale:Xl()})}},pm10:{matchesOverlay:a.matches({overlayType:"pm10"}),create:function(t){return l({type:"pm10",descriptionHTML:k({name:{en:"Particulate Matter < 10 µm",ja:"粒子径10µm以下（PM<sub>10</sub>）"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[g(t,"pm10",1)],date:function(){return v(t.date,1)},navigate:function(t){return m(this.date(),1,t)},navigateTo:function(t){return v(t,1)},builder:function(t){return Mc(t,/pm10/,Tc)},units:[{label:"µg/m<sup>3</sup>",tooltip:"µg/m³",conversion:function(t){return 1e9*t},precision:0}],alpha:{single:160,animated:140},scale:Xl()})}},off:{matchesOverlay:a.matches({overlayType:"off"}),create:function(){return null}}};rs.productsFor=function(t){var n=null,e=null;a.values(A).forEach(function(r){a.isFunction(r.matchesPrimary)&&r.matchesPrimary(t)&&(n=r),a.isFunction(r.matchesOverlay)&&r.matchesOverlay(t)&&r!==n&&(e=r)});var r=[];return n&&r.push(n.create(t)),e&&r.push(e.create(t)),r.filter(c.v)},rs.overlayTypes=function(){return ac(Object.keys(A))},rs.argoUrl=function(t){return n("/data/argo/"+t)}}();var us=e(14),cs=e(23);function ls(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function ss(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fs(t,n,e){return n&&ss(t.prototype,n),e&&ss(t,e),t}var hs=Object(us.a)();function ps(t){throw new Error(t)}var ds=function(){function t(){ls(this,t)}return fs(t,null,[{key:"getWebGL",value:function(t,n){var e;try{e=t.getContext("webgl",n)}catch(t){}if(!e)try{e=t.getContext("experimental-webgl",n)}catch(t){}return e||void 0}},{key:"planeVertexShader",value:function(){return cs}},{key:"unitPlaneAttributes",value:function(){return{a_Position:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a_TexCoord:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])}}},{key:"attach",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ps,e={PACK_ALIGNMENT:1,UNPACK_ALIGNMENT:1,UNPACK_FLIP_Y_WEBGL:!1,UNPACK_PREMULTIPLY_ALPHA_WEBGL:!1,UNPACK_COLORSPACE_CONVERSION_WEBGL:t.BROWSER_DEFAULT_WEBGL},r=Object.keys(e),i={TEXTURE_MIN_FILTER:t.NEAREST,TEXTURE_MAG_FILTER:t.NEAREST,TEXTURE_WRAP_S:t.CLAMP_TO_EDGE,TEXTURE_WRAP_T:t.CLAMP_TO_EDGE},o=Object.keys(i);function u(e){var r=t.getError();r&&n("".concat(r,":").concat(e))}return new(function(){function l(){ls(this,l)}return fs(l,[{key:"makePlaneVertexShader",value:function(){return this.makeShader(t.VERTEX_SHADER,cs)}},{key:"unitPlaneAttributes",value:function(){return{a_Position:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a_TexCoord:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])}}},{key:"makeShader",value:function(e,r){var i=t.createShader(e);u("createShader:".concat(e)),t.shaderSource(i,r),u("shaderSource:".concat(e)),t.compileShader(i),u("compileShader:".concat(e));var o=t.getShaderParameter(i,t.COMPILE_STATUS);if(u("getShaderParameter:".concat(e)),!o){var a=t.getShaderInfoLog(i);return u("getShaderInfoLog:".concat(e)),t.deleteShader(i),u("deleteShader:".concat(e)),n(a),null}return i}},{key:"makeProgram",value:function(e){var r=t.createProgram();u("createProgram"),e.forEach(function(n){t.attachShader(r,n),u("attachShader")}),t.linkProgram(r),u("linkProgram");var i=t.getProgramParameter(r,t.LINK_STATUS);if(u("getProgramParameter"),!i){var o=t.getProgramInfoLog(r);return u("getProgramInfoLog"),t.deleteProgram(r),u("deleteProgram"),n(o),null}return r}},{key:"makeFramebufferTexture2D",value:function(n){var e=t.createFramebuffer();u("createFramebuffer"),t.bindFramebuffer(t.FRAMEBUFFER,e),u("bindFramebuffer"),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),u("framebufferTexture2D");var r=t.checkFramebufferStatus(t.FRAMEBUFFER);return u("checkFramebufferStatus"),r!==t.FRAMEBUFFER_COMPLETE?(t.deleteFramebuffer(e),u("deleteFramebuffer"),callback("framebuffer: "+r),null):e}},{key:"uniforms",value:function(n,e){var r={},i=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);return u("getProgramParameter"),a.range(i).map(function(e){var r=t.getActiveUniform(n,e);return u("getActiveUniform:".concat(e)),r}).filter(function(t){return!!t}).forEach(function(e){var i=t.getUniformLocation(n,e.name);u("getUniformLocation:".concat(e.name)),r[e.name]={name:e.name,type:e.type,size:e.size,location:i}}),new(function(){function n(){ls(this,n)}return fs(n,[{key:"decls",value:function(){return r}},{key:"set",value:function(n){return Object.keys(n).forEach(function(i){!function(n,i){var o=r[n]||{},a=o.location;switch(o.type){case t.FLOAT:return c.n(i)?t.uniform1fv(a,i):t.uniform1f(a,i);case t.FLOAT_VEC2:return t.uniform2fv(a,i);case t.FLOAT_VEC3:return t.uniform3fv(a,i);case t.FLOAT_VEC4:return t.uniform4fv(a,i);case t.INT:return c.n(i)?t.uniform1iv(a,i):t.uniform1i(a,i);case t.INT_VEC2:return t.uniform2iv(a,i);case t.INT_VEC3:return t.uniform3iv(a,i);case t.INT_VEC4:return t.uniform4iv(a,i);case t.SAMPLER_2D:var u=e[i];return u?void t.uniform1i(a,u.unit):void hs.warn("uniform '".concat(n,"' refers to unknown texture '").concat(i,"'"));default:hs.warn("uniform '".concat(n,"' has unsupported type: ").concat(JSON.stringify(o)))}}(i,n[i]),u("assign-uniform:".concat(i))}),this}}]),n}())}},{key:"attribs",value:function(n){var e={},r=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES);return u("getProgramParameter"),a.range(r).map(function(e){var r=t.getActiveAttrib(n,e);return u("getActiveAttrib:".concat(e)),r}).filter(function(t){return!!t}).forEach(function(r){var i=t.getAttribLocation(n,r.name);u("getAttribLocation:".concat(r.name)),e[r.name]={name:r.name,type:r.type,size:r.size,location:i}}),new(function(){function n(){ls(this,n)}return fs(n,[{key:"decls",value:function(){return e}},{key:"set",value:function(n){return Object.keys(n).forEach(function(r){!function(n,r){var i=e[n]||{},o=i.location;switch(i.type){case t.FLOAT_VEC2:var a=t.createBuffer();return u("createBuffer:".concat(n)),t.bindBuffer(t.ARRAY_BUFFER,a),u("bindBuffer:".concat(n)),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),u("bufferData:".concat(n)),t.enableVertexAttribArray(o),u("enableVertexAttribArray:".concat(n)),t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0);default:hs.warn("attribute '".concat(n,"' has unsupported type: ").concat(JSON.stringify(i)))}}(r,n[r]),u("assign-attrib:".concat(r))}),this}}]),n}())}},{key:"makeTexture2D",value:function(n){var a=t.createTexture();u("createTexture"),t.activeTexture(t.TEXTURE0),u("activeTexture"),t.bindTexture(t.TEXTURE_2D,a),u("bindTexture");var l=c.c({},e,i,n),s=l.format,f=l.type,h=l.width,p=l.height,d=l.data;return r.forEach(function(n){t.pixelStorei(t[n],l[n]),u("pixelStorei:".concat(n))}),t.texImage2D(t.TEXTURE_2D,0,s,h,p,0,s,f,d),u("texImage2D"),o.forEach(function(n){t.texParameteri(t.TEXTURE_2D,t[n],l[n]),u("texParameteri:".concat(n))}),t.bindTexture(t.TEXTURE_2D,null),u("bindTexture"),a}},{key:"updateTexture2D",value:function(n,a){t.activeTexture(t.TEXTURE0),u("activeTexture"),t.bindTexture(t.TEXTURE_2D,n),u("bindTexture");var l=c.c({},e,i,a),s=l.format,f=l.type,h=l.width,p=l.height,d=l.data;return r.forEach(function(n){t.pixelStorei(t[n],l[n]),u("pixelStorei:".concat(n))}),t.texSubImage2D(t.TEXTURE_2D,0,0,0,h,p,s,f,d),u("texSubImage2D"),o.forEach(function(n){t.texParameteri(t.TEXTURE_2D,t[n],l[n]),u("texParameteri:".concat(n))}),t.bindTexture(t.TEXTURE_2D,null),u("bindTexture"),n}},{key:"updateTexture2DParams",value:function(n,e,r){for(var a=!1,c=0;c<o.length;c++){var l=o[c],s=i[l],f=e[l]||s;f!==(r[l]||s)&&(a||(a=!0,t.activeTexture(t.TEXTURE0),u("activeTexture"),t.bindTexture(t.TEXTURE_2D,n),u("bindTexture")),t.texParameteri(t.TEXTURE_2D,t[l],f),u("texParameteri:".concat(l)))}return a&&(t.bindTexture(t.TEXTURE_2D,null),u("bindTexture")),a}},{key:"context",get:function(){return t}}]),l}())}}]),t}(),vs=e(27),ms=e(26),gs=function(t,n,e,r,i){var o=void 0!==n,u=o?n:t,l=o?t.getContext("2d"):void 0,s=ds.getWebGL(u),f=ds.attach(s);s.getExtension("OES_texture_float"),s.getExtension("OES_texture_float_linear"),s.disable(s.DEPTH_TEST),s.clearColor(0,0,0,0);var h=f.makeShader(s.VERTEX_SHADER,ds.planeVertexShader()),p={},d=a.range(8).map(function(){return null}),v=1,m=[],g=null,y=-1,b=-1;function w(t){return Object.keys(t).map(function(n){return p[n]=function(t,n){if(n){var e=n.def;if(t.hash===e.hash)return f.updateTexture2DParams(n.texture,t,e)?{def:a.omit(t,"data"),texture:n.texture}:n;if(t.width===e.width&&t.height===e.height&&t.format===e.format&&t.type===e.type)return f.updateTexture2D(n.texture,t),{def:a.omit(t,"data"),texture:n.texture};s.deleteTexture(n.texture)}var r=f.makeTexture2D(t);return{def:a.omit(t,"data"),texture:r}}(t[n],p[n])})}var _=void 0;function x(t){var n=s.getError();return 0!==n&&void 0===_&&(_={context:t,err:n}),void 0!==_}return{failure:function(){return _},draw:function(){var n=r();if(function(n){var e=Math.round(n.width*n.pixelRatio),r=Math.round(n.height*n.pixelRatio);e===y&&r===b||(t.width=u.width=e,t.height=u.height=r,s.viewport(0,0,e,r),y=e,b=r)}(n),x("fast_resize"))return!1;if(s.clear(s.COLOR_BUFFER_BIT),l&&Iu(l),x("fast_clear"))return!1;var _=i(f);if(0===_.length)return!1;var M=a.flatten(_.map(function(t){return t.shaderSource()}));if(c.b(m,M)||function(t){var n=vs+t.join("")+ms,e=f.makeShader(s.FRAGMENT_SHADER,n),r=f.makeProgram([h,e]);f.attribs(r).set(ds.unitPlaneAttributes()),m=t,r,g=f.uniforms(r,p),s.useProgram(r)}(M),x("fast_program"))return!1;for(v=1,_.forEach(function(t){return function(t){t.forEach(function(t){var n=t.texture;d[v]!==n&&(d[v]=n,s.activeTexture(s.TEXTURE0+v),s.bindTexture(s.TEXTURE_2D,n)),t.unit=v++})}(w(t.textures()))});v<d.length;)d[v++]=null;return!x("fast_textures")&&(_.forEach(function(t){return g.set(t.uniforms())}),g.set({u_Detail:n.pixelRatio,u_Alpha:e()}),!x("fast_uniforms")&&(s.drawArrays(s.TRIANGLES,0,6),o&&l.drawImage(u,0,0),!x("fast_draw")))}}},ys=300,bs=300,ws=1,_s=zu(ys/2,0,0,ys/2,ys/2),xs=pc({start:0,delta:120,size:3},{start:60,delta:-60,size:3}),Ms=new Float32Array([1,0,2,0,3,0,4,0,5,0,8,0,6,0,8,0,7e37,7e37]),Es=xc(xs,Ms),Ts=Nl([0,7],[[0,[255,255,255]],[1,[0,0,255]],[2,[0,255,0]],[3,[0,255,255]],[4,[255,0,0]],[5,[255,0,255]],[6,[255,255,0]],[7,[255,255,255]]],8);function Ss(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ks(t){var n=Object.keys(t),e=u.a.apply(void 0,["change"].concat(n.map(function(t){return"change:".concat(t)}))),r=Object(c.J)(t),i=0;return new(function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,n,e){n&&Ss(t.prototype,n),e&&Ss(t,e)}(t,[{key:"on",value:function(t,n){var r=function(t){return t.trim().split(/^|\s+/).map(function(t){return t.replace("?",i++)})}(t),o=e.on(r.join(" "),n);return arguments.length<2?o:r}},{key:"get",value:function(t){return r[t]}},{key:"getAll",value:function(){return Object(c.J)(r)}},{key:"save",value:function(t,n){var i=Object(c.J)(),o=Object(c.J)();Object.keys(t).forEach(function(n){if(!(n in r))throw new Error("unknown key: ".concat(n));var e=t[n],u=r[n];a.isEqual(e,u)||(i[n]=e,o[n]=u)});var u=Object.keys(i);u.length>0&&(u.forEach(function(t){return r[t]=i[t]}),u.forEach(function(t){return e.call("change:".concat(t),null,i[t],o[t],n)}),e.call("change",null,i,o,n))}}]),t}())}var As=rs.overlayTypes();function js(){return Object(c.J)({date:"current",param:"wind",surface:"surface",level:"level",projection:"orthographic",orientation:"",overlayType:"default",showGridPoints:!1,animate:!0,loc:null,argoFloat:null})}var Ns=ks(function(){var t=Object(c.J)();return Object.keys(js()).forEach(function(n){return t[n]=void 0}),t}());function Os(){var t=function(t){var n,e=/^#(current|(\d{4})\/(\d{1,2})\/(\d{1,2})\/(\d{3,4})Z)\/(\w+)\/(\w+)\/(\w+)([\/].+)?/.exec(t);if(!e)return js();var i="current"===e[1]?"current":{year:+e[2],month:+e[3],day:+e[4]};if("current"!==i){var o=(3===e[5].length?"0":"")+e[5];i.hour=+o.substr(0,2),i.minute=+o.substr(2)}var u=js();return u.date=i,u.param=e[6],u.surface=e[7],u.level=e[8],Object(c.f)(e[9],"").split("/").forEach(function(t){if(n=/^(\w+)(=([\d\-.,]*))?$/.exec(t)){if(a.has(r,n[1]))u.projection=n[1],u.orientation=Object(c.f)(n[3],"");else if("loc"===n[1]){var e=a.isString(n[3])?n[3].split(","):[],i=+e[0],o=+e[1];i==i&&o==o&&(u.loc=[i,o])}}else if(n=/^overlay=([\w.]+)$/.exec(t))(As.has(n[1])||"default"===n[1])&&(u.overlayType=n[1]);else if(n=/^grid=(\w+)$/.exec(t))"on"===n[1]&&(u.showGridPoints=!0);else if(n=/^anim=(\w+)$/.exec(t))"off"===n[1]&&(u.animate=!1);else if(n=/^argo=(\w+)$/.exec(t))switch(n[1]){case"planned":case"recent":case"operational":case"dead":u.argoFloat=n[1]}}),u}(window.location.hash);Ns.save(t,{source:"hash"})}function Ps(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(t){var n=t.date,e=t.param,r=t.surface,i=t.level,o=t.projection,a=t.orientation,u=t.overlayType,c=t.showGridPoints,l=t.animate,s=t.loc,f=t.argoFloat,h="current"===n?"current":pr.g(n,"{yyyy}/{MM}/{dd}/{hh}{mm}Z"),p=[o,a].filter(function(t){return t}).join("="),d=u&&"default"!==u?"overlay="+u:"",v=s?"loc="+s.map(function(t){return t.toFixed(3)}).join(","):"";return"#"+[h,e,r,i,l?"":"anim=off",d,c?"grid=on":"",f?"argo="+f:"",p,v].filter(function(t){return t}).join("/")}(Ns.getAll());window.location.hash!==r&&"hash"!==e.source&&(window.location.hash=r)}var Rs=ks({hd:void 0,topology:void 0});function Cs(){Rs.save({hd:!1,topology:Object(c.u)()?"/earth-topo-mobile.json?v3":"earth-topo.json?v3"})}function Fs(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function zs(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ls(t){var n=t.log,e=t.bridge;n.debug("start...");var f=150,h=10,d=6,v=750,m=10,g=1,y=7,b=.75,w=40,_=[7e37,7e37,7e37],x=[7e37,7e37,0],M=[0,0,0,0],E=c.H(),T=function(){var t=l.a("#status"),r=l.a("#progress"),i="▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫".length,o=c.d(e,"showMessage")||function(n){t.text(n)};return{status:function(n){return t.classed("bad")?t:o(n,!1)},error:function(e,r){var i=e.status?"".concat(e.status," ").concat(e.message):e.message||e;switch(e.status){case-1:i="Server Down";break;case 404:i="No Data"}r&&n.error("context",r+""),n.error("error",e),e.stack&&n.error("stack",e.stack),t.classed("bad",!0),o(i,!0)},reset:function(){t.classed("bad",!1),o("",!1)},progress:c.d(e,"showProgress")||function(t){if(0<=t&&t<100){var n=Math.ceil(t/100*i),e="▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪".substr(0,n)+"▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫".substr(0,i-n);return r.classed("invisible",!1).text(e)}return r.classed("invisible",!0).text("")}}}();function S(t,n){return function(t){var n=t.name,e=t.initial,r=t.events,i=(void 0===r?[]:r).concat(["submit","update","reject","fail"]),o=u.a.apply(void 0,i);function l(){return function t(){return t.requested=!0,h}}var s=e,f=a.debounce(function(t,n){var e;function r(t){o.call("fail",null,t,h)}try{e=n[0],Promise.all(a.tail(n)).then(function(n){return t.requested?null:a.isFunction(e)?e.apply(h,n):e}).then(function(n){t.requested||(s=n,o.call("update",null,n,h))},function(n){t.requested||o.call("reject",null,n,h)}).catch(r),o.call("submit",null,h)}catch(t){r(t)}},0),h=c.c(o,{value:function(){return s},cancel:l(),submit:function(t,n,e,r){return this.cancel(),f(this.cancel=l(),arguments),this},toString:function(){return n}});return h}({name:t,events:n}).on("reject.affects-report fail.affects-report",function(){return T.error})}var k=function(){var t,n=u.a("moveStart","move","moveEnd","click"),e=null,r={time:0,mouse:[0,0]};function i(n,e){return{type:"click",startMouse:n,startScale:e,manipulator:t.manipulator(n,e)}}function a(){e=e||i(p(this),t.projection.scale())}function f(){var r=s.c.transform||{},a=p(this),u=c.f(r.k,t.projection.scale());if("click"===(e=e||i(a,1)).type){var l=Object(o.b)(a,e.startMouse);if(u===e.startScale&&(l<d||isNaN(l)))return;n.call("moveStart"),e.type="drag"}(u!==e.startScale||isNaN(a[0]))&&(e.type="zoom"),e.manipulator.move("zoom"===e.type?null:a,u),n.call("move")}function h(){null!==e&&(e.manipulator.end(),"click"===e.type?(Date.now()-r.time>500||Object(o.b)(r.mouse,e.startMouse)>=d)&&(n.call("click",null,e.startMouse,t.projection.invert(e.startMouse)||[]),r={time:Date.now(),mouse:e.startMouse}):g(),e=null)}var m=null;function g(){m&&clearTimeout(m),m=setTimeout(function(){m=null,(!e||"drag"!==e.type&&"zoom"!==e.type)&&(Ns.save({orientation:t.orientation()},{source:"moveEnd"}),n.call("moveEnd"))},v)}var y=Mn().on("start",a).on("zoom",f).on("end",h),b=Nn().on("start",a).on("drag",f).on("end",h),w=l.a("#display");c.s()?w.on("click",function(){a.call(this),h.call(this)}):c.q()&&!c.t()?w.call(b):w.call(y).on("wheel",function(){return s.c.preventDefault()});function _(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&"moveEnd"!==i.source&&(n.call("moveStart"),t.orientation(Ns.get("orientation"),E),y.transform(w,dn.scale(t.projection.scale())),n.call("moveEnd"))}return l.a("#show-location").on("click",function(){navigator.geolocation&&(T.status("Finding current position..."),navigator.geolocation.getCurrentPosition(function(t){T.status(""),D(t.coords.longitude,t.coords.latitude)},T.error))}),Ns.on("change:orientation.?",_),c.c(n,{globe:function(n){return n&&(t=n,y.scaleExtent(t.scaleExtent()),_()),n?this:t},cancelMove:function(){h()},hotkey:function(e,r){if("zoom"===e)return y.scaleBy(w,r);m||n.call("moveStart");var i=t.projection,o=i.rotate(),a=r/8;switch(e){case"left":i.rotate([o[0]+a,o[1]]);break;case"right":i.rotate([o[0]-a,o[1]]);break;case"up":i.rotate([o[0],o[1]-a]);break;case"down":i.rotate([o[0],o[1]+a])}n.call("move"),g()}})}(),A=S("mesh"),j=S("globe"),N=S("grid"),O=S("renderer",["start","render","redraw"]),P=S("field"),R=S("fastoverlay"),C=S("animator"),F=S("overlay"),z=S("overlayGrid"),L=S("button");function I(t){var n=j.value();if(n){var e=n.locate(t);e&&(n.projection.rotate(e),Ns.save({orientation:n.orientation()}))}}function D(t,n){var e=+t,r=+n,i=[e,r];e==e&&r==r?(et(null,i),I(i)):rt()}function q(t){var e=this.cancel;T.status("Downloading...");var r=[];return r.push(c.y(t)),"tara"===c.E()&&(r.push(c.y(rs.gaia("/data/tara/tara-plan-20170829.json"))),r.push(c.y(rs.gaia("/data/tara/tara-track.json")))),Promise.all(r).then(function(t){var r=zs(t,3),i=r[0],o=r[1],a=r[2];if(e.requested)return null;n.time("building meshes");var u=i.objects,l=sr(i,c.u()?u.coastline_tiny:u.coastline_110m),s=sr(i,c.u()?u.coastline_110m:u.coastline_50m),f=sr(i,c.u()?u.lakes_tiny:u.lakes_110m),h=sr(i,c.u()?u.lakes_110m:u.lakes_50m),p=sr(i,c.u()?u.rivers_tiny:u.rivers_110m),d=sr(i,c.u()?u.rivers_110m:u.rivers_50m);return n.timeEnd("building meshes"),{coastLo:l,coastHi:s,lakesLo:f,lakesHi:h,riversLo:p,riversHi:d,tara:{plan:o,track:a}}})}function U(t){var n=r[t];return n?n(E):Promise.reject("Unknown projection: "+t)}var H=0;function G(t){T.status("Downloading..."),n.time("build grids");var e=this.cancel;H++;var r=Object(c.J)(Ns.getAll(),Rs.getAll());return Promise.all(rs.productsFor(r)).then(function(n){var r=n.map(function(t){return t.load(e)});return Promise.all(r).then(function(n){return{primaryGrid:n[0],overlayGrid:n[1]||n[0],isNewPrimaryGrid:!!t}}).catch(function(e){return T.error(e),{primaryGrid:n[1]||n[0],overlayGrid:n[1]||n[0],isNewPrimaryGrid:!!t}})}).finally(function(){H--,n.timeEnd("build grids")})}function X(t){if(H>0)n.debug("Download in progress--ignoring nav request.");else{var e=N.value().overlayGrid.navigate(t);e&&Ns.save(c.g(e))}}function W(t,e){if(!t||!e)return null;T.status("Rendering Globe..."),n.time("rendering map");var r=l.a("#map").node().getContext("2d"),i=l.a("#foreground").node().getContext("2d"),o=l.a("#annotation"),u=Ns.get("orientation");c.C(o.node()),e.orientation(u,E);var s=or().projection(e.projection).pointRadius(function(t){return t.size||7});"tara"===c.E()&&function(t,n,e){var r=t.append("g"),i={type:"LineString",coordinates:n.plan.coordinates.filter(function(t,n){return n>253})};r.append("path").attr("class","tara-route tara-plan").datum(i);var o=n.track.geometries;o=o.filter(function(t,n){return n>o.length-10||n%3==0});var u={type:"LineString",coordinates:a.map(o,a.property("coordinates"))},s={type:"LineString",coordinates:u.coordinates.slice(0,3400)},f={type:"LineString",coordinates:u.coordinates.slice(3400)};r.append("path").attr("class","tara-route tara-track-border").datum(u),r.append("path").attr("class","tara-route tara-track-old").datum(s),r.append("path").attr("class","tara-route tara-track").datum(f);var h={type:"Point",coordinates:a.last(u.coordinates),size:4};""!==e&&",,"!==e.substr(0,2)||I(h.coordinates),r.append("path").attr("class","tara-loc").datum(h);var p=a.last(o),d={date:p.date,heading:+c.f(p.heading,NaN),speed:3.6*+c.f(p.speed,NaN),air_temp:+c.f(p.air_temp,NaN),water_temp:+c.f(p.water_temp,NaN),pressure:+c.f(p.pressure,NaN)},v={date:pr.g(pr.c(d.date),"{yyyy}-{MM}-{dd} {hh}:{mm}"),heading:isNaN(d.heading)?"N/A":d.heading.toFixed(0),speed:isNaN(d.speed)?"N/A":d.speed.toFixed(1),air_temp:isNaN(d.air_temp)?"N/A":d.air_temp.toFixed(1),water_temp:isNaN(d.water_temp)?"N/A":d.water_temp.toFixed(1),pressure:isNaN(d.pressure)?"N/A":d.pressure.toFixed(0)},m=l.a("#tara-stats");m.selectAll("*").remove(),m.append("p").text("Tara stats:"),m.append("p").classed("stat",!0).text(v.heading+"° @ "+v.speed+" km/h"),m.append("p").classed("stat",!0).text(v.air_temp+" °C (air)"),m.append("p").classed("stat",!0).text(v.water_temp+" °C (water)"),m.append("p").classed("stat",!0).text(v.pressure+" hPa"),m.append("p").text(v.date),m.selectAll(".stat").attr("style","padding-left: 1em"),m.classed("invisible",!1)}(o,t.tara,u),nt();var f=5,h=a.throttle(function t(){o.selectAll("path").attr("d",s);S(!1);O.call("redraw");h=a.throttle(t,f,{leading:!1})},f,{leading:!1}),p=e.backgroundRenderer(),d=e.graticuleRenderer(),v=qu(t.coastLo,{strokeStyle:"#ffffff",lineWidth:1.25}),m=qu(t.lakesLo,{strokeStyle:"#ffffff",lineWidth:1.25}),g=qu(t.riversLo,{strokeStyle:"#808080",lineWidth:1.25}),y=qu(t.coastHi,{strokeStyle:"#ffffff",lineWidth:1.25}),b=qu(t.lakesHi,{strokeStyle:"#ffffff",lineWidth:1.25}),w=qu(t.riversHi,{strokeStyle:"#808080",lineWidth:1.25}),_=Uu([p,d,v,m,g]),x=Uu([p,d,y,b,w]),M=Uu([e.foregroundRenderer()]);function S(t){(t?x:_).renderTo(r,s),M.renderTo(i,s),s.context(null)}return k.on("moveStart.renderer",function(){O.call("start")}),k.on("move.renderer",function(){h()}),k.on("moveEnd.renderer",function(){o.selectAll("path").attr("d",s),S(!0),O.call("render")}),Promise.resolve().then(function(){k.globe(e)}).catch(T.error),n.timeEnd("rendering map"),"ready"}function B(t){if(!t)return null;n.time("render mask");var e=E.width,r=E.height,i=l.a(document.createElement("canvas")).attr("width",e).attr("height",r).node(),o=t.defineMask(i.getContext("2d"));o.fillStyle="rgba(255, 0, 0, 1)",o.fill();var u=o.createImageData(e,r),c=u.data;return function(t,n){if(a.isFunction(t.set))t.set(n);else for(var e=0;e<n.length;e++)t[e]=n[e]}(c,o.getImageData(0,0,e,r).data),n.timeEnd("render mask"),{imageData:u,isVisible:function(t,n){return c[4*(n*e+t)+3]>0},set:function(t,n,r){var i=4*(n*e+t);return c[i]=r[0],c[i+1]=r[1],c[i+2]=r[2],c[i+3]=r[3],this}}}function V(t,n,e,r,i,o,a){var u=a[0]*o,l=a[1]*o,s=c.i(t,n,e,r,i);return a[0]=s[0]*u+s[2]*l,a[1]=s[1]*u+s[3]*l,a}var Y=!1;function J(t,e){if(!t||!e||!O.value())return null;var r=R.value(),i=void 0!==r&&r.draw();if(void 0!==r&&void 0!==r.failure()&&!Y){Y=!0;var o=JSON.stringify(r.failure());n.debug("fastoverlay failure: ".concat(o)),window.ga("send","event","gl",o)}var a=B(t),u=e.primaryGrid,l=e.overlayGrid,s=u!==l;if(!u.field||!l.field)return null;var p=u.field(),d=l.field(),v=p.bilinear,m=d.bilinear;n.time("interpolating field");var g=this.cancel,y=t.optimizedProjection(),b=y.invert.bind(y),w=t.bounds(E),S=u.particles.velocityScale,k=[],A=[],j=w.y,N=l.scale,P=Rs.get("hd"),C=P?1:2;function F(t){for(var n=t===w.yMax,e=new Float32Array(3*w.width),r=w.x,o=0;r<=w.xMax;r+=C,o+=3*C){var u=r===w.xMax,f=_;if(a.isVisible(r,t)){A[0]=r,A[1]=t;var h=b(A),d=M;if(h){var g=h[0],E=h[1];if(g==g){var T=(f=v(h))[2];T<7e37?T=(f=V(y,g,E,r,t,S,f))[2]:f=x,i||((s||"scalar"===p.type)&&(T=c.D(m(h))),T<7e37&&((d=N.rgba(T))[3]=l.alpha.animated))}}a.set(r,t,d),P||(u||(a.set(r+1,t,d),n||a.set(r+1,t+1,d)),n||a.set(r,t+1,d))}e[o]=f[0],e[o+1]=f[1],e[o+2]=f[2],P||u||(e[o+3]=f[0],e[o+4]=f[1],e[o+5]=f[2])}k[t]=e,P||(k[t+1]=e)}return T.status(""),T.progress(0),new Promise(function(t,e){!function r(){try{if(!g.requested)for(var i=Date.now();j<=w.yMax;)if(F(j),j+=C,Date.now()-i>f)return T.progress(Math.round((j-w.y)/(w.yMax-w.y)*100)),void setTimeout(r,h);t(function(t,n,e){var r=e.x,i={move:function(n,e,i,o){var a=Math.round(e);if(0<=a&&a<t.length){var u=t[a],c=3*(Math.round(n)-r);if(u&&0<=c&&c<u.length)return i[o]=n,i[o+1]=e,i[o+2]=u[c],i[o+3]=u[c+1],void(i[o+4]=u[c+2])}i[o]=n,i[o+1]=e,i[o+2]=7e37,i[o+3]=7e37,i[o+4]=7e37},isDefined:function(n,e){var i=Math.round(e);if(0<=i&&i<t.length){var o=t[i],a=3*(Math.round(n)-r);if(o&&0<=a&&a<o.length)return o[a]<7e37}return!1},isInsideBoundary:function(t,n){var e=new Float32Array(5);return i.move(t,n,e,0),e[4]<7e37}};return i.overlay=n.imageData,i}(k,a,w))}catch(t){e(t)}T.progress(100),n.timeEnd("interpolating field")}()})}function K(t,e){if(!(t&&P.value()&&e&&Ns.get("animate")))return!1;e.isNewPrimaryGrid&&Du(l.a("#animation").node());var r=this.cancel,o=t.bounds(E),u=c.I(m,e.primaryGrid.particles.maxIntensity),s=Math.round(o.width*y);c.u()&&(s=Math.floor(s*b)),n.debug("particle count: %s",s);var f,h,p=new Float32Array(5*s),d=new Int32Array(s),v=u.map(function(){return new Float32Array(4*s)}),_=new Int32Array(v.length),x=o.x,M=o.y,T=o.width,S=o.height,k=t.projection.scale();function A(t,n){var e=x+Math.random()*T,r=M+Math.random()*S;n.move(e,r,p,t)}function j(t,n){for(var e=0;e<10;e++)if(A(t,n),p[t+2]<7e37)return}var N=l.a("#animation").node().getContext("2d");e.primaryGrid.particles.waves?(f=40,h=function(){for(var t=P.value(),n=600/k*Math.pow(Math.log(k)/Math.log(600),2.5),e=0;e<_.length;e++)_[e]=0;for(var r=0,i=0;r<s;r+=1,i+=5){++d[r]>=f&&(d[r]=0,A(i,t));var o=p[i],a=p[i+1],c=p[i+2],l=p[i+3],h=o+c*n,m=a+l*n,g=p[i+4];if(g==g&&t.isDefined(h,m)){p[i]=h,p[i+1]=m;var y=Math.sqrt(c*c+l*l)/2.5;c/=y,l/=y;var b=u.indexFor(g*C[d[r]]),w=4*_[b]++,x=v[b];x[w]=o-l,x[w+1]=a+c,x[w+2]=o+l,x[w+3]=a-c}else d[r]=f}},N.fillStyle="rgba(0, 0, 0, 0.90)"):(f=100,h=function(){for(var t=P.value(),n=0;n<_.length;n++)_[n]=0;for(var e=0,r=0;e<s;e+=1,r+=5){++d[e]>=f&&(d[e]=0,A(r,t));var i=p[r],o=p[r+1],a=i+p[r+2],c=o+p[r+3],l=p[r+4];if(a<7e37){t.move(a,c,p,r);var h=p[r+2];if(h<7e37){var m=u.indexFor(l),g=4*_[m]++,y=v[m];y[g]=i,y[g+1]=o,y[g+2]=a,y[g+3]=c}else d[e]=f}else d[e]=f}},N.fillStyle=c.r()?"rgba(0, 0, 0, 0.95)":"rgba(0, 0, 0, 0.97)"),N.lineWidth=g;for(var O=0,R=0;O<s;O+=1,R+=5)d[O]=a.random(0,f),j(R,P.value());for(var C=new Float32Array(f),F=0;F<C.length;F++)C[F]=Math.sin(-i.c/2+F/7)/2+.5;function z(){return!r.requested&&(h(),function(){N.globalCompositeOperation="destination-in",N.fillRect(o.x,o.y,o.width,o.height),N.globalCompositeOperation="source-over";for(var t=0;t<v.length;t++){var n=v[t],e=4*_[t];if(e>0){N.beginPath(),N.strokeStyle=u[t];for(var r=0;r<e;r+=4)N.moveTo(n[r],n[r+1]),N.lineTo(n[r+2],n[r+3]);N.stroke()}}}(),setTimeout(z,w),!0)}return z(),{frame:z}}function $(t,n,e){if(n&&e&&Ns.get("showGridPoints")){t.fillStyle="rgba(255, 255, 255, 0.75)";var r=E.width,i=E.height,a=e.projection.stream({point:function(n,e){0<=n&&n<r&&0<=e&&e<i&&t.fillRect(Math.round(n),Math.round(e),1,1)}}),u=this.cancel,l=n.grid(),s=n.field().valueAt,p=0;!function t(){if(!u.requested){var n=Date.now()+f/4;(p=l.forEach(function(t,e,r){return c.D(s(r))<7e37&&(t=Object(o.c)(180+t,360)-180,a.point(t,e)),Date.now()>n},p))==p&&setTimeout(t,h)}}()}}function Z(t,n,e){if(t&&O.value()){var r=l.a("#overlay").node().getContext("2d"),i=(N.value()||{}).overlayGrid;if(Iu(r),Du(l.a("#scale").node()),n&&("off"!==n&&(e||function(t,n){for(var e=3;e<t.length;e+=4)0!==t[e]&&(t[e]=n)}(t.overlay.data,i.alpha.single),r.putImageData(t.overlay,0,0)),z.submit($,r,i,j.value())),i){for(var o=l.a("#scale"),a=o.node(),u=a.getContext("2d"),s=a.width-1,f=i.scale,h=f.colors,d=h.length/4-1,v=0;v<a.width;v++){var m=4*Math.round(v/s*d);u.fillStyle="rgb(".concat(h[m],",").concat(h[m+1],",").concat(h[m+2],")"),u.fillRect(v,0,1,a.height)}o.on("mousemove",function(){var t=Math.floor(p(this)[0]);if(t<0||s<t)return o.attr("title",null);var n=Math.round(t/s*d),e=f.valueFor(n),r=tt("wind"===i.type?"#location-wind-units":"#location-value-units",i).value();o.attr("title",c.k(e,r)+" "+(r.tooltip||r.label))})}}}function Q(t){var n=function(t){if(t)return t.overlayGrid.date();var n=Ns.get("date");return"current"===n?null:a.clone(n)}(t),e=l.a("#data-date").classed("local"),r="";return n&&(r=pr.g((e?pr.c:pr.f)(pr.b(n)),"{yyyy}-{MM}-{dd} {hh}:{mm}")),l.a("#data-date").text(r+" "+(e?"Local":"UTC")),l.a("#toggle-zone").text("⇄ "+(e?"UTC":"Local")),n}function tt(t,n){var e=n.units,r=n.type,i=e.length;function o(){return JSON.parse(l.a(t).attr("data-index")||"{}")}function a(t){return+t[r]||0}return{value:function(){return e[a(o())]},next:function(){var n=o();n[r]=(a(n)+1)%i,l.a(t).attr("data-index",JSON.stringify(n))}}}function nt(){ar(".location").text(""),l.a("#location-close").classed("invisible",!0);var t=Ns.get("loc")||[],n=+t[0],r=+t[1];if(n!=n||r!=r)return l.a(".location-mark").remove(),void(e.showLocationDetails&&e.showLocationDetails("","{}"));var i=N.value(),o=P.value(),u=j.value();if(i&&o&&u){var s=i.primaryGrid,f=i.overlayGrid,h={},p=c.j(n,r);l.a("#location-coord").text(p),l.a("#location-close").classed("invisible",!1);var d=s.interpolate([n,r]);c.n(d)?function(t,n){t[0]<7e37&&(function t(n,e){var r=tt("#location-wind-units",e),i=r.value();l.a("#location-wind").text(c.l(n,i)),l.a("#location-wind-units").html(i.label).on("click",function(){r.next(),t(n,e)})}(t,n),h[n.type]=a.object(n.units.map(function(n){return[n.label,c.l(t,n)]})))}(d,s):g(d,s),g(f!==s?c.D(f.interpolate([n,r])):7e37,f);var v=or().projection(u.projection).pointRadius(7),m=l.a(".location-mark");m.node()||(m=l.a("#annotation").append("path").attr("class","location-mark")),m.datum({type:"Point",coordinates:[n,r]}).attr("d",v),e.showLocationDetails&&e.showLocationDetails(p,JSON.stringify(h))}function g(t,n){t<7e37&&(!function t(n,e){var r=tt("#location-value-units",e),i=r.value();l.a("#location-value").text(c.k(n,i)),l.a("#location-value-units").html(i.label).on("click",function(){r.next(),t(n,e)})}(t,n),h[n.type]=a.object(n.units.map(function(n){return[n.label,c.k(t,n)]})))}}function et(t,n){var e=+n[0],r=+n[1],i=P.value();t&&i&&!i.isInsideBoundary(t[0],t[1])||e==e&&r==r&&Ns.save({loc:[e,r]})}function rt(){Ns.save({loc:null})}function it(t){C.value()&&C.submit(!1),t&&Du(l.a("#animation").node())}function ot(t,n,e){e=e||[n],l.a(t).on("click",function(){l.a(t).classed("disabled")||Ns.save(n)}),function(t,n){Ns.on("change.?",function(){var e=Ns.getAll(),r=!1;n.forEach(function(t){r|=a.isEqual(a.pick(e,Object.keys(t)),t)}),l.a(t).classed("highlighted",r)})}(t,e)}function at(t){a.isFunction(window.ga)&&window.ga("send","event","sponsor",t)}function ut(){var t=window.devicePixelRatio||1;ar(".fill-screen").attr("width",E.width).attr("height",E.height),ar(".max-screen").style("width","".concat(E.width,"px")).style("height","".concat(E.height,"px")).attr("width",E.width*t).attr("height",E.height*t).each(function(){this.getContext("2d").scale(t,t)})}function ct(t){var n=Ns.get("param");return("space"===n||"space"!==t)&&("space"===n&&"space"!==t||Ns.get("animate"))}function lt(){return(N.value()||{}).overlayGrid}Promise.resolve().then(function(){T.status("Initializing..."),l.a("#sponsor-link").attr("target",c.q()&&"tara"!==c.E()?"_new":null).on("click",function(){return at("click")}).on("contextmenu",function(){return at("right-click")}),l.a("#sponsor-hide").on("click",function(){l.a("#sponsor").classed("invisible",!0)}),l.a("#notice-hide").on("click",function(){l.a("#notice").classed("invisible",!0)}),l.a("#settings-show").select(".text-button").on("click",function(){l.a("#settings-wrap").classed("invisible",!1),l.a("#menu").classed("invisible")||Ls.click("show-menu")}),l.a("#settings-hide").on("click",function(){l.a("#settings-wrap").classed("invisible",!0)}),function(){var t=l.a("html").attr("lang");l.a("#settings").selectAll("a[lang='"+t+"']").classed("highlighted",!0);var n=function(t){for(var n=function(t){return t.languages||[t.language||t.userLanguage||"en"]}(t),e=0;e<n.length;e++){var r=as(os(n[e]));if(r)return r}return""}(window.navigator);n!==t&&l.a("#settings-show").select("a[lang='"+n+"']").classed("invisible",!1)}(),ut();var t=l.a("#scale-label").node();function i(){ar("a[lang]").attr("href",function(){var t=l.a(this),n=t.attr("data-link");return n?n+window.location.hash:t.attr("href")})}l.a("#scale").attr("width",Math.round(.95*(l.a("#menu").node().offsetWidth-t.offsetWidth))).attr("height",Math.round(t.offsetHeight/2)),l.a("#show-menu").on("click",function(){if(c.q()&&!c.t()&&"tara"!==c.E())window.open("https://earth.nullschool.net/"+window.location.hash,"_blank");else{var t=l.a("#menu").classed("invisible");l.a("#menu").classed("invisible",!t),t&&a.isFunction(window.ga)&&window.ga("send","event","menu","open")}}),"ontouchstart"in document.documentElement?l.a(document).on("touchstart",function(){}):l.a(document.documentElement).classed("no-touch",!0),i(),l.a(window).on("hashchange.affects-lang",function(){n.debug("hashchange"),i()}),Ns.on("change.?",function(){T.reset(),L.submit(function(){var t=[],n=[];ar(".highlighted").each(function(){t.push(this.id)}),ar(".disabled").each(function(){n.push(this.id)}),e.buttonStateChange&&e.buttonStateChange(JSON.stringify(t),JSON.stringify(n))})});var o=!0;function u(){O.submit(W,A.value(),j.value())}function f(){P.submit(J,j.value(),N.value())}Ns.on("change.?",function(t){if(!a.isFunction(window.ga)||o)return o=!1;var n=Ns.getAll();a.has(t,"projection")&&window.ga("send","event","projection",n.projection),a.has(t,"overlayType")&&window.ga("send","event","overlay",n.overlayType),(a.has(t,"param")||a.has(t,"surface")||a.has(t,"level"))&&window.ga("send","event","layer",[n.param,n.surface,n.level].join("-"))}),Rs.on("change:topology.?",function(t){A.submit(q,t)}),Rs.on("change:hd.?",function(){N.submit(G,!0)}),Ns.on("change:projection.?",function(t){j.submit(U,t)}),Ns.on("change.?",function(t){var n=Object.keys(t),e=!1,r=!1;a.intersection(n,["date","param","surface","level"]).length>0&&(e=!0,r=!0);var i=Ns.get("overlayType")||"default";if(a.indexOf(n,"overlayType")>=0&&"off"!==i){var o=N.value()||{},u=o.primaryGrid,c=o.overlayGrid;c&&(c.type===i||"default"===i&&u===c)||(e=!0)}e&&N.submit(G,r)}),N.on("update.affects-grid",function(t){!function(t){var n=Q(t),r="",i="";if(t){var o=c.F(),a=t.primaryGrid.descriptionHTML(o),u=t.overlayGrid.descriptionHTML(o);r=u.name+u.qualifier,t.primaryGrid!==t.overlayGrid&&(r=(a.qualifier===u.qualifier?a.name:a.name+a.qualifier)+" + "+r),i=t.overlayGrid.sourceHTML||""}l.a("#data-layer").html(r),l.a("#data-center").html(i),e.productChange&&e.productChange(pr.b(n).getTime(),r,i)}(t)}),l.a("#toggle-zone").on("click",function(){l.a("#data-date").classed("local",!l.a("#data-date").classed("local")),Q(N.cancel.requested?null:N.value())}),A.on("update.affects-renderer",u),j.on("update.affects-renderer",u),N.on("update.affects-field",f),O.on("render.affects-field",f),O.on("start.affects-field redraw.affects-field",function(){P.cancel(),z.cancel()}),P.on("update.affects-animator",function(){C.submit(K,j.value(),N.value())}),O.on("start.affects-animator",function(){return it(!0)}),N.on("submit.affects-animator",function(){return it(!1)}),P.on("submit.affects-animator",function(){return it(!1)}),P.on("update.affects-overlay",function(){F.submit(Z,P.value(),Ns.get("overlayType"),Ns.get("animate"))}),O.on("start.affects-overlay",function(){Du(l.a("#overlay").node()),F.submit(Z,P.value(),null,null)}),Ns.on("change.?",function(t){var n=Object.keys(t);a.intersection(n,["overlayType","showGridPoints","animate"]).length>0&&F.submit(Z,P.value(),Ns.get("overlayType"),Ns.get("animate"))}),Ns.on("change:animate.?",function(t){t?f():it(!0)}),k.on("click.affects-location",et),l.a("#location-close").on("click",rt),P.on("update.affects-location",nt),Ns.on("change:loc.?",nt),Ns.on("change:param.?",function(t){switch(ar(".ocean-mode").classed("invisible","ocean"!==t),ar(".wind-mode").classed("invisible","wind"!==t).selectAll(".text-button").classed("disabled","wind"!==t),ar(".chem-mode").classed("invisible","chem"!==t),ar(".particulates-mode").classed("invisible","particulates"!==t),ar(".space-mode").classed("invisible","space"!==t),t){case"chem":case"particulates":case"wind":l.a("#nav-backward-more").attr("title","-1 Day"),l.a("#nav-backward").attr("title","-3 Hours"),l.a("#nav-forward").attr("title","+3 Hours"),l.a("#nav-forward-more").attr("title","+1 Day");break;case"ocean":l.a("#nav-backward-more").attr("title","-1 Month"),l.a("#nav-backward").attr("title","-5 Days"),l.a("#nav-forward").attr("title","+5 Days"),l.a("#nav-forward-more").attr("title","+1 Month")}}),l.a("#air-mode").on("click",function(){"wind"!==Ns.get("param")&&Ns.save({param:"wind",surface:"surface",level:"level",overlayType:"default",animate:ct("wind")})}),Ns.on("change:param.?",function(t){l.a("#air-mode").classed("highlighted","wind"===t)}),l.a("#ocean-mode").on("click",function(){if("ocean"!==Ns.get("param")){var t={param:"ocean",surface:"primary",level:"waves",overlayType:"significant_wave_height",animate:ct("ocean")},n=Ns.getAll();"current"===n.date?Ns.save(t):Promise.all(rs.productsFor(c.c(n,t))).then(function(n){var e=zs(n,1)[0];e.date()&&Ns.save(c.c(t,c.g(e.date())))}).catch(T.error)}}),Ns.on("change:param.?",function(t){l.a("#ocean-mode").classed("highlighted","ocean"===t)}),l.a("#chem-mode").on("click",function(){"chem"!==Ns.get("param")&&Ns.save({param:"chem",surface:"surface",level:"level",overlayType:"cosc",animate:ct("chem")})}),Ns.on("change:param.?",function(t){l.a("#chem-mode").classed("highlighted","chem"===t)}),l.a("#particulates-mode").on("click",function(){"particulates"!==Ns.get("param")&&Ns.save({param:"particulates",surface:"surface",level:"level",overlayType:"duexttau",animate:ct("particulates")})}),Ns.on("change:param.?",function(t){l.a("#particulates-mode").classed("highlighted","particulates"===t)}),l.a("#space-mode").on("click",function(){"space"!==Ns.get("param")&&Ns.save({param:"space",surface:"surface",level:"level",overlayType:"aurora",animate:ct("space")})}),Ns.on("change:param.?",function(t){l.a("#space-mode").classed("highlighted","space"===t)}),Ns.on("change:overlayType.?",function(t){ar(".surface").classed("disabled",function(){return"wind"!==Ns.get("param")||("surface-level"===this.getAttribute("id")?"wind_power_density"===t:"misery_index"===t)})}),Ns.on("change:surface.?",function(t){l.a("#wind_power_density").classed("disabled","surface"===t)}),l.a("#nav-backward-more").on("click",function(){return X(-10)}),l.a("#nav-forward-more").on("click",function(){return X(10)}),l.a("#nav-backward").on("click",function(){return X(-1)}),l.a("#nav-forward").on("click",function(){return X(1)}),l.a("#nav-now").on("click",function(){return Ns.save({date:"current"})}),l.a("#option-show-grid").on("click",function(){Ns.save({showGridPoints:!Ns.get("showGridPoints")})}),Ns.on("change:showGridPoints.?",function(t){l.a("#option-show-grid").classed("highlighted",t)}),l.a("#animate-start").on("click",function(){Ns.save({animate:!Ns.get("animate")})}),Ns.on("change:animate.?",function(t){l.a("#animate-start").classed("highlighted",t)}),l.a("#hd").on("click",function(){Rs.save({hd:!Rs.get("hd")})}),Rs.on("change:hd.?",function(t){l.a("#hd").classed("highlighted",t)}),ar(".surface").each(function(){var t=this.id,n=t.split("-");ot("#"+t,{param:"wind",surface:n[0],level:n[1]})}),ot("#animate-currents",{param:"ocean",surface:"surface",level:"currents",animate:!0,overlayType:"default"},[{param:"ocean",surface:"surface",level:"currents"}]),ot("#animate-waves",{param:"ocean",surface:"primary",level:"waves",animate:!0,overlayType:"default"},[{param:"ocean",surface:"primary",level:"waves"}]),rs.overlayTypes().each(function(t){var n={overlayType:t},e=[n];"misery_index"===t?c.c(n,{surface:"surface",level:"level"}):"currents"===t?e.push({param:"ocean",surface:"surface",level:"currents",overlayType:"default"}):"primary_waves"===t&&e.push({param:"ocean",surface:"primary",level:"waves",overlayType:"default"}),ot("#".concat(t.replace(".","")),n,e)}),ot("#wind",{param:"wind",overlayType:"default"}),ot("#no-overlay",{overlayType:"off"}),Object.keys(r).forEach(function(t){ot("#"+t,{projection:t,orientation:""},[{projection:t}])}),l.a(window).on("orientationchange",function(){window.scrollTo(0,0),E=c.H(),ut(),R.value()&&l.a("#fastoverlay").style("width","".concat(E.width,"px")).style("height","".concat(E.height,"px")),j.submit(U,Ns.get("projection"))}),c.t()?ar(".kiosk").classed("invisible",!0):setTimeout(function(){l.a("#menu-ham").transition().style("opacity","0").remove()},15e3),function(){var t=function(t){console.time("glTest");var n={pass:!1};try{var e=function(t,n){var e=new Uint8Array(4);return i.readPixels(t,n,1,1,i.RGBA,i.UNSIGNED_BYTE,e),e},r=Lu(ys,bs);t&&(l.a(r).style("width","".concat(ys/ws,"px")).style("height","".concat(bs/ws,"px")).style("position","absolute").style("top","0").style("left","0"),l.a("#display").node().appendChild(r));var i=ds.getWebGL(r);if(!i)return n.hasContext=!1,n;var o=+i.getParameter(i.MAX_TEXTURE_SIZE)||-1;if(o<4096)return n.maxTexSize=o,n;var a=+i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision||-1;if(a<23)return n.precision=a,n;n.scenario=1,gs(r,void 0,function(){return 1},function(){return{width:ys,height:bs,pixelRatio:ws}},function(t){return[_s.webgl(t),xs.webgl(t),Es.webgl(t),Ts.webgl(t)]}).draw();var u=[Object(c.b)(e(195,280),[0,0,255,255]),Object(c.b)(e(195,252),[0,255,0,255]),Object(c.b)(e(195,210),[0,255,255,255]),Object(c.b)(e(195,150),[255,0,0,255]),Object(c.b)(e(195,100),[255,0,255,255]),Object(c.b)(e(195,40),[255,255,0,255]),Object(c.b)(e(195,15),[255,255,255,255]),Object(c.b)(e(145,15),[0,0,0,0])];if(u.some(function(t){return!1===t}))return n.colorMatch=u,n;n.err=i.getError(),n.pass=0===n.err}catch(t){n.err=t.toString()}finally{console.timeEnd("glTest")}return n}(c.o()),e=t.pass?"ok":JSON.stringify(t);if(n.debug("test gl: ".concat(e)),a.isFunction(window.ga)&&window.ga("send","event","gl",e),t.pass){var r=l.a("#fastoverlay").style("width","".concat(E.width,"px")).style("height","".concat(E.height,"px")).node(),i=gs(r,Lu(),function(){var t=(N.value()||{}).overlayGrid;return(Ns.get("animate")?t.alpha.animated:t.alpha.single)/255},function(){return{width:E.width,height:E.height,pixelRatio:Rs.get("hd")?1:.5}},function(t){if("off"===Ns.get("overlayType")||!O.value())return[];var n=[function(t){var n=j.value(),e=n&&n.optimizedProjection();return e&&e.webgl&&e.webgl(t)}(t),function(t){var n=o(),e=n.grid&&n.grid()||{};return e.webgl&&e.webgl(t)}(t),function(t){var n=o(),e=n.field&&n.field().bilinear||{};return e.webgl&&e.webgl(t)}(t),function(t){var n=o().scale||{};return n.webgl&&n.webgl(t)}(t)].filter(function(t){return!!t});return 4===n.length?n:[]});Ns.on("change:overlayType.?",i.draw),Rs.on("change:hd.?",i.draw),j.on("update.affects-fastoverlay",i.draw),N.on("update.affects-fastoverlay",i.draw),O.on("redraw.affects-fastoverlay",i.draw),O.on("render.affects-fastoverlay",i.draw),C.on("update.affects-fastoverlay",i.draw),R.submit(i)}function o(){return(N.value()||{}).overlayGrid||{}}}();var h=["surface-level","isobaric-1000hPa","isobaric-850hPa","isobaric-700hPa","isobaric-500hPa","isobaric-250hPa","isobaric-70hPa","isobaric-10hPa"];function p(){var t=Ns.getAll(),n=t.surface+"-"+t.level;return"wind"===t.param?a.indexOf(h,n):-1}l.a("body").on("keydown",function(){var t=s.c,n=is(t);if(!(t.defaultPrevented||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)){switch(n){case"Escape":if(!(l.a("#settings-wrap").classed("invisible")?l.a("#location-close").classed("invisible")?l.a("#menu").classed("invisible")?l.a("#notice").classed("invisible")?l.a("#sponsor").classed("invisible")?void 0:(Ls.click("sponsor-hide"),1):(Ls.click("notice-hide"),1):(Ls.click("show-menu"),1):(Ls.click("location-close"),1):(Ls.click("settings-hide"),1)))return;break;default:return}t.preventDefault()}}),l.a("body").on("keypress",function(){var t=s.c,n=is(t);if(!(t.defaultPrevented||t.altKey||t.ctrlKey||t.metaKey)){switch(n){case"e":Ls.click("show-menu");break;case"I":Ls.click(h[h.length-1]);break;case"i":Ls.click(h[p()+1]);break;case"m":Ls.click(h[p()-1]);break;case"M":Ls.click(h[0]);break;case"J":Ls.click("nav-backward-more");break;case"j":Ls.click("nav-backward");break;case"k":Ls.click("nav-forward");break;case"K":Ls.click("nav-forward-more");break;case"n":Ls.click("nav-now");break;case"p":Ls.click("animate-start");break;case"g":Ls.click("option-show-grid");break;case"H":Ls.click("hd");break;case"d":k.hotkey("zoom",1.003);break;case"x":k.hotkey("zoom",.997);break;case"D":k.hotkey("zoom",1.05);break;case"X":k.hotkey("zoom",.95);break;case"w":k.hotkey("up",1);break;case"W":k.hotkey("up",8);break;case"z":k.hotkey("down",1);break;case"Z":k.hotkey("down",8);break;case"a":k.hotkey("left",1);break;case"A":k.hotkey("left",8);break;case"s":k.hotkey("right",1);break;case"S":k.hotkey("right",8);break;default:return}t.preventDefault()}})}).then(function(){Ns.on("change.affects-hash",Ps),l.a(window).on("hashchange.affects-config",Os),Os(),Cs()}).catch(T.error),c.c(Ls,{url:function(){return window.location.href.toString()},scale:{valueAt:function(t){var n=lt(),e={};if(n){var r={},i=o.f.apply(void 0,[t/100].concat(Fs(n.scale.bounds)));n.units.forEach(function(t){r[t.label]=c.k(i,t)}),e[n.type]=r}return JSON.stringify(e)},palette:function(){var t=lt();return JSON.stringify(t?function(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}({},t.type,c.G(t.scale.colors)):{})}},navToDate:function(t){var n=lt(),e=new Date(t);return!n||a.isNaN(e.getUTCFullYear())?0:(e=n.navigateTo(pr.f(e)))?(a.defer(function(){Ns.save(c.g(e))}),pr.b(e).getTime()):0},click:function(t){a.defer(function(){var n=l.a("#"+t).node();return null!==n?n.dispatchEvent(c.B()):void 0})},locate:function(t,n){a.defer(D,t,n)},orient:function(t){a.defer(function(){var n=j.value();if(void 0===t)return n.projection.rotate();n.projection.rotate(t),Ns.save({orientation:n.orientation()})})},stop:function(){a.defer(function(){Ns.save({animate:!1})})},cancelMove:function(){k.cancelMove()}})}e.d(n,"a",function(){return Ls})},function(t,n){t.exports="precision highp float;\n\nattribute vec2 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n    gl_Position = vec4(a_Position, 0.0, 1.0);\n    v_TexCoord = a_TexCoord;\n}\n"},function(t,n,e){"use strict";e.d(n,"a",function(){return o}),e.d(n,"b",function(){return a});var r=e(49),i=[/dailymail/i,/tamilinstanews/i,/xtremeweatherforecast/i,/oracle77.asuscomm/i];function o(t){var n=t.split("/")[2]||"";return i.some(function(t){return t.test(n)})}function a(){return r.a("body").attr("style","font-size: 12em; color: red;").text("XX - contact @cambecc").selectAll("*").remove()}},function(t,n,e){(function(t,n){!function(t,e){"use strict";if(!t.setImmediate){var r,i=1,o={},a=!1,u=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?r=function(t){n.nextTick(function(){s(t)})}:function(){if(t.postMessage&&!t.importScripts){var n=!0,e=t.onmessage;return t.onmessage=function(){n=!1},t.postMessage("","*"),t.onmessage=e,n}}()?function(){var n="setImmediate$"+Math.random()+"$",e=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(n)&&s(+e.data.slice(n.length))};t.addEventListener?t.addEventListener("message",e,!1):t.attachEvent("onmessage",e),r=function(e){t.postMessage(n+e,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){s(t.data)},r=function(n){t.port2.postMessage(n)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var t=u.documentElement;r=function(n){var e=u.createElement("script");e.onreadystatechange=function(){s(n),e.onreadystatechange=null,t.removeChild(e),e=null},t.appendChild(e)}}():r=function(t){setTimeout(s,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var n=new Array(arguments.length-1),e=0;e<n.length;e++)n[e]=arguments[e+1];var a={callback:t,args:n};return o[i]=a,r(i),i++},c.clearImmediate=l}function l(t){delete o[t]}function s(t){if(a)setTimeout(s,0,t);else{var n=o[t];if(n){a=!0;try{!function(t){var n=t.callback,r=t.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(e,r)}}(n)}finally{l(t),a=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,e(7),e(44))},function(t,n){t.exports="\nuniform float u_Detail;\n\nvoid main() {\n    vec2 coord = invert(gl_FragCoord.xy / u_Detail);\n    vec2 st = grid(coord);\n    float v = lookup(st);\n    lowp vec4 color = colorize(v);\n    gl_FragColor = color;\n}\n"},function(t,n){t.exports="precision highp float;\nprecision highp sampler2D;\n\nconst float TAU = 6.283185307179586;\nconst float PI = 3.141592653589793;\n"},function(t,n){t.exports="\nuniform vec2 u_Range;  // [min, size]\nuniform lowp sampler2D u_Palette;\nuniform lowp float u_Alpha;\n\nlowp vec4 colorize(in float v) {\n    vec2 st = vec2((fmap(v) - u_Range.x) / u_Range.y, 0.5);\n    lowp vec4 color = texture2D(u_Palette, st);\n    lowp float alpha = (1.0 - step(7e37, v)) * u_Alpha;\n    return vec4(color.rgb * alpha, alpha);  // premultiply alpha\n}\n"},function(t,n){t.exports="\nfloat fmap(in float v) {\n    return v;\n}\n"},function(t,n){t.exports="\nfloat fmap(in float v) {\n    return log(v);\n}\n"},function(t,n){t.exports="\nfloat scalarize(in vec4 h) {\n    float isMissing = step(7e37, h.x);\n    return length((1.0 - isMissing) * h.xw) + isMissing * 7e37;\n}\n"},function(t,n){t.exports="\nfloat scalarize(in vec4 h) {\n    return h.x;\n}\n"},function(t,n){t.exports="\nuniform sampler2D u_Data;\nuniform vec2 u_TextureSize;\n\nvec4 getSample(in vec2 st) {\n    // Use of fract below assumes cylindrical x axis (usually lon) and non-cylindrical y axis (usually lat).\n    return texture2D(u_Data, vec2(fract(st.s), st.t));\n}\n\nfloat lookup(in vec2 st) {\n    // adapted from http://www.iquilezles.org/www/articles/hwinterpolation/hwinterpolation.htm\n    vec2 uv = st * u_TextureSize - 0.5;\n    vec2 iuv = floor(uv);\n    vec2 fuv = fract(uv);\n    vec2 ruv = 1.0 - fuv;\n\n    vec4 a = getSample((iuv + vec2(0.5, 0.5)) / u_TextureSize);  // LL\n    vec4 b = getSample((iuv + vec2(1.5, 0.5)) / u_TextureSize);  // LR\n    vec4 c = getSample((iuv + vec2(0.5, 1.5)) / u_TextureSize);  // UL\n    vec4 d = getSample((iuv + vec2(1.5, 1.5)) / u_TextureSize);  // UR\n    vec4 h;\n\n    int tag = int(dot(step(7e37, vec4(a.x, b.x, c.x, d.x)), vec4(1.0, 2.0, 4.0, 8.0)));\n    if (tag == 0) {\n        // a b c d\n        h = mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n    } else if (tag == 1 && ruv.y < fuv.x) {\n        // d b c\n        h = d + ruv.x * (c - d) + ruv.y * (b - d);\n    } else if (tag == 2 && fuv.x < fuv.y) {\n        // c a d\n        h = c + fuv.x * (d - c) + ruv.y * (a - c);\n    } else if (tag == 4 && fuv.x >= fuv.y) {\n        // b a d\n        h = b + ruv.x * (a - b) + fuv.y * (d - b);\n    } else if (tag == 8 && fuv.x <= ruv.y) {\n        // a b c\n        h = a + fuv.x * (b - a) + fuv.y * (c - a);\n    } else {\n        // not enough points to interpolate\n        h = vec4(7e37);\n    }\n\n    return scalarize(h);\n}\n"},function(t,n){t.exports="\nuniform sampler2D u_Data;\n\nfloat lookup(in vec2 st) {\n    vec4 h = texture2D(u_Data, st);\n    return scalarize(h);\n}\n"},function(t,n){t.exports="\nuniform vec2 u_Low;\nuniform vec2 u_Size;\n\nvec2 grid(in vec2 coord) {\n    vec2 tex = (coord - u_Low) / u_Size;\n    float s = tex.s;\n    float t = tex.t;\n\n    if (t < 0.0 || 1.0 < t) discard;  // lat out of bounds, so nothing to draw\n\n    return vec2(fract(s), t);  // UNDONE: fract used here only because lon is circular.\n}\n"},function(t,n){t.exports="\nuniform vec2 u_translate;   // screen coords translation (x0, y0)\nuniform float u_R2;         // scale R, squared\nuniform float u_lon0;       // origin longitude\nuniform float u_sinlat0;    // sin(lat0)\nuniform float u_Rcoslat0;   // R * cos(lat0)\nuniform float u_coslat0dR;  // cos(lat0) / R\nuniform float u_flip;       // 1.0 if lat0 in range [-90deg, +90deg], otherwise -1.0\n\n// Handbook of Mathematical Functions, M. Abramowitz and I.A. Stegun, Ed. For input on range [-1, +1]\n// http://http.developer.nvidia.com/Cg/asin.html\nfloat arcsin(in float v) {\n    float x = abs(v);\n    float ret = -0.0187293;\n    ret *= x;\n    ret += 0.0742610;\n    ret *= x;\n    ret -= 0.2121144;\n    ret *= x;\n    ret += 1.5707288;\n    ret = PI / 2.0 - sqrt(1.0 - x) * ret;\n    return sign(v) * ret;\n}\n\n/** @returns [lon, lat] in radians for the specified point [x, y], or [7e37, 7e37] if the point is unprojectable. */\nvec2 invert(in vec2 point) {\n    vec2 pt = (point - u_translate) * u_flip;\n    float d = 1.0 - dot(pt, pt) / u_R2;\n    if (d >= 0.0) {  // CONSIDER: step() to remove branch... worth it?\n        float cosc = sqrt(d);\n        float lon = u_lon0 + atan(pt.x, cosc * u_Rcoslat0 - pt.y * u_sinlat0);  // u_lon0 + [-pi/2, pi/2]\n        float lat = arcsin(cosc * u_sinlat0 + pt.y * u_coslat0dR);              // [-π/2, π/2] [-90°, +90°]\n        return vec2(lon, lat);\n    }\n    return vec2(7e37);  // outside of projection\n}\n"},function(t,n,e){"use strict";e.d(n,"b",function(){return r});var r="$";function i(){}function o(t,n){var e=new i;if(t instanceof i)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,o=-1,a=t.length;if(null==n)for(;++o<a;)e.set(o,t[o]);else for(;++o<a;)e.set(n(r=t[o],o,t),r)}else if(t)for(var u in t)e.set(u,t[u]);return e}i.prototype=o.prototype={constructor:i,has:function(t){return r+t in this},get:function(t){return this[r+t]},set:function(t,n){return this[r+t]=n,this},remove:function(t){var n=r+t;return n in this&&delete this[n]},clear:function(){for(var t in this)t[0]===r&&delete this[t]},keys:function(){var t=[];for(var n in this)n[0]===r&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)n[0]===r&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)n[0]===r&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)n[0]===r&&++t;return t},empty:function(){for(var t in this)if(t[0]===r)return!1;return!0},each:function(t){for(var n in this)n[0]===r&&t(this[n],n.slice(1),this)}},n.a=o},function(t,n,e){"use strict";var r=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var i=document.documentElement;if(!i.matches){var o=i.webkitMatchesSelector||i.msMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector;r=function(t){return function(){return o.call(this,t)}}}}n.a=r},function(t,n,e){"use strict";function r(){return[]}n.a=function(t){return null==t?r:function(){return this.querySelectorAll(t)}}},function(t,n,e){"use strict";(function(t){var r=e(21);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=setTimeout;function a(){}function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function c(t,n){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,u._immediateFn(function(){var e=1===t._state?n.onFulfilled:n.onRejected;if(null!==e){var r;try{r=e(t._value)}catch(t){return void s(n.promise,t)}l(n.promise,r)}else(1===t._state?l:s)(n.promise,t._value)})):t._deferreds.push(n)}function l(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"===i(n)||"function"==typeof n)){var e=n.then;if(n instanceof u)return t._state=3,t._value=n,void f(t);if("function"==typeof e)return void h(function(t,n){return function(){t.apply(n,arguments)}}(e,n),t)}t._state=1,t._value=n,f(t)}catch(n){s(t,n)}}function s(t,n){t._state=2,t._value=n,f(t)}function f(t){2===t._state&&0===t._deferreds.length&&u._immediateFn(function(){t._handled||u._unhandledRejectionFn(t._value)});for(var n=0,e=t._deferreds.length;n<e;n++)c(t,t._deferreds[n]);t._deferreds=null}function h(t,n){var e=!1;try{t(function(t){e||(e=!0,l(n,t))},function(t){e||(e=!0,s(n,t))})}catch(t){if(e)return;e=!0,s(n,t)}}u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,n){var e=new this.constructor(a);return c(this,new function(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}(t,n,e)),e},u.prototype.finally=r.a,u.all=function(t){return new u(function(n,e){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return n([]);var o=r.length;function a(t,u){try{if(u&&("object"===i(u)||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,function(n){a(t,n)},e)}r[t]=u,0==--o&&n(r)}catch(t){e(t)}}for(var u=0;u<r.length;u++)a(u,r[u])})},u.resolve=function(t){return t&&"object"===i(t)&&t.constructor===u?t:new u(function(n){n(t)})},u.reject=function(t){return new u(function(n,e){e(t)})},u.race=function(t){return new u(function(n,e){for(var r=0,i=t.length;r<i;r++)t[r].then(n,e)})},u._immediateFn="function"==typeof t&&function(n){t(n)}||function(t){o(t,0)},u._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},n.a=u}).call(this,e(42).setImmediate)},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n,e){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,n){this._id=t,this._clearFn=n}n.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},n.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},n.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;n>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},n))},e(25),n.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,n.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,e(7))},function(t,n,e){"use strict";(function(t){var n=e(40),r=e(21),i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")}();i.Promise?i.Promise.prototype.finally||(i.Promise.prototype.finally=r.a):i.Promise=n.a}).call(this,e(7))},function(t,n){var e,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,l=[],s=!1,f=-1;function h(){s&&c&&(s=!1,c.length?l=c.concat(l):f=-1,l.length&&p())}function p(){if(!s){var t=u(h);s=!0;for(var n=l.length;n;){for(c=l,l=[];++f<n;)c&&c[f].run();f=-1,n=l.length}c=null,s=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function d(t,n){this.fun=t,this.array=n}function v(){}i.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];l.push(new d(t,n)),1!==l.length||s||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,n,e){"use strict";e(25),e(43);Math.sign||(Math.sign=function(t){return(t>0)-(t<0)||+t})},function(t,n,e){"use strict";e.r(n),function(t){e(45);var n=e(0),r=e.n(n),i=e(49),o=e(1),a=e(24),u=e(22),c=e(14);window.addEventListener("touchmove",function(){}),t.earth=u.a,t.main=function(t){t=t||{};var n=Object(c.a)(t.console),e={log:n,bridge:t};o.p()&&n.debug("dev mode enabled"),r.a.defer(u.a,e)},o.q()&&r.a.isFunction(window.ga)&&window.ga("send","event","iframe",document.referrer.split("/")[2]||document.referrer),o.q()&&a.a(document.referrer)?a.b():o.m()?i.a("#details").classed("invisible",!0):t.main()}.call(this,e(7))},,function(t,n,e){"use strict";var r={value:function(){}};function i(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new o(r)}function o(t){this._=t}function a(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function u(t,n,e){for(var i=0,o=t.length;i<o;++i)if(t[i].name===n){t[i]=r,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=e&&t.push({name:n,value:e}),t}o.prototype=i.prototype={constructor:o,on:function(t,n){var e,r=this._,i=function(t,n){return t.trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}(t+"",r),o=-1,c=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<c;)if(e=(t=i[o]).type)r[e]=u(r[e],t.name,n);else if(null==n)for(e in r)r[e]=u(r[e],t.name,null);return this}for(;++o<c;)if((e=(t=i[o]).type)&&(e=a(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new o(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}},n.a=i},function(t,n,e){"use strict";var r=e(13);n.a=function(t){return"string"==typeof t?new r.a([[document.querySelector(t)]],[document.documentElement]):new r.a([[t]],r.c)}}]);
//# sourceMappingURL=bundle.js.map